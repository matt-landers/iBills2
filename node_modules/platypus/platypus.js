var __extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},plat;!function(a){"use strict;";function b(){}function c(a){for(var b=[],d=1;d<arguments.length;d++)b[d-1]=arguments[d];if(t(a))return a;var e=q(a);e&&(a=b.shift());var f,h;return A(function(b){g(b)&&(f=Object.keys(b),A(function(d){if(h=b[d],e){if(v(h))return void c(e,a[d]||(a[d]=[]),h);if(x(h))return void(a[d]=new Date(h.getTime()));if(n(h))return void(a[d]=new RegExp(h));if(j(h))return void(a[d]=h.cloneNode(!0));if(g(h))return void c(e,a[d]||(a[d]={}),h)}a[d]=h},f))},b),a}function d(a){for(var b=[],d=1;d<arguments.length;d++)b[d-1]=arguments[d];return c.apply(null,[!0,a].concat(b))}function e(a,b){if(!g(a))return a;if(x(a))return new Date(a.getTime());if(n(a))return new RegExp(a);if(j(a))return a.cloneNode(b);if(f(a))return new a.constructor(a.message);var e={};return v(a)&&(e=[]),q(b)&&b?d(e,a):c(e,a)}function f(a){return qf.call(a)===sf}function g(a){return null!=a&&"object"==typeof a}function h(a){return!!(a&&a.document&&a.setInterval)}function i(a){return!(!a||a.nodeType!==Node.DOCUMENT_NODE)}function j(a){return!(!a||"number"!=typeof a.nodeType)}function k(a){return!(!a||a.nodeType!==Node.DOCUMENT_FRAGMENT_NODE)}function l(a){return g(a)&&qf.call(a)===tf}function m(a){return"string"==typeof a||g(a)&&qf.call(a)===zf}function n(a){return g(a)&&qf.call(a)===yf}function o(a){return g(a)&&(qf.call(a)===Af||s(a.then))}function p(a){return t(a)?!0:m(a)||v(a)?0===a.length:g(a)?0===Object.keys(a).length:!1}function q(a){return a===!0||a===!1||g(a)&&qf.call(a)===vf}function r(a){return("number"==typeof a||g(a)&&qf.call(a)===xf)&&!isNaN(a)}function s(a){return"function"==typeof a}function t(a){return null===a||void 0===a}function u(a){return void 0===a}function v(a){return of?Array.isArray(a):qf.call(a)===uf}function w(a){return t(a)||h(a)||s(a)?!1:m(a)||a.length>=0}function x(a){return"object"==typeof a&&qf.call(a)===wf}function y(a,b,c){var d=[];return t(b)?d:s(b.filter)?b.filter(a,c):(A(function(b,c,e){a(b,c,e)&&d.push(b)},b),d)}function z(a,b){return y(function(b){return!G(function(a,c){return b[c]!==a},a)},b)}function A(a,b,c){if(t(b)||!g(b)&&!w(b))return b;var d,e,f;if(s(b.forEach))return b.forEach(a,c);if(w(b))for(d=0,f=b.length;f>d;++d)a.call(c,b[d],d,b);else{var h=Object.keys(b);for(f=h.length;h.length>0;)e=h.shift(),a.call(c,b[e],e,b)}return b}function B(a,b,c){var d=[];return t(b)?d:s(b.map)?b.map(a,c):(A(function(e,f){d.push(a.call(c,e,f,b))},b),d)}function C(a,b,c){return yb=yb||plat.acquire(Ib),yb.all(B(a,b,c))}function D(a,b,c,d){yb=yb||plat.acquire(Ib);var e=yb.resolve([]);if(!v(b))return e;a=a.bind(c);var f=function(b,c,d,e){return b.then(function(b){return a(c,d,e).then(function(a){return b.concat(a)})})};return d===!0?b.reduceRight(f,e):b.reduce(f,e)}function E(a,b,c){return D(a,b,c)}function F(a,b,c){return D(a,b,c,!0)}function G(a,b,c){if(t(b)||s(b))return!1;var d,e,f,g;if(s(b.some))return b.some(a,c);if(w(b)){for(d=0,f=b.length;f>d;++d)if(g=a.call(c,b[d],d,b),g===!0)return!0}else{var h=Object.keys(b);for(f=h.length;h.length>0;)if(e=h.shift(),g=a.call(c,b[e],e,b),g===!0)return!0}return!1}function H(a,b,c){return I(a,0,b,c)}function I(a,b,c,d){function e(){a.apply(d,c)}var f=setTimeout(e,b);return function(){clearTimeout(f)}}function J(a){function b(){return a+c.join("")}t(a)&&(a="");var c=pf[a];t(c)&&(c=pf[a]=["0","/"]);for(var d,e=c.length;e--;){if(d=c[e].charCodeAt(0),57===d)return c[e]="A",b();if(90===d)return c[e]="a",b();if(122!==d)return c[e]=String.fromCharCode(d+1),b();c[e]="0"}return c.unshift("0"),b()}function K(a){return!m(a)||p(a)?a:(a=a.charAt(0).toLowerCase()+a.slice(1),zb=zb||plat.acquire(Tb).camelCaseRegex,a.replace(zb,function(a,b,c,d){return d?c.toUpperCase():c}))}function L(a,b){return t(a)||delete a[b],a}function M(a,b){return t(a)?a:a[b]}function N(a){if(!p(a)){for(var b,c=a.split("&"),d={},e=c.length,f=0;e>f;++f)b=c[f].split("="),d[b[0]]=b[1];return d}}function O(a){return t(a)?"":"?"+B(function(a,b){return b+"="+a},a).join("&")}function P(a){return v(a)?a.reduce(function(a,b){return a&&b!==!1},!0):q(a)?a:!0}function Q(a,b){var c=k(b),d=t(b),e=c?b:plat.acquire(Mb).createDocumentFragment();d&&(b=e);var f;for(f=s(a.push)?a:Array.prototype.slice.call(a);f.length>0;)e.insertBefore(f.shift(),null);return c||d||b.appendChild(e),b}function R(a){for(var b=Array.prototype.slice.call(a.childNodes);b.length>0;)a.removeChild(b.pop())}function S(a,b){if(s(a.push)||(a=Array.prototype.slice.call(a)),!t(b))return void T(a,b);for(var c;a.length>0;)c=a.pop(),b=c.parentNode,t(b)||b.removeChild(c)}function T(a,b){for(;a.length>0;)b.removeChild(a.pop())}function U(a){var b=plat.acquire(Jb),c=plat.acquire(Mb),d=Bf.exec(a),e=c.createElement("div");if(t(d))return e=ab(e,a),e.removeChild(e.lastChild);a=a.trim();var f=d[1];if(b.pushState&&u(Hf[f]))return ab(e,a);if("body"===f)return e=ab(c.createElement("html"),a),e.removeChild(e.lastChild);var g=If[f]||If._default,h=g[0],i=g[1],j=g[2];for(e=ab(e,i+a+j);h-->0;)e=e.lastChild;return e}function V(a,b){if(R(a),!p(b)){var c=U(b);return c.childNodes.length>0?Q(c.childNodes,a):a.insertBefore(c,null),a}}function W(a,b,c){if(!t(a)&&g(b)){u(c)&&(c=null);var d;if(j(b))return d=b,b=Array.prototype.slice.call(d.childNodes),a.insertBefore(d,c),b;s(b.push)||(b=Array.prototype.slice.call(b));var e=plat.acquire(Mb),f=b.length;d=e.createDocumentFragment();for(var h=0;f>h;++h)d.insertBefore(b[h],null);return a.insertBefore(d,c),b}}function X(a){var b=a.parentNode,c=W(b,a.childNodes,a);return b.removeChild(a),c}function Y(a,b){if(t(b))return b;if(a.nodeType===Node.ELEMENT_NODE)for(var c,d=a.attributes,e=d.length,f=0;e>f;++f)c=d[f],b.setAttribute(c.name,c.value);var g=a.parentNode;return W(b,a.childNodes),g.replaceChild(b,a),b}function Z(a){var b=plat.acquire(Mb),c=b.createDocumentFragment();return p(a)||V(c,a),c}function $(a,b){if(!t(a)){var c,d=a.nextSibling,e=a.parentNode;if(t(b)&&(b=null),!t(e)&&(t(b)||b.parentNode===e))for(;d!==b;)c=d.nextSibling,e.removeChild(d),d=c}}function _(a,b){t(a)||($(a,b),bb(a),bb(b))}function ab(a,b){var c=plat.acquire(Jb);return c.msApp?MSApp.execUnsafeLocalFunction(function(){a.innerHTML=b}):a.innerHTML=b,a}function bb(a){if(!t(a)){var b=a.parentNode;t(b)||a.parentNode.removeChild(a)}}function cb(a,b){var c=(a||{}).className;if(m(c)&&m(b)&&""!==b){var d,e,f=b.split(Cf);if(u(a.classList)){if(p(c))return void(a.className=b);for(;f.length>0;)d=f.shift(),""!==d&&(e=new RegExp("^"+d+"\\s+|\\s+"+d+"$|\\s+"+d+"\\s+","g"),e.test(c)||(a.className+=" "+d))}else for(;f.length>0;)d=f.shift(),""!==d&&a.classList.add(d)}}function db(a,b){var c=(a||{}).className;if(m(c)&&m(b)&&""!==b){var d,e=b.split(Cf);if(u(a.classList)){if(c===b)return void(a.className="");for(;e.length>0;)d=e.shift(),""!==d&&(a.className=c=c.replace(new RegExp("^"+d+"\\s+|\\s+"+d+"$|\\s+"+d+"\\s+","g"),""))}else for(;e.length>0;)d=e.shift(),""!==d&&a.classList.remove(d)}}function eb(a,b){var c=(a||{}).className;if(m(c)&&m(b)&&""!==b){var d,e=b.split(Cf);if(u(a.classList)){var f;if(""===c)a.className=b;else if(c===b)return void(a.className="");for(;e.length>0;)if(d=e.shift(),""!==d){if(f=new RegExp("^"+d+"\\s+|\\s+"+d+"$|\\s+"+d+"\\s+","g"),f.test(c)){a.className=c=c.replace(f,"");continue}a.className+=" "+d}}else for(;e.length>0;)d=e.shift(),""!==d&&a.classList.toggle(d)}}function fb(a,b,c){var d=(a||{}).className;if(m(d)&&m(c)&&""!==c){var e=new RegExp("^"+b+"\\s+","g"),f=new RegExp("\\s+"+b+"\\s+","g"),g=new RegExp("\\s+"+b+"$","g");a.className=d.replace(e,c+" ").replace(f," "+c+" ").replace(g," "+c)}}function gb(a,b){var c=(a||{}).className;if(!m(c)||!m(b)||""===b)return!1;var d=b.split(Cf);if(u(a.classList)){if(""===c)return!1;if(c===b)return!0;for(var e;d.length>0;)if(e=d.shift(),""!==e&&!new RegExp("^"+e+"\\s|\\s"+e+"$|\\s"+e+"\\s","g").test(c))return!1;return!0}for(;d.length>0;)if(e=d.shift(),""!==e&&!a.classList.contains(e))return!1;return!0}function hb(a){Ab=Ab||plat.acquire(cc),Bb=Bb||plat.acquire(Gb);var b,c=Bb.ajax;return Ab.put(a,Ab.read(a).catch(function(b){return t(b)?c({url:a}):void 0}).then(function(c){if(k(c))return Ab.put(a,c);if(!g(c)||!m(c.response))return b=plat.acquire(Rb),b.warn("No template found at "+a,b.AJAX),Ab.put(a,Z());var d=c.response;return p(d.trim())?Ab.put(a,Z()):Ab.put(a,Z(d))}).catch(function(c){return H(function(){b=plat.acquire(Rb),b.fatal("Failure to get template from "+a+".",b.TEMPLATE)}),c}))}function ib(a){var b,c=v(a);b=Jf.Injector.getDependencies(c?a:[a]);for(var d=b.length,e=[],f=0;d>f;++f)e.push(b[f].inject());return c?e:e[0]}function jb(){return Qf}function kb(a){Sf.prototype=a||Error.prototype,Rf.prototype=new Sf}function lb(a,b,c){var d;switch(a instanceof Error?kb(Object.getPrototypeOf(a)):Sf.prototype!==Error.prototype&&kb(),d=new Rf(a,""),b){case Qf.PARSE:d.name=re;break;case Qf.BIND:d.name=se;break;case Qf.COMPILE:d.name=te;break;case Qf.NAME:d.name=ue;break;case Qf.NAVIGATION:d.name=ve;break;case Qf.TEMPLATE:d.name=we;break;case Qf.CONTEXT:d.name=xe;break;case Qf.EVENT:d.name=ye;break;case Qf.INJECTABLE:d.name=ze;break;case Qf.COMPAT:d.name=Ae;break;default:d=new Sf(a)}if(a instanceof Error){var e=Object.getOwnPropertyNames(a),f=e.length;d.message="",d=Object.create(d);for(var g=0;f>g;++g)d[e[g]]=a[e[g]];d.stack=a.stack,d.code=a.code}var h=ib(Ob);if(h.dispatch(Jd,Qf,d),c){if(a instanceof Error)throw a;throw d}}function mb(){return new Tf}function nb(){return new Uf}function ob(){return window}function pb(a){return a.document}function qb(a){return!t(ag[a])}function rb(a){return!t(_f[a])}function sb(a){return!t($f[a])}function tb(a){return!u(bg[a])}function ub(a,b,c,d){return dg.$Parser=a,dg.$ContextManagerStatic=b,dg.$EventManagerStatic=c,dg.$Promise=d,dg}function vb(){return eg}function wb(a,b,c,d,e){return jg.$Compat=a,jg.$EventManagerStatic=b,jg.$Document=c,jg.$Compiler=d,jg.$LifecycleEventStatic=e,jg}function xb(a){return a.app}var yb,zb,Ab,Bb,Cb,Db="$",Eb=Db+"AppStatic",Fb=Db+"App",Gb=Db+"Http",Hb=Db+"HttpConfig",Ib=Db+"Promise",Jb=Db+"Compat",Kb=Db+"ControlFactory",Lb=Db+"AttributeControlFactory",Mb=Db+"Document",Nb=Db+"DispatchEventInstance",Ob=Db+"ErrorEventStatic",Pb=Db+"EventManagerStatic",Qb=Db+"LifecycleEventStatic",Rb=Db+"ExceptionStatic",Sb=Db+"Parser",Tb=Db+"Regex",Ub=Db+"Tokenizer",Vb=Db+"NavigatorInstance",Wb=Db+"ContextManagerStatic",Xb=Db+"Compiler",Yb=Db+"CommentManagerFactory",Zb=Db+"ElementManagerFactory",$b=Db+"NodeManagerStatic",_b=Db+"TextManagerFactory",ac=Db+"CacheFactory",bc=Db+"ManagerCache",cc=Db+"TemplateCache",dc=Db+"Animator",ec=Db+"AttributesInstance",fc=Db+"BindableTemplatesFactory",gc=Db+"Dom",hc=Db+"DomEvents",ic=Db+"DomEventsConfig",jc=Db+"DomEventInstance",kc=Db+"ResourcesFactory",lc=Db+"TemplateControlFactory",mc=Db+"Utils",nc=Db+"Browser",oc=Db+"BrowserConfig",pc=Db+"Router",qc=Db+"RouterStatic",rc=Db+"UrlUtilsInstance",sc=Db+"Window",tc=Db+"LocalStorage",uc=Db+"SessionStorage",vc=Db+"BaseSegmentFactory",wc=Db+"BaseSegmentInstance",xc=Db+"StaticSegmentInstance",yc=Db+"VariableSegmentInstance",zc=Db+"DynamicSegmentInstance",Ac=Db+"SplatSegmentInstance",Bc=Db+"StateStatic",Cc=Db+"StateInstance",Dc=Db+"RouteRecognizerInstance",Ec=Db+"InjectorStatic",Fc=Db+"History",Gc=Db+"Location",Hc="plat-",Ic=Hc+"bind",Jc=Hc+"href",Kc=Hc+"src",Lc=Hc+"keydown",Mc=Hc+"keypress",Nc=Hc+"keyup",Oc=Hc+"name",Pc=Hc+"options",Qc=Hc+"checked",Rc=Hc+"disabled",Sc=Hc+"selected",Tc=Hc+"readonly",Uc=Hc+"visible",Vc=Hc+"style",Wc=Hc+"tap",Xc=Hc+"blur",Yc=Hc+"change",Zc=Hc+"copy",$c=Hc+"cut",_c=Hc+"paste",ad=Hc+"dbltap",bd=Hc+"focus",cd=Hc+"submit",dd=Hc+"touchstart",ed=Hc+"touchend",fd=Hc+"touchmove",gd=Hc+"touchcancel",hd=Hc+"hold",id=Hc+"release",jd=Hc+"swipe",kd=Hc+"swipeleft",ld=Hc+"swiperight",md=Hc+"swipeup",nd=Hc+"swipedown",od=Hc+"track",pd=Hc+"trackleft",qd=Hc+"trackright",rd=Hc+"trackup",sd=Hc+"trackdown",td=Hc+"trackend",ud=Hc+"react",vd=Hc+"link",wd=Hc+"foreach",xd=Hc+"html",yd=Hc+"if",zd=Hc+"ignore",Ad=Hc+"select",Bd=Hc+"template",Cd=Hc+"viewport",Dd="__templateControlCache",Ed="ready",Fd="suspend",Gd="resume",Hd="online",Id="offline",Jd="error",Kd="shutdown",Ld="beforeLoad",Md="urlChanged",Nd="pause",Od="deviceReady",Pd="backbutton",Qd=Hc+"hide",Rd=Hc+"animating",Sd=Hc+"animation",Td=Hc+"transition",Ud=Hc+"enter",Vd=Hc+"leave",Wd=Hc+"fadein",Xd=Hc+"fadeout",Yd=Db+"tap",Zd=Db+"dbltap",$d=Db+"touchstart",_d=Db+"touchend",ae=Db+"touchmove",be=Db+"touchcancel",ce=Db+"hold",de=Db+"release",ee=Db+"swipe",fe=Db+"swipeleft",ge=Db+"swiperight",he=Db+"swipeup",ie=Db+"swipedown",je=Db+"track",ke=Db+"trackleft",le=Db+"trackright",me=Db+"trackup",ne=Db+"trackdown",oe=Db+"trackend",pe="Error",qe="Plat"+pe,re="Parsing"+pe,se="Binding"+pe,te="Compiling"+pe,ue="PlatName"+pe,ve="Navigating"+pe,we="Templating"+pe,xe="Context"+pe,ye="DispatchEvent"+pe,ze="Injectable"+pe,Ae="Compatibility"+pe,Be={index:"index",even:"even",odd:"odd",first:"first",last:"last"},Ce="base",De="variable",Ee="static",Fe="splat",Ge="dynamic",He="{{",Ie="}}",Je="static",Ke="singleton",Le="instance",Me="factory",Ne="class",Oe="css",Pe="-compiled",Qe="-@",Re="-end",Se=": start node",Te=": end node",Ue="popstate",Ve="hashchange",We="wrapped",Xe="plat_callback",Ye="js",Ze="noop",$e="__app__",_e="context",af="resource",bf=af+"s",cf="alias",df=cf+"es",ef="observable",ff="injectable",gf="object",hf="function",jf="literal",kf="root",lf="rootContext",mf="control",nf=_e,of=!!Array.isArray,pf={},qf=Object.prototype.toString,rf="[object ",sf=rf+"Error]",tf=rf+"File]",uf=rf+"Array]",vf=rf+"Boolean]",wf=rf+"Date]",xf=rf+"Number]",yf=rf+"RegExp]",zf=rf+"String]",Af=rf+"Promise]",Bf=/<([\w:]+)/,Cf=/\s+/g,Df=[1,'<select multiple="multiple">',"</select>"],Ef=[1,"<table>","</table>"],Ff=[3,"<table><tbody><tr>","</tr></tbody></table>"],Gf=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"],Hf={thead:Ef,tbody:Ef,tfoot:Ef,colgroup:Ef,caption:Ef,tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:Ff,th:Ff},If=c({},Hf,{option:Df,optgroup:Df,legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],text:Gf,circle:Gf,ellipse:Gf,line:Gf,path:Gf,polygon:Gf,polyline:Gf,rect:Gf,_default:[0,"",""]});!function(a){function b(b,c,d,e,f,g){var h=b[c]=new Jf.Injector(c,d,e,f);return g===!0&&(Nf[c]=h),t(d)||(d.__injectorToken=c),a}function c(b,c,d){var e=new Jf.Injector(b,c,d),f=ib(Eb);return f.registerApp(e),a}function d(a,c,d,e){if(!m(a))throw new Error("A Control must be registered with a string name");return a=a.toLowerCase(),b(Kf,a,c,d,e?Je:void 0)}function e(a,c,d){if(!m(a))throw new Error("A ViewControl must be registered with a string name");return a=a.toLowerCase(),b(Lf,a,c,d)}function f(a,c,d,e){if(m(e)){if(e=e.toLowerCase(),e===Me||e===Je||e===Ne)return b(Mf,a,c,d,e,!0);if(e!==Ke&&e!==Le)throw new Error("Invalid injectable type "+e+" during injectable registration.")}else e=Ke;return b(Mf,a,c,d,e,!1)}function g(c,d,e,f){if(m(f)){if(f=f.toLowerCase(),f!==g.CSS&&f!==g.JS)throw new Error('Invalid animationType "'+f+'" during animation registration.')}else f=Oe;return b(f===Ye?Pf:Of,c,d,e,a.injectable.INSTANCE)}a.app=c,a.control=d,a.viewControl=e,a.injectable=f;var f;!function(a){a.STATIC=Je,a.SINGLETON=Ke,a.INSTANCE=Le,a.FACTORY=Me,a.CLASS=Ne}(f=a.injectable||(a.injectable={})),a.animation=g;var g;!function(a){a.CSS=Oe,a.JS=Ye}(g=a.animation||(a.animation={}))}(Cb=a.register||(a.register={}));var Jf,Kf={},Lf={},Mf={},Nf={},Of={},Pf={};!function(a){var c=function(){function a(b,c,d,e){void 0===e&&(e=null),this.name=b,this.Constructor=c,this.type=e;var f,g=this.__dependencies=a.convertDependencies(d),h=g.indexOf(Ze);if(h>-1){var i=d[h];if(t(i))throw new TypeError("The dependency for "+b+" at index "+h+" is undefined, did you forgot to include a file?");throw new TypeError("Could not resolve dependency "+i.slice(9,i.indexOf("("))+" for "+b+". Are you using a static injectable Type?")}if(f=a.__findCircularReferences(this),m(f))throw new Error("Circular dependency detected from "+b+" to "+f+".");if(b===Eb){var j=this.inject();this.__dependencies=g,j.start()}}return a.initialize=function(){for(var a=Nf,b=Object.keys(a),c=b.length,d=0;c>d;++d)a[b[d]].inject();Nf={}},a.getDependencies=function(b){if(t(b)||p(b))return[];for(var c=[],d=b.length,e=0;d>e;++e)c.push(a.getDependency(b[e]));return c},a.getDependency=function(b){return t(b)||b===Ze?a.__noop():a.isInjector(b)?b:a.__locateInjector(b)},a.convertDependencies=function(b){if(!v(b))return[];for(var c=a.convertDependency,d=[],e=b.length,f=0;e>f;++f)d.push(c(b[f]));return d},a.convertDependency=function(b){return t(b)?Ze:a.__getInjectorName(b)},a.isInjector=function(a){return s(a.inject)&&!u(a.type)&&!u(a.name)&&!u(a.Constructor)},a.__getInjectorName=function(b){if(t(b))return Ze;if(m(b))return b;if(b===window)return sc;if(b===window.document)return Mb;m(b.__injectorToken)&&(b=b.__injectorToken);var c=a.__findInjector.bind(a,b),d=c(Mf)||c(Nf)||c(Lf)||c(Kf)||c(Of)||c(Pf)||a.__noop();return g(d)?d.name:Ze},a.__construct=function(a,b){if(t(a)||t(a.prototype))return a;var c=Object.create(a.prototype),d=c.constructor.apply(c,b);return u(d)?c:d},a.__locateInjector=function(b){if(!t(b)){if(b===window)return Mf.$Window;if(b===window.document)return Mf.$Document;m(b.__injectorToken)&&(b=b.__injectorToken);var c=a.__findInjector.bind(a,b),d=c(Mf)||c(Nf)||c(Lf)||c(Kf)||c(Of)||c(Pf)||a.__wrap(b);return d}},a.__findInjector=function(b,c){if(b===a||b===Ec){var d=a.__wrap(a);return d.name=Ec,d}if(t(b)||m(b))return c[b];for(var e,f=Object.keys(c),g=f.length,h=0;g>h;++h)if(e=c[f[h]],e.Constructor===b)return e},a.__wrap=function(a){return{inject:function(){return a},name:We,__dependencies:[],Constructor:a}},a.__noop=function(){return{inject:b,type:Ze,name:Ze,__dependencies:[],Constructor:b}},a.__findCircularReferences=function(b){if(g(b)&&v(b.__dependencies))for(var c,d,e,f=b.name,h=b.__dependencies,i=[{name:f,dependencies:h.slice(0)}],j=a.__locateInjector;i.length>0;){c=i.pop(),h=c.dependencies,e=h.length;for(var k=0;e>k;++k){if(d=h[k],d===f)return c.name;b=j(d),g(b)&&v(b.__dependencies)&&i.push({name:b.name,dependencies:b.__dependencies.slice(0)})}}},a.prototype.inject=function(){for(var b,c,d=[],e=this.type,f=this.__dependencies,g=f.length,h=0;g>h;++h)b=a.getDependency(f[h]),d.push(b.inject());return c=a.__construct(this.Constructor,d),(e===Ke||e===Me||e===Je||e===Ne)&&this._wrapInjector(c),c},a.prototype._wrapInjector=function(a){return this.inject=function(){return a},this},a}();a.Injector=c;var d;!function(a){a.control=Kf,a.viewControl=Lf,a.injectable=Mf,a.staticInjectable=Nf,a.animation=Of,a.jsAnimation=Pf}(d=a.injectors||(a.injectors={}))}(Jf=a.dependency||(a.dependency={})),u(window)||(u(window.plat)&&(window.plat=plat),u(window.module)&&(window.module={})),a.acquire=ib;var Qf=function(){function a(){}return a.warn=function(a,b){lb(a,b,!1)},a.fatal=function(a,b){lb(a,b,!0)},a.PARSE=0,a.COMPILE=1,a.BIND=2,a.NAME=3,a.NAVIGATION=4,a.TEMPLATE=5,a.AJAX=6,a.CONTEXT=7,a.EVENT=8,a.INJECTABLE=9,a.COMPAT=10,a.PROMISE=11,a.ANIMATION=12,a}();a.Exception=Qf,a.IExceptionStatic=jb,Cb.injectable(Rb,jb,null,Je);var Rf=function(){function a(a,b){this.message=a,this.name=b}return a}(),Sf=function(){function a(a){this.message=a,this.name=qe,this.message=a||""}return a}(),Tf=function(){function a(){this.$Window=ib(sc),this.$history=ib(Fc),this.$Document=ib(Mb),this.__events={},this.__defineBooleans(),this.__defineMappedEvents(),this.__defineAnimationEvents(),this.__determineCss()}return a.prototype.hasEvent=function(a){var b=this.__events,c=b[a];if(u(c)){var d=this.$Document.createElement("div");c=b[a]="input"===a&&9===this.IE?!1:!u(d["on"+a])}return c},a.prototype.__defineBooleans=function(){var a=this.$Window,b=a.navigator||{},c=(b.userAgent||"").toLowerCase(),d=this.$history,e=a.define,f=a.MSApp,h=parseInt((/android (\d+)/.exec(c)||[])[1],10);if(this.isCompatible=s(Object.defineProperty)&&s(this.$Document.querySelector),this.cordova=!t(a.cordova),this.pushState=!(t(d)||t(d.pushState)),this.fileSupported=!(u(a.File)||u(a.FormData)),this.amd=s(e)&&!t(e.amd),this.msApp=g(f)&&s(f.execUnsafeLocalFunction),this.indexedDb=!t(a.indexedDB),this.proto=g({}.__proto__),this.getProto=s(Object.getPrototypeOf),this.setProto=s(Object.setPrototypeOf),this.hasTouchEvents=!u(a.ontouchstart),this.hasPointerEvents=!!b.pointerEnabled,this.hasMsPointerEvents=!!b.msPointerEnabled,r(h))return void(this.ANDROID=h);var i=parseInt((/msie (\d+)/.exec(c)||[])[1],10)||parseInt((/trident\/.*; rv:(\d+)/.exec(c)||[])[1],10);r(i)&&(this.IE=i)},a.prototype.__defineMappedEvents=function(){this.mappedEvents=this.hasPointerEvents?{$touchstart:"pointerdown",$touchend:"pointerup",$touchmove:"pointermove",$touchcancel:"pointercancel"}:this.hasMsPointerEvents?{$touchstart:"MSPointerDown",$touchend:"MSPointerUp",$touchmove:"MSPointerMove",$touchcancel:"MSPointerCancel"}:this.hasTouchEvents?{$touchstart:"touchstart",$touchend:"touchend",$touchmove:"touchmove",$touchcancel:"touchcancel"}:{$touchstart:"mousedown",$touchend:"mouseup",$touchmove:"mousemove",$touchcancel:null}},a.prototype.__defineAnimationEvents=function(){var a,b=this.$Document.documentElement,c=this.$Window.getComputedStyle(b,"");if(u(c.OLink)){var d=Array.prototype.slice.call(c).join("").match(/-(moz|webkit|ms)-/);a=v(d)&&d.length>1?d[1]:""}else a="o";if(this.vendorPrefix={lowerCase:a,css:""===a?"":"-"+a+"-",js:a[0].toUpperCase()+a.slice(1)},"webkit"===a){if(this.animationSupported=!u(b.style.WebkitAnimation),!this.animationSupported)return void(this.animationEvents={$animation:"",$animationStart:"",$animationEnd:"",$transition:"",$transitionStart:"",$transitionEnd:""});this.animationEvents={$animation:"webkitAnimation",$animationStart:"webkitAnimationStart",$animationEnd:"webkitAnimationEnd",$transition:"webkitTransition",$transitionStart:"webkitTransitionStart",$transitionEnd:"webkitTransitionEnd"}}else{if(this.animationSupported=!u(b.style.animation),!this.animationSupported)return void(this.animationEvents={$animation:"",$animationStart:"",$animationEnd:"",$transition:"",$transitionStart:"",$transitionEnd:""});this.animationEvents={$animation:"animation",$animationStart:"animationstart",$animationEnd:"animationend",$transition:"transition",$transitionStart:"transitionstart",$transitionEnd:"transitionend"}}},a.prototype.__determineCss=function(){var a=this.$Document,b=a.head,c=a.createElement("div");c.setAttribute(Qd,""),b.insertBefore(c,null);var d=this.$Window.getComputedStyle(c),e=d.display,f=d.visibility;this.platCss="none"===e||"hidden"===f?!0:!1,b.removeChild(c)},a}();a.Compat=Tf,a.ICompat=mb,Cb.injectable(Jb,mb);var Uf=function(){function a(){}return a.prototype.noop=function(){},a.prototype.extend=function(a){for(var b=[],d=1;d<arguments.length;d++)b[d-1]=arguments[d];return c.apply(null,[a].concat(b))},a.prototype.deepExtend=function(a){for(var b=[],d=1;d<arguments.length;d++)b[d-1]=arguments[d];return c.apply(null,[!0,a].concat(b))},a.prototype.clone=function(a,b){return e(a,b)},a.prototype.isObject=function(a){return g(a)},a.prototype.isWindow=function(a){return h(a)},a.prototype.isDocument=function(a){return i(a)},a.prototype.isNode=function(a){return j(a)},a.prototype.isDocumentFragment=function(a){return k(a)},a.prototype.isString=function(a){return m(a)},a.prototype.isRegExp=function(a){return n(a)},a.prototype.isPromise=function(a){return o(a)},a.prototype.isEmpty=function(a){return p(a)},a.prototype.isBoolean=function(a){return q(a)},a.prototype.isNumber=function(a){return r(a)},a.prototype.isFunction=function(a){return s(a)},a.prototype.isNull=function(a){return t(a)},a.prototype.isUndefined=function(a){return u(a)},a.prototype.isArray=function(a){return v(a)},a.prototype.isArrayLike=function(a){return w(a)},a.prototype.isDate=function(a){return x(a)},a.prototype.filter=function(a,b,c){return y(a,b,c)},a.prototype.where=function(a,b){return z(a,b)},a.prototype.forEach=function(a,b,c){return A(a,b,c)},a.prototype.map=function(a,b,c){return B(a,b,c)},a.prototype.mapAsync=function(a,b,c){return C(a,b,c)},a.prototype.mapAsyncInOrder=function(a,b,c){return E(a,b,c)},a.prototype.mapAsyncInDescendingOrder=function(a,b,c){return F(a,b,c)},a.prototype.pluck=function(a,b){return B(function(b){return b[a]},b)},a.prototype.some=function(a,b,c){return G(a,b,c)},a.prototype.postpone=function(a,b,c){return I(a,0,b,c)},a.prototype.defer=function(a,b,c,d){return I(a,b,c,d)},a.prototype.uniqueId=function(a){return J(a)},a.prototype.camelCase=function(a){return K(a)},a}();a.Utils=Uf,a.IUtils=nb,Cb.injectable(mc,nb),a.Window=ob,Cb.injectable(sc,ob),a.Document=pb,Cb.injectable(Mb,pb,[sc]);var Vf;!function(a){function b(){return new e}function c(){return new f}function d(){return new g}var e=function(){function a(){this.argumentRegex=/\((.*)\)/,this.aliasRegex=/[^@\.\[\(]+(?=[\.\[\(])/,this.initialUrlRegex=/\/[^\/]*\.(?:html|htm)/,this.protocolRegex=/:\/\//,this.invalidVariableRegex=/[^a-zA-Z0-9@_$]/,this.fileNameRegex=/.*(?:\/|\\)/,this.shiftedKeyRegex=/[A-Z!@#$%^&*()_+}{":?><|~]/,this.fullUrlRegex=/^(?:[a-z0-9\-]+:)(?:\/\/)?|(?:\/\/)/i,this.validateEmail=new RegExp('^(([^<>()[\\]\\.,;:\\s@\\"]+(\\.[^<>()[\\]\\.,;:\\s@\\"]+)*)|(\\".+\\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$'),this.validateTelephone=/^\+?[0-9\.\-\s]*$/,this.dynamicSegmentsRegex=/^:([^\/]+)$/,this.splatSegmentRegex=/^\*([^\/]+)$/,this.markupRegex=new RegExp(He+"[\\S\\s]*"+Ie)}return Object.defineProperty(a.prototype,"newLineRegex",{get:function(){return/\r|\n/g},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"optionalRouteRegex",{get:function(){return/\((.*?)\)/g},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"namedParameterRouteRegex",{get:function(){return/(\(\?)?:\w+/g},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"wildcardRouteRegex",{get:function(){return/\*\w*/g},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"escapeRouteRegex",{get:function(){return/[\-{}\[\]+?.,\\\^$|#\s]/g},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"camelCaseRegex",{get:function(){return/([\-_\.\s])(\w+?)/g},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"whiteSpaceRegex",{get:function(){return/("[^"]*?"|'[^']*?')|[\s\r\n\t\v]/g},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"quotationRegex",{get:function(){return/'|"/g},enumerable:!0,configurable:!0}),a}();a.Regex=e,a.IRegex=b,Cb.injectable(Tb,b);var f=function(){function a(){this.__previousChar="",this.__variableRegex=ib(Tb).invalidVariableRegex,this.__outputQueue=[],this.__operatorStack=[],this.__argCount=[],this.__objArgCount=[],this.__lastColonChar=[],this.__lastCommaChar=[]}return a.prototype.createTokens=function(a){if(t(a))return[];this._input=a;for(var b,c=a.length,d=0,e=!1,f=this._isSpace,g=this._isAlphaNumeric,h=0;c>h;h++)if(b=a[h],!f(b)){if(g(b))h=this.__handleAplhaNumeric(h,b);else if(qb(b))switch(b){case".":h=this.__handlePeriod(h,b);break;case"{":this.__handleLeftBrace(b);break;case"}":this.__handleRightBrace(b);break;case"[":this.__handleLeftBracket(b);break;case"]":this.__handleRightBracket(b);break;case"(":this.__handleLeftParenthesis(b);break;case")":this.__handleRightParenthesis(b);break;case",":this.__handleComma(b);break;case"'":case'"':h=this.__handleStringLiteral(h,b)}else if(sb(b))switch(b){case"?":e=!0,d++,this.__handleQuestion(b);break;case":":d=this.__handleColon(b,d);break;default:h=this.__handleOtherOperator(h,b)}else if(";"===b)return this._throwError("Unexpected semicolon"),[];this.__previousChar=b}if(e&&d>0)return this._throwError("Improper ternary expression"),[];if(this.__objArgCount.length>0)return this._throwError("Improper object literal"),[];this.__popRemainingOperators();var i=this.__outputQueue;return this._resetTokenizer(),i},a.prototype._checkType=function(a,b){return b?this._isNumeric(a):this._isAlphaNumeric(a)},a.prototype._lookAhead=function(a,b,c){for(var d,e=this._input,f=e.length;++b<f&&(d=e[b],this._checkType(d,c));)a+=d;return a},a.prototype._lookAheadForOperatorFn=function(a,b){for(var c,d=a,e=this._input,f=e.length;++b<f&&(c=e[b],d+=c,sb(d));)a=d;return a},a.prototype._lookAheadForDelimiter=function(a,b){for(var c,d="",e=this._input,f=e.length;++b<f&&(c=e[b])!==a;)d+=c;return d},a.prototype._popStackForVal=function(a,b,c){for(var d=this.__outputQueue,e=this.__operatorStack;a.val!==b;)if(d.push(e.shift()),a=e[0],0===e.length)return this._throwError(c)},a.prototype._isValEqual=function(a,b){return t(a)||t(a.val)?t(b):""===a.val?""===b:-1!==b.indexOf(a.val)},a.prototype._isValUnequal=function(a,b){return t(a)||t(a.val)?!t(b):""===a.val?""!==b:-1===b.indexOf(a.val)},a.prototype._resetTokenizer=function(){this._input=null,this.__previousChar="",this.__outputQueue=[],this.__operatorStack=[],this.__argCount=[],this.__objArgCount=[],this.__lastColonChar=[],this.__lastCommaChar=[]},a.prototype._throwError=function(a){var b=ib(Rb);b.fatal(a+" in "+this._input,b.PARSE)},a.prototype._isNumeric=function(a){return a>="0"&&"9">=a},a.prototype._isSpace=function(a){return" "===a||"\r"===a||"\n"===a||"	"===a||""===a||" "===a},a.prototype._isAlphaNumeric=function(a){return a>="a"&&"z">=a||a>="A"&&"Z">=a||a>="0"&&"9">=a||"@"===a||"_"===a||"$"===a},a.prototype._isStringValidVariable=function(a){return!this.__variableRegex.test(a)},a.prototype.__handleAplhaNumeric=function(a,b){var c=this._isNumeric(b),d=this._lookAhead(b,a,c);return this.__outputQueue.push(c?{val:Number(d),args:0}:{val:d,args:-1}),a+d.length-1},a.prototype.__handlePeriod=function(a,b){var c,d=this.__outputQueue,e=this.__operatorStack,f=d.length-1,g=this.__previousChar;return 0>f||this._isSpace(g)||!t($f[g])||"("===g||","===g?(c=this._lookAhead(b,a,!0),a+=c.length-1,d.push({val:parseFloat(c),args:0})):t(d[f])||!r(Number(d[f].val))||this._isValEqual(d[f-1],b)?this._isValEqual(e[0],b)?d.push({val:b,args:0}):e.unshift({val:b,args:0}):(c=this._lookAhead(b,a,!0),a+=c.length-1,d[f].val+=parseFloat(c)),a},a.prototype.__handleLeftBrace=function(a){this.__operatorStack.unshift({val:a,args:0}),this.__objArgCount.push(0),this.__lastColonChar.push(a),this.__lastCommaChar.push(a)},a.prototype.__handleRightBrace=function(){var a=this.__operatorStack,b=a[0],c=this.__objArgCount.pop();return t(b)?this._throwError("Improper object literal"):(this._popStackForVal(b,"{","Improper object literal"),a.shift(),this.__lastColonChar.pop(),this.__lastCommaChar.pop(),void this.__outputQueue.push({val:"{}",args:c}))},a.prototype.__handleLeftBracket=function(a){var b=this.__previousChar,c=this.__operatorStack;this._isValEqual(c[0],".")&&this.__outputQueue.push(c.shift()),c.unshift({val:a,args:0}),this.__argCount.push({num:0,isArray:!("]"===b||")"===b||this._isAlphaNumeric(b))}),this.__lastCommaChar.push(a)},a.prototype.__handleRightBracket=function(){var a=this.__operatorStack,b=a[0],c=this.__argCount.pop();return t(b)||t(c)?this._throwError("Brackets mismatch"):(c.isArray||c.num--,this._popStackForVal(b,"[","Brackets mismatch"),a.shift(),this.__lastCommaChar.pop(),void this.__outputQueue.push({val:"[]",args:"["===this.__previousChar?-1:c.num+1}))},a.prototype.__handleLeftParenthesis=function(a){var b=this.__previousChar,c=this.__operatorStack;if(this._isAlphaNumeric(b)||"]"===b||")"===b){var d=this.__outputQueue,e=d[d.length-1];this._isValEqual(e,"[]")?(c.unshift(d.pop()),c.unshift(d.pop())):this._isValEqual(e,"()")||this._isNumeric(e.val)||c.unshift(d.pop()),this.__argCount.push({num:0})}c.unshift({val:a,args:0}),this.__lastCommaChar.push(a)},a.prototype.__handleRightParenthesis=function(){var a=this.__operatorStack,b=a[0],c=this.__argCount.pop();if(t(b))return this._throwError("Parentheses mismatch");if(this._popStackForVal(b,"(","Parentheses mismatch"),a.shift(),this.__lastCommaChar.pop(),!t(c)){var d=c.num;if("("===this.__previousChar)return void(this.__removeFnFromStack(d)&&this.__outputQueue.push({val:"()",args:0}));
this.__removeFnFromStack(d+1)&&this.__outputQueue.push({val:"()",args:d+1})}},a.prototype.__handleComma=function(){var a=this.__lastCommaChar,b=a[a.length-1];if("("===b||"["===b){var c=this.__argCount,d=c.length;if(!(d>0))return this._throwError("Mismatch with "+b);c[d-1].num++}var e=this.__operatorStack[0];return t(e)?this._throwError("Unexpected comma"):void this._popStackForVal(e,b,"Unexpected comma")},a.prototype.__handleStringLiteral=function(a,b){var c=this._lookAheadForDelimiter(b,a),d=this.__operatorStack;return this._isValEqual(d[0],"([")?d.unshift({val:c,args:0}):this.__outputQueue.push({val:c,args:0}),a+c.length+1},a.prototype.__handleQuestion=function(a){this.__lastColonChar.push(a),this.__determinePrecedence(a)},a.prototype.__handleColon=function(a,b){var c=this.__lastColonChar,d=c[c.length-1],e=this.__outputQueue;if("?"===d){var f=this.__operatorStack,g=f[0];if(t(g))return void this._throwError("Ternary mismatch");b--,c.pop(),this._popStackForVal(g,"?","Ternary mismatch"),e.push(f.shift()),f.unshift({val:a,args:-2})}else{if("{"!==d)return void this._throwError("Unexpected colon");var h=this.__objArgCount,i=e.length-1;if(h[h.length-1]++,0>i)return void this._throwError("Unexpected colon");e[i].args=1}return b},a.prototype.__handleOtherOperator=function(a,b){var c=this._lookAheadForOperatorFn(b,a);return this.__determinePrecedence(c),a+c.length-1},a.prototype.__popRemainingOperators=function(){for(var a,b,c=this.__outputQueue,d=this.__operatorStack;d.length>0;){if(a=d.shift(),b=a.val,"("===b||")"===b)return this._throwError("Parentheses mismatch");c.push(a)}},a.prototype.__determineOperator=function(a){switch(a){case"+":case"-":if(0===this.__outputQueue.length||sb(this.__previousChar))return $f["u"+a];default:return $f[a]}},a.prototype.__determinePrecedence=function(a){var b,c,d=this.__determineOperator(a),e=d.precedence,f="ltr"===d.associativity,g=this.__operatorStack,h=this.__outputQueue;if(0===g.length)return void g.unshift({val:a,args:d.fn.length-2});do if(c=g[0].val,"."!==c){if(b=$f[c],t(b)||!(b.precedence<e||f&&b.precedence===e))return void g.unshift({val:a,args:d.fn.length-2});h.push(g.shift())}else h.push(g.shift());while(g.length>0);g.unshift({val:a,args:d.fn.length-2})},a.prototype.__removeFnFromStack=function(a){for(var b,c=this.__outputQueue,d=this.__operatorStack,e=d[0],f=this._isValEqual,g=this._isValUnequal,h=!1;!t(e)&&g(e,"([")&&(this._isStringValidVariable(e.val)||f(e.val,".[]")||rb(e.val));)b=d.shift(),-1!==b.args||f(b,".[]")||(b.args=-2),c.push(b),e=d[0],h=!0;return h||g(c[c.length-a-1],"()")||(h=!0),h},a}();a.Tokenizer=f,a.ITokenizer=c,Cb.injectable(Ub,c);var g=function(){function a(){this.$Tokenizer=ib(Ub),this._tokens=[],this.__cache={},this.__codeArray=[],this.__identifiers=[],this.__tempIdentifiers=[],this.__aliases={}}return a.prototype.parse=function(a){var b=this.__cache[a];if(!t(b))return b;this._tokens=this.$Tokenizer.createTokens(a),b=this._evaluate(a);var c=b.identifiers;if(0===c.length){var d=b.evaluate(null);b.evaluate=function(){return d}}return this.__cache[a]=b,b},a.prototype.clearCache=function(a){return m(a)?void L(this.__cache,a):void(this.__cache={})},a.prototype._evaluate=function(a){for(var b,c,d,e=this._tokens,f=e.length,g=this.__tempIdentifiers,h=this.__codeArray,i=!1,j=0;f>j;j++)if(b=e[j],c=b.val,d=b.args,rb(c))switch(c){case"()":i=this.__handleFunction(j,d,i);break;case"{}":h.push(this.__convertObject(d)),g.push(".");break;default:0>d?(h.push("[]"),g.push(".")):d>0?(h.push(this.__convertArrayLiteral(d)),g.push(".")):i=this.__indexIntoObject(j,c,i)}else if(sb(c))if(0===d)h.push(this.__convertPrimitive(j,c,d));else switch(c){case"?":this.__handleQuestion();break;case":":this.__handleColon();break;case"+":case"-":1===d&&(c="u"+c);default:this.__handleOperator(c,d)}else h.push(0>d?this.__convertFunction(j,c,i):this.__convertPrimitive(j,c,d));this._popRemainingIdentifiers(),this._makeIdentifiersUnique();var k={evaluate:new Function(_e,df,"var initialContext;return "+(0===h.length?'"'+a+'"':h.join(""))+";"),expression:a,identifiers:this.__identifiers.slice(0),aliases:Object.keys(this.__aliases)};return this._resetParser(),k},a.prototype.__convertPrimitive=function(a,b,c){if(c>0)return this.__tempIdentifiers.push("."),b;var d=r(Number(b)),e=this._peek(a),f=!(t(e)||e.args>=1),g=this._isValEqual;return tb(b)||m(b)&&(d||this._isValUnequal(e,"[]()")||g(e,"[]")&&!f)?(this.__tempIdentifiers.push("."),'"'+b+'"'):(this.__tempIdentifiers.push(!d||g(e,".[]")&&f?b:"."),b)},a.prototype.__convertFunction=function(a,b,c){if("@"===b[0])this.__aliases[b.slice(1)]=!0;else if(tb(b))return this.__tempIdentifiers.push("."),b;var d=this._peek(a),e=this._isValEqual;if(this.__tempIdentifiers.push(e(this._tokens[a-1],"()")&&e(d,".[]")?".":b),t(d))return"(initialContext = ("+this.__findInitialContext.toString()+')(context,aliases,"'+b+'"))';switch(d.val){case".":case"()":return b;default:if(!c)return"(initialContext = ("+this.__findInitialContext.toString()+')(context,aliases,"'+b+'"))'}},a.prototype.__convertObject=function(a){for(var b,c,d,e=this.__identifiers,f=this.__tempIdentifiers,g=this.__codeArray,h=0,i="{";h++<a;)d=g.pop(),b=g.pop(),i+=',"'+b+'":'+d,f.length>1&&(c=f.pop(),f.pop(),"."!==c&&e.push(c));return i.replace(",","")+"}"},a.prototype.__convertArrayLiteral=function(a){for(var b,c=this.__identifiers,d=this.__tempIdentifiers,e=this.__codeArray,f=0,g="";f++<a;)g=e.pop()+","+g,d.length>0&&(b=d.pop(),"."!==b&&c.push(b));return"["+g.slice(0,-1)+"]"},a.prototype.__handleFunction=function(a,b,c){var d,e,f=this.__identifiers,g=this.__tempIdentifiers,h=this.__codeArray,i=0,j=this._lookBack(a),k=!t(j)&&(-2===j.args||this._isValEqual(j,".[]")),l="",m="",n="",o=!1;for(k&&(m=h.pop(),n=g.pop());i++<b;)l=h.pop()+","+l,g.length>0&&(d=g.pop(),"."!==d&&(f.push(d),o=!0));if(e=b>0?".call(initialContext || context,"+l.slice(0,l.length-1)+")":".call(initialContext || context)",c)if(c=!1,h.length>0){var q=h.pop(),r=g.length-1;0>r||"."===g[r]||""===n?""!==n&&o&&"["!==q[0]&&"]"!==q[q.length-1]&&(f[f.length-1]+="."+n):(g[r]+="."+n,f.push(g.pop())),e=p(m)?q+e:"(("+this.__indexIntoContext.toString()+")("+q+',"'+m+'") || (function () {}))'+e}else this._throwError("Improper expression or context");else k?(e="(initialContext = (("+this.__findInitialContext.toString()+')(context,aliases,"'+m+'") || (function () {}))'+e+")",f.push(m)):e=h.pop()+e;h.push(e);var s=g.length;return this._isValEqual(this._peek(a),"[]")&&s>0&&"."!==g[s-1]&&f.push(g.pop()),c},a.prototype.__indexIntoObject=function(a,b,c){var d=this._isValEqual;if(d(this._peek(a),"()"))return!0;var e,f=this.__codeArray,g=f.pop(),h=this.__identifiers,i=this.__tempIdentifiers,j=this._lookBack(a),k=i.pop(),l=!t(k);return l&&"@"===k[0]?(g="("+this.__indexIntoContext.toString()+")("+f.pop()+","+g+")",h.push(k),i.length>0&&h.push(i.pop())):d(j,"++--()[]*/%?:>=<=&&||!===")?(g="("+this.__indexIntoContext.toString()+")("+f.pop()+","+g+")",i.push(".")):"[]"!==b||t(j)||j.args>=0?(g="("+this.__indexIntoContext.toString()+")("+f.pop()+',"'+g+'")',e=i.length-1,e>=0?"."!==i[e]&&(i[e]+="."+k):l&&"."!==k&&"."!==b&&h.push(k)):(g="("+this.__indexIntoContext.toString()+")("+f.pop()+","+g+")",e=i.length-1,e>=0&&"."!==i[e]&&h.push(i.pop()),h.push(k)),f.push(g),c},a.prototype.__handleQuestion=function(){for(var a,b=this.__identifiers,c=this.__tempIdentifiers,d=this.__codeArray,e=d.pop(),f=0;2>f&&c.length>0;f++)a=c.pop(),"."!==a&&b.push(a);d.push(d.pop()+"?"+e)},a.prototype.__handleColon=function(){for(var a,b=this.__identifiers,c=this.__tempIdentifiers,d=this.__codeArray,e=d.pop(),f=0;2>f&&c.length>0;f++)a=c.pop(),"."!==a&&b.push(a);d.push(d.pop()+":"+e)},a.prototype.__handleOperator=function(a,b){for(var c,d=this.__identifiers,e=this.__tempIdentifiers,f=this.__codeArray,g=0,h="";g++<b;)h="function (context, aliases) { return "+f.pop()+"; },"+h,e.length>0&&(c=e.pop(),"."!==c&&d.push(c));f.push("("+$f[a].fn.toString()+")(context, aliases,"+h.slice(0,h.length-1)+")")},a.prototype.__findInitialContext=function(a,b,c){return"@"===c[0]&&null!==b&&"object"==typeof b?b[c.slice(1)]:null!==a&&"object"==typeof a?a[c]:void 0},a.prototype.__indexIntoContext=function(a,b){return null!==a&&"object"==typeof a?a[b]:void 0},a.prototype._peek=function(a){return this._tokens[a+1]},a.prototype._lookBack=function(a){return this._tokens[a-1]},a.prototype._popRemainingIdentifiers=function(){for(var a,b=this.__identifiers,c=this.__tempIdentifiers;c.length>0;)a=c.pop(),"."!==a&&b.push(a)},a.prototype._makeIdentifiersUnique=function(){for(var a,b=this.__identifiers,c=[],d={};b.length>0;)a=b.pop(),d[a]||(d[a]=!0,c.push(a));this.__identifiers=c},a.prototype._isValEqual=function(a,b){return t(a)||t(a.val)?t(b):""===a.val?""===b:-1!==b.indexOf(a.val)},a.prototype._isValUnequal=function(a,b){return t(a)||t(a.val)?!t(b):""===a.val?""!==b:-1===b.indexOf(a.val)},a.prototype._resetParser=function(){this._tokens=[],this.__codeArray=[],this.__identifiers=[],this.__tempIdentifiers=[],this.__aliases={}},a.prototype._throwError=function(a){var b=ib(Rb);b.fatal(a,b.PARSE)},a}();a.Parser=g,a.IParser=d,Cb.injectable(Sb,d)}(Vf=a.expressions||(a.expressions={}));var Wf;!function(a){function b(a){return a.location}function c(){return new f}function d(){return f.config}function e(){return new g}a.Location=b,Cb.injectable(Gc,b,[sc]);var f=function(){function a(){this.$EventManagerStatic=ib(Pb),this.$Compat=ib(Jb),this.$Regex=ib(Tb),this.$window=ib(sc),this.$location=ib(Gc),this.$history=ib(Fc),this.$Dom=ib(gc),this.__lastUrl=this.$location.href,this.__initializing=!1;var a=ib(Wb);a.defineGetter(this,"uid",J(Hc)),this.$EventManagerStatic.on(this.uid,Ld,this.initialize,this)}return a.prototype.initialize=function(){var b=a.config,c=this.$Compat;if(this.$EventManagerStatic.dispose(this.uid),b.routingType!==b.NONE){this.__initializing=!0,ib(rc);var d=this.url(),e=d,f=this._urlChanged.bind(this),g=this.$Dom,h=this.$window;e!==d&&this.url(e,!0),c.pushState&&g.addEventListener(h,Ue,f,!1),g.addEventListener(h,Ve,f,!1),this.__initializing=!1}},a.prototype.url=function(a,b){var c=this.$location;return m(a)&&this.__lastUrl!==a&&this._setUrl(a,b),this.__currentUrl||c.href},a.prototype.urlUtils=function(b){b=b||this.url();var c=ib(rc),d=a.config;return d.routingType===d.HASH&&(b=b.replace(new RegExp("#"+(d.hashPrefix||"")+"/?"),"")),c.initialize(b),c},a.prototype.isCrossDomain=function(a){if(!m(a))return!1;var b=this.urlUtils(a),c=this.urlUtils();return b.protocol!==c.protocol||b.hostname!==c.hostname||b.port!==c.port},a.prototype._urlChanged=function(){if(!this.__initializing){this.__currentUrl=null;var b=this.url(),c=a.config;if(!(this.__lastUrl===b||c.routingType===c.STATE&&b.indexOf(this.__lastUrl+"#")>-1)){this.__lastUrl=b;var d=this.$EventManagerStatic;d.dispatch(Md,this,d.DIRECT,[this.urlUtils()])}}},a.prototype._setUrl=function(b,c){b=this.formatUrl(b);var d=this.urlUtils(b),e=a.config.baseUrl,f=this.$history,g=this.$location;return-1===d.href.indexOf(e)?void(g.href=b):(this.$Regex.fullUrlRegex.test(b)||"/"===b[0]||(b=e+b),void(this.$Compat.pushState?(c?f.replaceState(null,"",b):f.pushState(null,"",b),this.__initializing||this._urlChanged()):(this.__currentUrl=b,c?g.replace(b):g.href=b)))},a.prototype.formatUrl=function(b){var c=a.config;if((!this.$Regex.fullUrlRegex.test(b)||b.indexOf(c.baseUrl)>-1)&&c.routingType===c.HASH){var d=-1!==b.indexOf(this.urlUtils().protocol),e=c.hashPrefix||"",f=new RegExp("#"+e+"|#/");"/"===b[0]&&(b=b.slice(1)),"/"!==b[b.length-1]&&(b+="/"),d&&!f.test(b)?b=b+"#"+e+"/":f.test(b)||(b="#"+e+("/"!==b[0]?"/":"")+b),-1===b.indexOf(c.baseUrl)&&(b=c.baseUrl+b)}return b},a.config={NONE:"none",HASH:"hash",STATE:"state",routingType:"hash",hashPrefix:"",baseUrl:""},a}();a.Browser=f,a.IBrowser=c,Cb.injectable(nc,c),a.IBrowserConfig=d,Cb.injectable(oc,d);var g=function(){function a(){this.$ContextManagerStatic=ib(Wb),this.$Document=ib(Mb),this.$Window=ib(sc),this.$Compat=ib(Jb),this.$Regex=ib(Tb),this.$BrowserConfig=ib(oc);var b=this.$BrowserConfig;if(p(b.baseUrl)||!this.$Regex.fullUrlRegex.test(b.baseUrl)){var c=this.$Window.location.href,d=c.replace(this.$Regex.initialUrlRegex,"/"),e=b.baseUrl;for(m(e)?0===e.indexOf("/")&&(e=e.slice(1)):e="",e=a.__getBaseUrl(d)+e;"/"===e[e.length-1];)e=e.slice(0,-1);b.baseUrl=e+"/"}}return a.__getQuery=function(a){return N(a)},a.__getBaseUrl=function(){{var a=ib(Tb),b=window.location.origin,c=window.location.protocol;window.location.host}return"file:"===c||c.indexOf("wmapp")>-1?b=window.location.href:u(b)&&(b=window.location.protocol+"//"+window.location.host),b=b.replace(a.initialUrlRegex,""),b.split("?")[0].split("#")[0]+"/"},a.prototype.initialize=function(b){b=b||"";var c=a.__urlUtilsElement||(a.__urlUtilsElement=this.$Document.createElement("a")),d=this.$ContextManagerStatic.defineGetter,e=this.$BrowserConfig;"/"===b[0]&&0!==b.indexOf("//")&&(b=b.slice(1)),this.$Regex.fullUrlRegex.test(b)||(b=e.baseUrl+b),c.setAttribute("href",b),b=c.href,c.setAttribute("href",b),b=c.href;c.protocol?c.protocol.replace(/:$/,""):"";d(this,"href",b,!0,!0),d(this,"protocol",c.protocol?c.protocol.replace(/:$/,""):"",!0,!0),d(this,"host",c.host,!0,!0),d(this,"search",c.search?c.search.replace(/^\?/,""):"",!0,!0),d(this,"hash",c.hash?c.hash.replace(/^#/,""):"",!0,!0),d(this,"hostname",c.hostname,!0,!0),d(this,"port",c.port,!0,!0);var f;f=p(e.baseUrl)?"/"===c.pathname.charAt(0)?c.pathname:"/"+c.pathname:b.replace(e.baseUrl,"/"),d(this,"pathname",f.split("?")[0].split("#")[0],!0,!0),d(this,"query",a.__getQuery(this.search),!0,!0)},a.prototype.toString=function(){return this.href},a}();a.UrlUtils=g,a.IUrlUtilsInstance=e,Cb.injectable(rc,e,null,Le)}(Wf=a.web||(a.web={}));var Xf;!function(a){function d(){return function(){A.nextTick(h)}}function e(){var a=new y(h),b=ib(Mb),c=ib(sc),d=b.createElement("div");return a.observe(d,{attributes:!0}),c.addEventListener("unload",function(){a.disconnect(),a=null},!1),function(){d.setAttribute("drainQueue","drainQueue")}}function f(){var a=a,b="undefined"!=typeof a?a:this;return function(){b.setTimeout(h,1)}}function h(){for(var a,b,c,d=0;d<z.length;d++)a=z[d],b=a[0],c=a[1],b(c);z=[]}function i(a){return!t(a.Promise)&&s(a.Promise.all)&&s(a.Promise.race)&&s(a.Promise.resolve)&&s(a.Promise.reject)?a.Promise:n}function j(){return new E}function k(){return E.config}var n=function(){function a(b){var c;s(b)||(c=ib(Rb),c.fatal(new TypeError("You must pass a resolver function as the first argument to the promise constructor"),c.PROMISE)),this instanceof a||(c=ib(Rb),c.fatal(new TypeError('Failed to construct "Promise": Please use the "new" operator, this object constructor cannot be called as a function.'),c.PROMISE)),this.__subscribers=[],a.__invokeResolveFunction(b,this)}return a.all=function(b){return v(b)?new a(function(a,c){function d(a){return function(b){return e(a,b)}}function e(b,c){g[b]=c,0===--h&&a(g)}var f,g=[],h=b.length;0===h&&a([]);for(var i=0;i<b.length;i++)f=b[i],o(f)?f.then(d(i),c):e(i,f)}):a.all([b])},a.race=function(b){return v(b)?new a(function(a,c){for(var d,e=0;e<b.length;e++)d=b[e],d&&"function"==typeof d.then?d.then(a,c):a(d)}):a.race([b])},a.resolve=function(b){return new a(function(a){a(b)})},a.reject=function(b){return new a(function(a,c){c(b)})},a.__invokeResolveFunction=function(b,c){function d(b){a.__resolve(c,b)}function e(b){a.__reject(c,b)}try{b(d,e)}catch(f){e(f)}},a.__invokeCallback=function(b,c,d,e){var f,g,h,i,j=s(d);if(j)try{f=d(e),h=!0}catch(k){i=!0,g=k}else f=e,h=!0;a.__handleThenable(c,f)||(j&&h?a.__resolve(c,f):i?a.__reject(c,g):1===b?a.__resolve(c,f):2===b&&a.__reject(c,f))},a.__publish=function(b,c){for(var d,e,f=b.__subscribers,g=b.__detail,h=0;h<f.length;h+=3)d=f[h],e=f[h+c],a.__invokeCallback(c,d,e,g);b.__subscribers=null},a.__publishFulfillment=function(b){a.__publish(b,b.__state=1)},a.__publishRejection=function(b){a.__publish(b,b.__state=2)},a.__reject=function(b,c){b.__state===q.PENDING&&(b.__state=0,b.__detail=c,a.config.async(a.__publishRejection,b))},a.__fulfill=function(b,c){b.__state===q.PENDING&&(b.__state=0,b.__detail=c,a.config.async(a.__publishFulfillment,b))},a.__resolve=function(b,c){b===c?a.__fulfill(b,c):a.__handleThenable(b,c)||a.__fulfill(b,c)},a.__handleThenable=function(b,c){var d;try{if(b===c){var e=ib(Rb);e.fatal(new TypeError("A promises callback cannot return the same promise."),e.PROMISE)}if(o(c))return c.then.call(c,function(e){return d?!0:(d=!0,void(c!==e?a.__resolve(b,e):a.__fulfill(b,e)))},function(c){return d?!0:(d=!0,void a.__reject(b,c))}),!0}catch(f){return d?!0:(a.__reject(b,f),!0)}return!1},a.__subscribe=function(a,b,c,d){var e=a.__subscribers,f=e.length;e[f]=b,e[f+1]=c,e[f+2]=d},a.prototype.then=function(b,c){var d=this,e=new this.constructor(function(){},this);if(this.__state){var f=arguments;a.config.async(function(){a.__invokeCallback(d.__state,e,f[d.__state-1],d.__detail)})}else a.__subscribe(this,e,b,c);return e},a.prototype.catch=function(a){return this.then(null,a)},a.prototype.toString=function(){return"[object Promise]"},a.config={async:function(a,b){var c=z.push([a,b]);1===c&&w()}},a}();a.Promise=n;var q;!function(a){a[a.PENDING=void 0]="PENDING",a[a.SEALED=0]="SEALED",a[a.FULFILLED=1]="FULFILLED",a[a.REJECTED=2]="REJECTED"}(q||(q={}));var w,x="undefined"!=typeof window?window:{},y=x.MutationObserver||x.WebKitMutationObserver,z=[],A=A;w="undefined"!=typeof A&&"[object process]"==={}.toString.call(A)?d():y?e():f(),a.IPromise=i,Cb.injectable(Ib,i,[sc],Ne);var B=function(){function a(a){this.$Browser=ib(nc),this.$Window=ib(sc),this.$Document=ib(Mb),this.$config=ib(Hb),this.__fileSupported=ib(Jb).fileSupported,this.__options=c({},this.$config,a)}return a.prototype.execute=function(){var a=this.__options,b=a.url;if(!m(b)||p(b.trim()))return this._invalidOptions();a.url=this.$Browser.urlUtils(b).toString();var c=a.isCrossDomain||!1,d=!1;return c?d=!0:(this.xhr=new XMLHttpRequest,u(this.xhr.withCredentials)&&(d=this.$Browser.isCrossDomain(b))),d?(this.xhr=null,this.jsonpCallback=a.jsonpCallback||J(Xe),this.executeJsonp()):this._sendXhrRequest()},a.prototype.executeJsonp=function(){var a=this,c=this.__options,d=c.url;if(!m(d)||p(d.trim()))return this._invalidOptions();c.url=this.$Browser.urlUtils(d).toString(),t(this.jsonpCallback)&&(this.jsonpCallback=c.jsonpCallback||J("plat_callback"));var e=new D(function(e,f){var g=a.$Window,h=a.$Document,i=h.createElement("script"),j=a.jsonpCallback,k=c.jsonpIdentifier||"callback";i.src=d+(d.indexOf("?")>-1?"&":"?")+k+"="+j;var l=g[j];g[j]=function(b){s(a.clearTimeout)&&a.clearTimeout(),h.head.removeChild(i),u(l)?L(g,j):g[j]=l,e({response:b,status:200})},h.head.appendChild(i);var m=c.timeout;r(m)&&m>0&&(a.clearTimeout=H(function(){a.clearTimeout=I(function(){f(new C({response:"Request timed out in "+m+"ms for "+d,status:408})),g[j]=b},m-1)}))});return e.initialize(this),e},a.prototype._xhrOnReadyStateChange=function(){var a=this.xhr;if(4===a.readyState){var b=a.status;if(0===b){var c=a.response;if(t(c))try{c=a.responseText}catch(d){}return p(c)?!1:!0}return b>=200&&300>b||304===b?!0:!1}},a.prototype._sendXhrRequest=function(){var a=this,b=this.xhr,c=this.__options,d=c.method,e=c.url,f=new D(function(f,h){if(b.onreadystatechange=function(){var b=a._xhrOnReadyStateChange();if(!t(b)){var d=a._formatResponse(c.responseType,b);b?f(d):h(new C(d)),a.xhr=c=null}},!m(d)){var i=ib(Rb);i.warn('AjaxOptions method was not of type string. Defaulting to "GET".',i.AJAX),d="GET"}b.open(d.toUpperCase(),e,!0,c.user,c.password);var j=c.responseType;a.__fileSupported||""===j||"text"===j||(j=""),b.responseType=j,b.withCredentials=c.withCredentials;var k=c.overrideMimeType,l=c.data;if(m(k)&&!p(k)&&b.overrideMimeType(k),t(l)||""===l)a.__setHeaders(),b.send();else{var n=c.transforms||[],o=n.length,q=c.contentType,s=m(q)&&!p(q);if(o>0){for(var u=0;o>u;++u)l=n[u](l,b);s&&b.setRequestHeader("Content-Type",q),a.__setHeaders(),b.send(l)}else if(g(l))if(s){var v=q.toLowerCase();-1!==v.indexOf("x-www-form-urlencoded")?(l=a.__serializeFormData(),b.setRequestHeader("Content-Type",q),a.__setHeaders(),b.send(l)):-1!==v.indexOf("multipart/form-data")?a.__fileSupported?(l=a.__appendFormData(),a.__setHeaders(),b.send(l)):a.__submitFramedFormData().then(function(a){f(a)},function(){a.xhr=null}):(l=JSON.stringify(l),b.setRequestHeader("Content-Type",q),a.__setHeaders(),b.send(l))}else a.__setHeaders(),b.send(l);else s&&b.setRequestHeader("Content-Type",q),a.__setHeaders(),b.send(l)}var w=c.timeout;r(w)&&w>0&&(a.clearTimeout=H(function(){a.clearTimeout=I(function(){h(new C({response:"Request timed out in "+w+"ms for "+c.url,status:b.status,getAllResponseHeaders:function(){return b.getAllResponseHeaders()},xhr:b})),b.onreadystatechange=null,b.abort(),a.xhr=null},w-1)}))});return f.initialize(this),f},a.prototype._invalidOptions=function(){return new D(function(a,b){var c=ib(Rb);c.warn("Attempting a request without specifying a url",c.AJAX),b(new C({response:"Attempting a request without specifying a url",status:null,getAllResponseHeaders:null,xhr:null}))})},a.prototype._formatResponse=function(a,b){var c=this.xhr,d=c.status,e=c.response;if(t(e))try{e=c.responseText}catch(f){}if(0===d&&(d=b?200:404),c.onreadystatechange=null,s(this.clearTimeout)&&this.clearTimeout(),"json"===a&&m(e))try{e=JSON.parse(e)}catch(f){}return{response:e,status:d,getAllResponseHeaders:function(){return c.getAllResponseHeaders()},xhr:c}},a.prototype.__setHeaders=function(){var a,b,c=this.__options.headers,d=Object.keys(c||{}),e=this.xhr,f=d.length;for(b=0;f>b;++b)a=d[b],e.setRequestHeader(a,c[a])},a.prototype.__serializeFormData=function(){for(var a,b,c=this.__options.data,d=Object.keys(c),e=[];d.length>0;){if(a=d.pop(),b=c[a],t(b))b="";else if(g(b)){var f=ib(Rb);f.warn('Invalid form entry with key "'+a+'" and value "'+b,f.AJAX),b=JSON.stringify(b)}e.push(encodeURIComponent(a)+"="+encodeURIComponent(b))}return e.join("&").replace(/%20/g,"+")},a.prototype.__appendFormData=function(){for(var a,b,c=this.__options.data,d=new FormData,e=Object.keys(c);e.length>0;)if(a=e.pop(),b=c[a],t(b))d.append(a,"");else if(g(b))if(l(b))d.append(a,b,b.name||b.fileName||"blob");else{var f=ib(Rb);f.warn('Invalid form entry with key "'+a+'" and value "'+b,f.AJAX),d.append(a,JSON.stringify(b))}else d.append(a,b);return d},a.prototype.__submitFramedFormData=function(){var a,b=this,c=this.__options,d=c.data,e=c.url,f=this.$Document,g=f.body,h=ib(Ib),i=f.createElement("form"),j=f.createElement("iframe"),k=J("iframe_target"),l=Object.keys(d);for(j.name=i.target=k,j.src="javascript:false;",i.enctype=i.encoding="multipart/form-data",i.action=e,i.method="POST",i.style.display="none";l.length>0;)a=l.pop(),i.insertBefore(this.__createInput(a,d[a]),null);return new h(function(a,c){b.xhr.abort=function(){j.onload=null,g.removeChild(i),g.removeChild(j),c()},j.onload=function(){var c=j.contentDocument.body.innerHTML;g.removeChild(i),g.removeChild(j),a({response:c,status:200,getAllResponseHeaders:function(){return""}}),b.xhr=j.onload=null},g.insertBefore(i,null),g.insertBefore(j,null),i.submit()})},a.prototype.__createInput=function(a,b){var c,d=this.$Document,e=d.createElement("input");if(e.type="hidden",e.name=a,t(b))e.value="";else if(g(b))if(!s(b.slice)||u(b.name)||u(b.path))c=ib(Rb),c.warn('Invalid form entry with key "'+a+'" and value "'+b,c.AJAX),e.value=JSON.stringify(b);else{var f=d.querySelectorAll('input[type="file"][name="'+a+'"]'),h=f.length;if(0===h)c=ib(Rb),c.warn('Could not find input[type="file"] with [name="'+a+'"]. Stringifying data instead.',c.AJAX),e.value=JSON.stringify(b);else if(1===h){e=f[0];var i=e.cloneNode(!0);e.parentNode.insertBefore(i,e)}else{for(var j,k=b.path;h-->0;)if(j=f[h],j.value===k){e=j;var l=e.cloneNode(!0);e.parentNode.insertBefore(l,e);break}-1===h&&(c=ib(Rb),c.warn('Could not find input[type="file"] with [name="'+a+'"] and [value="'+b.path+'"]. Stringifying data instead.',c.AJAX),e.value=JSON.stringify(b))}}else e.value=b;return e},a}();a.HttpRequest=B;var C=function(){function a(a){this.name="AjaxError",Error.apply(this),this.response=this.message=a.response,this.status=a.status,this.getAllResponseHeaders=a.getAllResponseHeaders,this.xhr=a.xhr}return a.prototype.toString=function(){var a=this.response,b=a;return g(a)&&!a.hasOwnProperty("toString")&&(b=JSON.stringify(a)),"Request failed with status: "+this.status+" and response: "+b},a}();C.prototype=Error.prototype;var D=function(a){function c(b,c){a.call(this,b),this.$Window=ib(sc),t(c)||(this.__http=c.__http)}return __extends(c,a),c.prototype.initialize=function(a){g(a)&&t(this.__http)&&(this.__http=a)},c.prototype.cancel=function(){var a=this.__http,c=a.xhr,d=a.jsonpCallback;s(a.clearTimeout)&&a.clearTimeout(),t(c)?t(d)||(this.$Window[d]=b):(c.onreadystatechange=null,c.abort(),a.xhr=null),this.__subscribers=[]},c.prototype.then=function(b,c){return a.prototype.then.call(this,b,c)},c.prototype.catch=function(b){return a.prototype.catch.call(this,b)},c}(n);a.AjaxPromise=D;var E=function(){function a(){this.responseType={DEFAULT:"",ARRAYBUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"},this.contentType={ENCODED_FORM:"application/x-www-form-urlencoded;charset=utf-8",JSON:"application/json;charset=utf-8",MULTIPART_FORM:"multipart/form-data",OCTET_STREAM:"application/octet-stream;charset=utf-8",XML:"application/xml;charset=utf-8",PLAIN_TEXT:"text/plain",HTML:"text/html"}}return a.prototype.ajax=function(a){return new B(a).execute()},a.prototype.jsonp=function(a){return new B(a).executeJsonp()},a.prototype.json=function(a){return new B(c({},a,{responseType:"json"})).execute()},a.config={url:null,method:"GET",responseType:"",transforms:[],headers:{},withCredentials:!1,timeout:null,jsonpIdentifier:"callback",contentType:"application/json;charset=utf-8"},a}();a.Http=E,a.IHttp=j,Cb.injectable(Gb,j),a.IHttpConfig=k,Cb.injectable(Hb,k)}(Xf=a.async||(a.async={}));var Yf;!function(a){function b(){return i}function c(){return l}function d(){return new m}function e(){return new o}function f(){return new p}var g={},h={},i=function(){function a(a,b){this.__id=a,this.__options=b,this.__size=0,t(b)&&(this.__options={timeout:0}),h[a]={}}return a.create=function(b,c){var d=g[b];return t(d)&&(d=g[b]=new a(b,c)),d},a.fetch=function(a){return g[a]},a.clear=function(){for(var a=Object.keys(g),b=a.length,c=0;b>c;++c)g[a[c]].clear();g={}},a.prototype.info=function(){return{id:this.__id,size:this.__size,options:this.__options}},a.prototype.put=function(a,b){var c=h[this.__id][a];h[this.__id][a]=b,u(c)&&this.__size++;var d=this.__options.timeout;return r(d)&&d>0&&I(this.remove,d,[a],this),b},a.prototype.read=function(a){return h[this.__id][a]},a.prototype.remove=function(a){L(h[this.__id],a),this.__size--},a.prototype.clear=function(){h[this.__id]={},this.__size=0},a.prototype.dispose=function(){this.clear(),L(g,this.__id)},a}();a.Cache=i,a.ICacheFactory=b,Cb.injectable(ac,b,null,Me);var l=i.create("__managerCache");a.IManagerCache=c,Cb.injectable(bc,c);var m=function(a){function b(){a.call(this,"__templateCache"),this.$Promise=ib(Ib)}return __extends(b,a),b.prototype.put=function(b,c){var d=this.$Promise;if(a.prototype.put.call(this,b,d.resolve(c)),k(c))c=c.cloneNode(!0);else if(j(c)){var e=document.createDocumentFragment();e.appendChild(c.cloneNode(!0)),c=e}return d.resolve(c)},b.prototype.read=function(b){var c=this,d=a.prototype.read.call(this,b);return t(d)?this.$Promise.reject(null):d.then(function(a){return c.put(b,a)},function(){var a=ib(Rb);return a.warn("Error retrieving template from promise.",a.TEMPLATE),null})},b}(i);a.TemplateCache=m,a.ITemplateCache=d,Cb.injectable(cc,d);var n=function(){function a(a){var b=this;this._storage=a,A(function(a,c){b[c]=a},a)}return Object.defineProperty(a.prototype,"length",{get:function(){return this._storage.length},enumerable:!0,configurable:!0}),a.prototype.clear=function(){this._storage.clear()},a.prototype.getItem=function(a){return this._storage.getItem(a)},a.prototype.key=function(a){return this._storage.key(a)},a.prototype.removeItem=function(a){this._storage.removeItem(a)},a.prototype.setItem=function(a,b){this._storage.setItem(a,b),this[a]=this.getItem(a)},a}();a.BaseStorage=n;var o=function(a){function b(){a.call(this,plat.acquire(sc).localStorage)}return __extends(b,a),b}(n);a.LocalStorage=o,a.ILocalStorage=e,Cb.injectable(tc,e);var p=function(a){function b(){a.call(this,plat.acquire(sc).sessionStorage)}return __extends(b,a),b}(n);a.SessionStorage=p,a.ISessionStorage=f,Cb.injectable(uc,f)}(Yf=a.storage||(a.storage={}));var Zf,$f={"u+":{precedence:4,associativity:"rtl",fn:function(a,b,c){return+c(a,b)}},"+":{precedence:6,associativity:"ltr",fn:function(a,b,c,d){return c(a,b)+d(a,b)}},"u-":{precedence:4,associativity:"rtl",fn:function(a,b,c){return-c(a,b)}},"-":{precedence:6,associativity:"ltr",fn:function(a,b,c,d){return c(a,b)-d(a,b)}},"*":{precedence:5,associativity:"ltr",fn:function(a,b,c,d){return c(a,b)*d(a,b)}},"/":{precedence:5,associativity:"ltr",fn:function(a,b,c,d){return c(a,b)/d(a,b)}},"%":{precedence:5,associativity:"ltr",fn:function(a,b,c,d){return c(a,b)%d(a,b)}},"?":{precedence:15,associativity:"rtl",fn:function(){return void 0}},":":{precedence:15,associativity:"rtl",fn:function(){return void 0}},">":{precedence:8,associativity:"ltr",fn:function(a,b,c,d){return c(a,b)>d(a,b)}},"<":{precedence:8,associativity:"ltr",fn:function(a,b,c,d){return c(a,b)<d(a,b)}},"!":{precedence:4,associativity:"rtl",fn:function(a,b,c){return!c(a,b)}},"~":{precedence:4,associativity:"rtl",fn:function(a,b,c){return~c(a,b)}},"&":{precedence:10,associativity:"ltr",fn:function(a,b,c,d){return c(a,b)&d(a,b)}},"|":{precedence:12,associativity:"ltr",fn:function(a,b,c,d){return c(a,b)|d(a,b)}},">>":{precedence:7,associativity:"ltr",fn:function(a,b,c,d){return c(a,b)>>d(a,b)}},"<<":{precedence:7,associativity:"ltr",fn:function(a,b,c,d){return c(a,b)<<d(a,b)}},">>>":{precedence:7,associativity:"ltr",fn:function(a,b,c,d){return c(a,b)>>>d(a,b)}},"&&":{precedence:13,associativity:"ltr",fn:function(a,b,c,d){return c(a,b)&&d(a,b)}},"||":{precedence:14,associativity:"ltr",fn:function(a,b,c,d){return c(a,b)||d(a,b)}},"==":{precedence:9,associativity:"ltr",fn:function(a,b,c,d){return c(a,b)==d(a,b)}},"===":{precedence:9,associativity:"ltr",fn:function(a,b,c,d){return c(a,b)===d(a,b)}},"!=":{precedence:9,associativity:"ltr",fn:function(a,b,c,d){return c(a,b)!=d(a,b)}},"!==":{precedence:9,associativity:"ltr",fn:function(a,b,c,d){return c(a,b)!==d(a,b)}},">=":{precedence:8,associativity:"ltr",fn:function(a,b,c,d){return c(a,b)>=d(a,b)}},"<=":{precedence:8,associativity:"ltr",fn:function(a,b,c,d){return c(a,b)<=d(a,b)}},"=":{precedence:17,associativity:"rtl",fn:function(){var a=plat.acquire(Rb);a.fatal("Assignment operators are not supported",a.PARSE)}},"++":{precedence:3,associativity:"",fn:function(){var a=plat.acquire(Rb);a.fatal("Assignment operators are not supported",a.PARSE)}},"--":{precedence:3,associativity:"",fn:function(){var a=plat.acquire(Rb);a.fatal("Assignment operators are not supported",a.PARSE)}},"+=":{precedence:17,associativity:"rtl",fn:function(){var a=plat.acquire(Rb);a.fatal("Assignment operators are not supported",a.PARSE)}},"-=":{precedence:17,associativity:"rtl",fn:function(){var a=plat.acquire(Rb);a.fatal("Assignment operators are not supported",a.PARSE)}},"*=":{precedence:17,associativity:"rtl",fn:function(){var a=plat.acquire(Rb);a.fatal("Assignment operators are not supported",a.PARSE)}},"/=":{precedence:17,associativity:"rtl",fn:function(){var a=plat.acquire(Rb);a.fatal("Assignment operators are not supported",a.PARSE)}},"%=":{precedence:17,associativity:"rtl",fn:function(){var a=plat.acquire(Rb);a.fatal("Assignment operators are not supported",a.PARSE)}}},_f={"()":{precedence:2,associativity:null,fn:null},"[]":{precedence:2,associativity:null,fn:null},".":{precedence:2,associativity:null,fn:null},"{}":{precedence:1,associativity:null,fn:null}},ag={"{":{precedence:1,associativity:null,fn:null},"}":{precedence:1,associativity:null,fn:null},"[":{precedence:2,associativity:null,fn:null},"]":{precedence:2,associativity:null,fn:null},"(":{precedence:2,associativity:null,fn:null},")":{precedence:2,associativity:null,fn:null},".":{precedence:2,associativity:null,fn:null},",":{precedence:18,associativity:null,fn:null},"'":{precedence:0,associativity:null,fn:null},'"':{precedence:0,associativity:null,fn:null}},bg={"false":!1,"true":!0,"null":null,undefined:"undefined"};
!function(a){function c(){return f}var d=["push","pop","reverse","shift","sort","splice","unshift"],f=function(){function a(){this.$Compat=ib(Jb),this.__identifiers={},this.__identifierHash={},this.__lengthListeners={},this.__contextObjects={},this.__isArrayFunction=!1}return a.getManager=function(b){var c,d=a.__managers,e=b.uid,f=d[e];return t(f)?(c=d[e]=new a,c.context=b,c):c=f},a.dispose=function(b,c){if(!t(b)){var d=b.uid,f=a.__controls,g=f[d]||{},h=a.__managers,i=h[d];t(i)||(i.dispose(),L(h,d));for(var j,k=Object.keys(g);k.length>0;)for(j=g[k.shift()];j.length>0;)j.shift()();L(f,d),t(b.context)||a.defineProperty(b,_e,c===!0?e(b.context,!0):null,!0,!0,!0)}},a.removeArrayListeners=function(b,c){var d=a.postArrayListeners[b];t(d)||L(d,c)},a.getContext=function(a,b){if(t(a))return a;for(b=b.slice(0);b.length>0;)if(a=a[b.shift()],t(a))return a;return a},a.defineProperty=function(a,b,c,d,e,f){Object.defineProperty(a,b,{value:c,enumerable:d===!0,configurable:e===!0,writable:f===!0})},a.defineGetter=function(a,b,c,d,e){Object.defineProperty(a,b,{get:function(){return c},enumerable:d===!0,configurable:e===!0})},a.pushRemoveListener=function(b,c,d){var e,f=a.__controls,g=f[c];t(g)&&(g=f[c]={}),e=g[b],t(e)&&(e=g[b]=[]),e.push(d)},a.spliceRemoveListener=function(b,c,d){var e,f=a.__controls,g=f[c];if(!t(g)&&(e=g[b],!t(e))){var h=e.indexOf(d);-1!==h&&(e.splice(h,1),0===e.length&&L(g,b))}},a.removeIdentifier=function(b,c){for(var d,e=b.length,f=a.__controls,g=0;e>g;++g)d=f[b[g]],t(d)||L(d,c)},a.createContext=function(a,b){var c=a.context;if(!g(c)){if(!t(c)){var d=ib(Rb);return void d.warn("A child control is trying to create a child context that has a parent control with a primitive type context",d.BIND)}c=a.context={}}for(var e,f,h=b.split(".");h.length>0;)e=h.shift(),f=c[e],t(f)&&(f=c[e]=r(Number(h[0]))?[]:{}),c=f;return c},a.prototype.getContext=function(a){var b=a.join("."),c=this.__contextObjects[b];return t(c)&&(c=this.__contextObjects[b]=this._observeImmediateContext(a,b)),c},a.prototype.observe=function(c,d){var e=this;if(p(c))return b;var f,h,i=c.split("."),j=i.pop(),k=this._hasIdentifier(c),l=!t(d);if(i.length>0?(f=i.join("."),h=this.__contextObjects[f],t(h)&&(h=this.__contextObjects[f]=this._observeImmediateContext(i,f))):(f=j,h=this.context),!g(h))return l?("length"===j&&(this.__lengthListeners[c]=d,a.pushRemoveListener(c,d.uid,function(){L(e.__lengthListeners,c)})),this._addObservableListener(c,d)):b;this.__observedIdentifier=null,this.__contextObjects[c]=h[j];var n=this.__observedIdentifier,o=!t(n),q=b;if(o&&(k=!0),l){var r=b,s=this._addObservableListener(c,d);o&&c!==n&&(r=this._addObservableListener(n,d)),q=function(){s(),r()}}if(!k)if("length"===j&&v(h)){var u=i.pop(),w=this.getContext(i);this.__observedIdentifier=null,M(w,u),m(this.__observedIdentifier)&&(f=this.__observedIdentifier);var x=q,y=b,z=b;if(l){var A=d.uid;y=this.observeArray(A,null,b,f,h,null),z=this.observe(f,{uid:A,listener:function(a,c){y(),y=e.observeArray(A,null,b,f,a,c)}})}q=function(){x(),z(),y()}}else this._define(c,h,j);return q},a.prototype.observeArray=function(c,e,f,g,h,i){{var j=(d.length,this.$Compat);j.proto,j.setProto}if(v(i)&&this._restoreArray(i),t(h))return b;var k=g.split("."),l=k.pop(),n=this.getContext(k);this.__observedIdentifier=null,M(n,l),m(this.__observedIdentifier)&&(g=this.__observedIdentifier);var o=[];return s(e)&&o.push(this._pushArrayListener(c,g,e,a.preArrayListeners)),s(f)&&o.push(this._pushArrayListener(c,g,f,a.postArrayListeners)),this._overwriteArray(g,h),function(){for(;o.length>0;)o.pop()()}},a.prototype.dispose=function(){this.context=null,this.__identifiers={},this.__identifierHash={},this.__contextObjects={}},a.prototype._pushArrayListener=function(b,c,d,e){var f=e[c];t(f)&&(f=e[c]={});var g=f[b];t(g)&&(g=f[b]=[]);var h=!1,i=function(){if(!h){h=!0,a.spliceRemoveListener(c,b,i);var j=g.indexOf(d);-1!==j&&(g.splice(j,1),0===g.length&&(L(f,b),p(f)&&L(e,c)))}};return g.push(d),a.pushRemoveListener(c,b,i),i},a.prototype._restoreArray=function(a){var b=this.$Compat;if(b.setProto)Object.setPrototypeOf(a,Object.create(Array.prototype));else if(b.proto)a.__proto__=Object.create(Array.prototype);else for(var c,e=d.length,f=0;e>f;++f)c=d[f],a[c]=Array.prototype[c]},a.prototype._overwriteArray=function(b,c){var e,f,g=this.$Compat,h=d.length;if(g.proto){var i=Object.create(Array.prototype);for(f=0;h>f;++f)e=d[f],i[e]=this._overwriteArrayFunction(b,e);return void(g.setProto?Object.setPrototypeOf(c,i):c.__proto__=i)}for(f=0;h>f;++f)e=d[f],a.defineProperty(c,e,this._overwriteArrayFunction(b,e),!1,!0,!0)},a.prototype._getImmediateContext=function(a){for(var b=this.context;a.length>0&&(b=b[a.shift()],!t(b)););return b},a.prototype._observeImmediateContext=function(a,b){return t(this.__identifiers[b])&&this.observe(b,null),this._getImmediateContext(a)},a.prototype._getValues=function(a,b,c){for(var d,e=!0,f=!0;a.length>1;)if(d=a.shift(),e&&(b=b[d],t(b)&&(e=!1)),f&&(c=c[d],t(c)&&(f=!1)),!e&&!f)return null;d=a[0];var g,h;return t(b)||(g=b[d]),t(c)||(h=c[d]),{newValue:g,oldValue:h}},a.prototype._notifyChildProperties=function(a,c,d){var e=this,f=this.__identifierHash[a];if(!t(f)){var h,i,j,k,l,n,o,q,r,s,u=f.length,w={},x=a.length+1;if(0===u)return void L(this.__identifierHash,a);for(var y=0;u>y;++y){if(h=f[y],i=h.slice(x),k=i.split("."),n=k.pop(),j=k.join("."),p(j)){if(o=c,q=d,r=t(o)?void 0:o[n],s=t(q)?void 0:q[n],"length"===n&&!v(q)&&v(o)){var z=this.__lengthListeners[h];if(!t(z)){var A,B=z.uid,C=a.split("."),D=C.pop(),E=this.getContext(C);this.__observedIdentifier=null,M(E,D),A=m(this.__observedIdentifier)?this.__observedIdentifier:C.join(".");var F=this.observeArray(B,null,b,A,o,null);this.observe(A,{uid:B,listener:function(a,c){F(),F=e.observeArray(B,null,b,A,a,c)}}),L(this.__lengthListeners,h)}}}else{if(l=w[j],t(l)&&(l=w[j]=this._getValues(k,c,d),t(l))){this._execute(h,null,null);continue}o=l.newValue,q=l.oldValue,r=t(o)?void 0:o[n],s=t(q)?void 0:q[n]}w[i]={newValue:r,oldValue:s},g(o)&&(!v(o)||o.length>n)&&this._define(h,o,n),this._execute(h,r,s)}w=null}},a.prototype._addObservableListener=function(b,c){var d,e=this,f=b.split("."),h=f.pop(),i="length"===h;i&&(h=f.pop(),d=this.getContext(f)),g(d)&&(this.__observedIdentifier=null,M(d,h),m(this.__observedIdentifier)&&(b=this.__observedIdentifier+(i?".length":""))),this.__add(b,c);var j=c.uid,k=function(){a.spliceRemoveListener(b,j,k),e._removeCallback(b,c)};return a.pushRemoveListener(b,j,k),k},a.prototype._define=function(a,b,c){g(b[c])?this.__defineObject(a,b,c):this.__definePrimitive(a,b,c)},a.prototype._overwriteArrayFunction=function(b,c){var d=a.preArrayListeners[b]||{},e=a.postArrayListeners[b]||{},f=this;return function(){for(var a=[],g=0;g<arguments.length;g++)a[g-0]=arguments[g];var h,i,j,k,l,m=this.slice(0),n=-1!==c.indexOf("shift"),o=Object.keys(d),p=o.length;for(k=0;p>k;++k)for(i=d[o[k]],j=i.length,l=0;j>l;++l)i[l]({method:c,arguments:a});for(n?(f.__isArrayFunction=!0,h=Array.prototype[c].apply(this,a),f.__isArrayFunction=!1):h=Array.prototype[c].apply(this,a),o=Object.keys(e),p=o.length,k=0;p>k;++k)for(i=e[o[k]],j=i.length,l=0;j>l;++l)i[l]({method:c,returnValue:h,oldArray:m,newArray:this,arguments:a});return n?f._notifyChildProperties(b,this,m):m.length!==this.length&&f._execute(b+".length",this.length,m.length),h}},a.prototype._removeCallback=function(a,b){var c=this.__identifiers[a];if(!t(c)){var d=c.indexOf(b);-1!==d&&(c.splice(d,1),p(this.__identifiers[a])&&(L(this.__identifierHash,a),L(this.__contextObjects,a)))}},a.prototype._hasIdentifier=function(a){return!p(this.__identifiers[a])},a.prototype._execute=function(a,b,c){var d=this.__identifiers[a];if(u(b)?L(this.__contextObjects,a):this.__contextObjects[a]=b,!t(d))for(var e=d.length,f=e,g=0;e>g;)d[g].listener(b,c),f=d.length,g+=f-e+1,e=f},a.prototype.__defineObject=function(b,c,d){var e=this,f=c[d];Object.defineProperty(c,d,{configurable:!0,enumerable:!0,get:function(){return e.__observedIdentifier=b,f},set:function(h){if(f!==h){var i=f;if(f=h,!e.__isArrayFunction){var j=(e.__identifierHash[b]||[]).length>0;e._execute(b,f,i),j&&e._notifyChildProperties(b,f,i),!j&&p(e.__identifiers[b])?a.defineProperty(c,d,f,!0,!0,!0):g(f)||e.__definePrimitive(b,c,d)}}}})},a.prototype.__definePrimitive=function(b,c,d){var e=this,f=c[d],h=!t(f);v(c)&&"length"===d||Object.defineProperty(c,d,{configurable:!0,enumerable:!0,get:function(){return e.__observedIdentifier=b,f},set:function(i){if(f!==i){var j=f;if(f=i,!e.__isArrayFunction||!v(c)){var k=(e.__identifierHash[b]||[]).length>0;e._execute(b,i,j),!k&&p(e.__identifiers[b])?a.defineProperty(c,d,f,!0,!0,!0):g(f)?(e.__defineObject(b,c,d),k&&e._notifyChildProperties(b,i,j)):h||(e.__definePrimitive(b,c,d),h=!0)}}}})},a.prototype.__add=function(a,b){var c=this.__identifiers[a];t(c)&&(c=this.__identifiers[a]=[]),c.push(b),this.__addHashValues(a)},a.prototype.__addHashValues=function(a){var b=a.split("."),c=b.shift(),d=this.__identifierHash[c];if(!t(d)||(d=this.__identifierHash[c]=[],0!==b.length))for(c!==a&&-1===d.indexOf(a)&&d.push(a);b.length>0;)c+="."+b.shift(),d=this.__identifierHash[c],t(d)?(d=this.__identifierHash[c]=[],c!==a&&d.push(a)):c!==a&&-1===d.indexOf(a)&&d.push(a)},a.preArrayListeners={},a.postArrayListeners={},a.__managers={},a.__controls={},a}();a.ContextManager=f,a.IContextManagerStatic=c,Cb.injectable(Wb,c,null,Je)}(Zf=a.observable||(a.observable={}));var cg;!function(a){function b(){return new f}function c(){return g}function d(a,b,c,d){return h.$Compat=a,h.$Document=b,h.$Window=c,h.$Dom=d,h}function e(a){return i.$EventManagerStatic=a,i}var f=function(){function a(){this.$EventManagerStatic=ib(Pb),this.$ContextManagerStatic=ib(Wb),this.defaultPrevented=!1,this.stopped=!1}return a.prototype.initialize=function(a,b,c){this.name=a,this.direction=c||this.$EventManagerStatic.UP,this.sender=b},a.prototype.preventDefault=function(){this.defaultPrevented||this.$ContextManagerStatic.defineGetter(this,"defaultPrevented",!0)},a.prototype.stopPropagation=function(){this.direction===this.$EventManagerStatic.UP&&(this.stopped=!0,this.$EventManagerStatic.propagatingEvents[this.name]=!1)},a}();a.DispatchEvent=f,a.IDispatchEventInstance=b,Cb.injectable(Nb,b,null,Le);var g=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.dispatch=function(a,c){var d=new b;d.initialize(a,c),h.sendEvent(d)},b.prototype.initialize=function(b,c){a.prototype.initialize.call(this,b,c,this.$EventManagerStatic.DIRECT)},b}(f);a.LifecycleEvent=g,a.ILifecycleEventStatic=c,Cb.injectable(Qb,c,null,Je);var h=function(){function a(){}return a.initialize=function(){if(!a.__initialized){a.__initialized=!0;for(var b,c=a.__lifecycleEventListeners,d=c.length,e=a.$Compat,f=a.$Document,h=a.$Dom,i=g.dispatch;c.length>0;)b=c.pop(),f.removeEventListener(b.name,b.value,!1);if(e.cordova){var j,k=[Gd,Hd,Id];d=k.length;for(var l=0;l<k.length;++l)j=k[l],c.push({name:j,value:function(b){return function(){i(b,a)}}(j)}),h.addEventListener(f,j,c[l].value,!1);c.push({name:Nd,value:function(){i(Fd,a)}}),h.addEventListener(f,Nd,c[c.length-1].value,!1),c.push({name:Od,value:function(){i(Ed,a)}}),h.addEventListener(f,Od,c[c.length-1].value,!1),c.push({name:Pd,value:function(){i(Pd,a)}}),h.addEventListener(f,Pd,c[c.length-1].value,!1)}else{if(e.amd)return;h.addEventListener(a.$Window,"load",function(){i(Ed,a)})}}},a.dispose=function(b){L(a.__eventsListeners,b)},a.on=function(b,c,d,e){var f=a.__eventsListeners[b];t(f)&&(f=a.__eventsListeners[b]={listeners:{},context:e});var g=f.listeners[c];return v(g)||(g=f.listeners[c]=[]),g.push(d),function(){var a=g.indexOf(d);-1!==a&&g.splice(a,1)}},a.dispatch=function(b,c,d,e){var f=ib(Nb);f.initialize(b,c,d),a.sendEvent(f,e)},a.hasDirection=function(b){return b===a.UP||b===a.DOWN||b===a.DIRECT},a.sendEvent=function(b,c){var d=b.name,e=b.direction;switch(c=c||[],a.propagatingEvents[d]=!0,c=c||[],e){case a.UP:a._dispatchUp(b,c);break;case a.DOWN:a._dispatchDown(b,c);break;case a.DIRECT:a._dispatchDirect(b,c)}L(a.propagatingEvents,d)},a._dispatchUp=function(b,c){for(var d=b.name,e=b.sender;!t(e)&&a.propagatingEvents[d];)t(e.uid)||(a.__executeEvent(e.uid,b,c),e=e.parent)},a._dispatchDown=function(b,c){var d,e=[],f=b.name;for(e.push(b.sender);e.length&&a.propagatingEvents[f];)d=e.pop(),t(d.uid)||(a.__executeEvent(d.uid,b,c),t(d.controls)||(e=e.concat(d.controls)))},a._dispatchDirect=function(b,c){for(var d,e=Object.keys(a.__eventsListeners),f=e.length,g=b.name,h=0;f>h&&a.propagatingEvents[g];++h)d=a.__eventsListeners[e[h]],t(d)||t(d.listeners[g])||a.__callListeners(d.context,b,d.listeners[g],c)},a.__executeEvent=function(b,c,d){var e=a.__eventsListeners[b];if(!t(e)){var f=e.context,g=e.listeners[c.name];t(g)||a.__callListeners(f,c,g,d)}},a.__callListeners=function(b,c,d,e){var f=c.name,g=d.length,h=-1;for(e=[c].concat(e);++h<g&&a.propagatingEvents[f];)try{d[h].apply(b,e)}catch(i){var j=ib(Rb);j.warn(i,j.EVENT)}},a.UP="up",a.DOWN="down",a.DIRECT="direct",a.propagatingEvents={},a.__eventsListeners={},a.__lifecycleEventListeners=[],a.__initialized=!1,a}();a.EventManager=h,a.IEventManagerStatic=d,Cb.injectable(Pb,d,[Jb,Mb,sc,gc],Je);var i=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.dispatch=function(a,c,d){var e=new b;e.initialize(a,c,null,d),b.$EventManagerStatic.sendEvent(e)},b.prototype.initialize=function(b,c,d,e){a.prototype.initialize.call(this,b,c,this.$EventManagerStatic.DIRECT),this.error=e},b}(f);a.ErrorEvent=i,a.IErrorEventStatic=e,Cb.injectable(Ob,e,[Pb],Je)}(cg=a.events||(a.events={}));var dg=function(){function a(){this.priority=0,this.dom=ib(gc);var b=a.$ContextManagerStatic||ib(Wb);b.defineGetter(this,"uid",J(Hc))}return a.getRootControl=function(a){if(t(a))return a;if(!t(a.root))return a.root;for(;!t(a.parent)&&!a.hasOwnContext;){if(!t(a.root))return a.root;a=a.parent}return a},a.load=function(b){if(!t(b)){var c=b;if(m(c.absoluteContextPath)&&s(c.contextChanged)){var d=a.$ContextManagerStatic.getManager(c.root);d.observe(c.absoluteContextPath,{uid:b.uid,listener:function(a,c){fg.TemplateControl.contextChanged(b,a,c)}}),s(c.zCC__plat)&&(c.zCC__plat(),L(c,"zCC__plat"))}return a.$Promise.resolve(s(b.loaded)?b.loaded():null)}},a.dispose=function(b){var c=b;if(!t(c)){if(!u(c.templateControl))return void eg.dispose(c);if(c.hasOwnContext)return void fg.ViewControl.dispose(c);if(c.controls)return void fg.TemplateControl.dispose(c);s(b.dispose)&&b.dispose(),a.removeEventListeners(b),a.$ContextManagerStatic.dispose(b),b.element=null,a.removeParent(b)}},a.removeParent=function(a){if(!t(a)){var b=a.parent;if(!t(b)){var c=b.controls||[],d=c.indexOf(a);-1!==d&&c.splice(d,1),a.parent=null}}},a.removeEventListeners=function(b){if(!t(b)){var c=a.__eventListeners,d=b.uid,e=c[d];if(v(e)){for(var f=e.length;f-->0;)e[f]();L(c,d)}}},a.getInstance=function(){return new a},a.__addRemoveListener=function(b,c){var d=a.__eventListeners;return v(d[b])?void d[b].push(c):void(d[b]=[c])},a.__spliceRemoveListener=function(b,c){var d=a.__eventListeners,e=d[b];if(v(e)){var f=e.indexOf(c);if(-1===f)return;e.splice(f,1)}},a.__getControls=function(b,c,d){var e,f=[],g=a.getRootControl(b);t(g)||g[c]!==d||f.push(g);var h=g.controls;if(t(h))return f;for(var i=[].concat(h);i.length>0;)e=i.shift(),e[c]===d&&f.push(e),t(e.controls)||(i=i.concat(e.controls));return f},a.prototype.initialize=function(){},a.prototype.loaded=function(){},a.prototype.getControlsByName=function(b){return a.__getControls(this,"name",b)},a.prototype.getControlsByType=function(b){return m(b)?a.__getControls(this,"type",b):a.__getControls(this,"constructor",b)},a.prototype.addEventListener=function(c,d,e,f){if(!s(e)){var g=ib(Rb);return g.warn('"Control.addEventListener" must take a function as the third argument.',g.EVENT),b}e=e.bind(this);var h=this.dom.addEventListener(c,d,e,f),i=this.uid;return a.__addRemoveListener(i,h),function(){h(),a.__spliceRemoveListener(i,h)}},a.prototype.observe=function(c,d,e){if(t(c)||!c.hasOwnProperty(d))return b;var f=s(this.getAbsoluteIdentifier)?this:this.parent;if(t(f)||!s(f.getAbsoluteIdentifier))return b;var g=f.getAbsoluteIdentifier(c);if(t(g))return b;var h=a.$ContextManagerStatic||ib(Wb),i=h.getManager(a.getRootControl(this));return i.observe(g+"."+d,{listener:e.bind(this),uid:this.uid})},a.prototype.observeArray=function(c,d,e,f){if(t(c)||!c.hasOwnProperty(d))return b;var g=c[d];if(!v(g))return b;var h=s(this.getAbsoluteIdentifier)?this:this.parent;if(t(h)||!s(h.getAbsoluteIdentifier))return b;var i=s(e),j=s(f);if(!i&&!j)return b;var k=h.getAbsoluteIdentifier(c),l=a.$ContextManagerStatic||ib(Wb);if(t(k)){if(d!==_e)return b;k=h.absoluteContextPath}else k+="."+d;var m=l.getManager(a.getRootControl(this)),n=i?e.bind(this):null,o=j?f.bind(this):null,p=this.uid,q=m.observeArray(p,n,o,k,g,null),r=m.observe(k,{listener:function(a,b){q(),q=m.observeArray(p,n,o,k,a,b)},uid:p});return function(){q(),r()}},a.prototype.observeExpression=function(c,d){if(p(c))return b;if(m(c))c=a.$Parser.parse(c);else if(!s(c.evaluate))return b;var e=t(this.resources)?this.parent:this;if(t(e)||!m(e.absoluteContextPath))return b;d=d.bind(this);var f,g,h,i=c.aliases,j=i.length,k={},l=a.$ContextManagerStatic||ib(Wb),n=l.getManager,o=fg.TemplateControl,q=o.findResource,r=o.evaluateExpression;for(h=0;j>h;++h)f=i[h],g=q(e,f),t(g)||g.resource.type!==ef||(k[f]=n(g.control));var u,v,w=c.identifiers,x=n(a.getRootControl(e)),y=[],z=e.absoluteContextPath+".",A={};for(j=w.length,h=0;j>h;++h){if(u=w[h],y=u.split("."),v=y[0],"this"===v)u=u.slice(5);else if("@"===u[0]){f=v.slice(1),u=u.replace(v,"resources."+f+".value"),t(k[f])||(A[u]=k[f]);continue}A[z+u]=x}w=Object.keys(A),j=w.length;var B=r(c,e),C=[],D=this.uid;for(h=0;j>h;++h)u=w[h],C.push(A[u].observe(u,{uid:D,listener:function(){var a=r(c,e);d(a,B),B=a}}));return function(){for(var a=C.length,b=0;a>b;++b)C[b]()}},a.prototype.evaluateExpression=function(a,b){return fg.TemplateControl.evaluateExpression(a,this.parent,b)},a.prototype.findProperty=function(b){for(var c,d=this,e=a.$Parser.parse(b);!t(d);){if(c=e.evaluate(d),!t(c))return{control:d,value:c};d=d.parent}},a.prototype.dispatchEvent=function(b,c){for(var d=[],e=2;e<arguments.length;e++)d[e-2]=arguments[e];var f=a.$EventManagerStatic||ib(Pb);f.hasDirection(c)||(u(c)||d.unshift(c),c=f.UP);var g=this;t(g.templateControl)||(g=g.templateControl),f.dispatch(b,g,c,d)},a.prototype.on=function(b,c){var d=a.$EventManagerStatic||ib(Pb);return d.on(this.uid,b,c,this)},a.prototype.dispose=function(){},a.__eventListeners={},a}();a.Control=dg,a.IControlFactory=ub,Cb.injectable(Kb,ub,[Sb,Wb,Pb,Ib],Me);var eg=function(a){function b(){a.apply(this,arguments),this.templateControl=null}return __extends(b,a),b.dispose=function(a){L(a,"templateControl"),dg.dispose(a)},b.getInstance=function(){return new b},b}(dg);a.AttributeControl=eg,a.IAttributeControlFactory=vb,Cb.injectable(Lb,vb,null,Me);var fg;!function(a){function d(a,b,c,d,e,f,g){return z.$ResourcesFactory=a,z.$BindableTemplatesFactory=b,z.$ManagerCache=c,z.$TemplateCache=d,z.$Parser=e,z.$Http=f,z.$Promise=g,z}function f(){return new C}function h(){return D}function l(){return new E}function n(a,b){return F.$ContextManagerStatic=a,F.$Regex=b,F}function q(){return new G}function x(){return G.config}function y(){return new M}var z=function(a){function b(){a.apply(this,arguments),this.priority=100,this.context=null,this.absoluteContextPath=null,this.hasOwnContext=!1,this.replaceWith="any"}return __extends(b,a),b.evaluateExpression=function(a,c,d){if(p(a))return a;if(m(a))a=b.$Parser.parse(a);else if(!s(a.evaluate))return a;return t(c)?a.evaluate(null,d):(a.aliases.length>0&&(d=b.getResources(c,a.aliases,d)),a.evaluate(c.context,d))},b.getResources=function(a,c,d){if(t(a))return{};var e,f,g,h=c.length,i=b.__resourceCache[a.uid];t(i)&&(i=b.__resourceCache[a.uid]={}),d=d||{};for(var j=0;h>j;++j)if(e=c[j],"@"===e[0]&&(e=e.slice(1)),t(d[e])){if(t(i[e]))g=b.findResource(a,e);else{var k=i[e].control,l=k.resources;g=t(l)?b.findResource(a,e):{control:k,resource:l[e]}}if(t(g)){var m=ib(Rb);m.warn("Attempting to use a resource that is not defined.",m.CONTEXT)}else i[e]=g,f=g.resource,d[e]=t(f)?f:f.value}return d},b.findResource=function(a,b){var c;if(t(a)||t(a.resources)||!m(b)||p(b))return null;if("@"===b[0]&&(b=b.slice(1)),b===lf)return a=dg.getRootControl(a),{resource:a.resources[b],control:a};if(b===nf||b===mf)return{resource:(a.resources||{})[b],control:a};for(;!t(a);){if(c=(a.resources||{})[b],!t(c))return{resource:c,control:a};a=a.parent}},b.dispose=function(a){if(!t(a)){var c=a.uid,d=a.controls,e=d&&d.slice(0),f=dg.$ContextManagerStatic,g=f.defineProperty;if(!t(e))for(var h=e.length-1,i=h;i>=0;--i)dg.dispose(e[i]);s(a.dispose)&&a.dispose(),dg.removeEventListeners(a),b.removeElement(a),b.$ResourcesFactory.dispose(a),b.$BindableTemplatesFactory.dispose(a),L(b.__resourceCache,a.uid),f.dispose(a),cg.EventManager.dispose(a.uid),b.$ManagerCache.remove(c),dg.removeParent(a),g(a,_e,null,!0,!0,!0),g(a,bf,null,!0,!0,!0),a.attributes=null,a.bindableTemplates=null,a.controls=[],a.root=null,a.innerTemplate=null}},b.loadControl=function(a){for(var c,d=a.controls,e=d.length,f=0;e>f;++f)c=d[f],t(c.controls)?c.loaded():b.loadControl(c);a.loaded()},b.contextChanged=function(a,c,d){a.context=c,b.setContextResources(a),s(a.contextChanged)&&a.contextChanged(c,d)},b.setContextResources=function(a){var c=a.context;return t(a.resources)&&(a.resources=b.$ResourcesFactory.getInstance(),a.resources.initialize(a)),a.hasOwnContext&&(t(a.resources.rootContext)?a.resources.add({root:{type:ef,value:c}}):a.resources.rootContext.value=c),t(a.resources.context)?void a.resources.add({context:{type:ef,value:c}}):void(a.resources.context.value=c)},b.removeElement=function(a){if(!t(a)){var b,c=a.dom,d=a.element;return null===a.replaceWith||""===a.replaceWith||k(d)?(c.removeAll(a.startNode,a.endNode),void(a.elementNodes=a.startNode=a.endNode=null)):void(t(d)||(b=d.parentNode,t(b)||b.removeChild(d),a.element=null))}},b.setAbsoluteContextPath=function(a,b){dg.$ContextManagerStatic.defineGetter(a,"absoluteContextPath",b,!1,!0)},b.determineTemplate=function(a,c){var d=b.$TemplateCache,e=a.dom,f=b.$Promise;if(t(c)){if(t(a.templateUrl)){if(t(a.templateString))return f.reject(null);var g=a.type;return d.read(g).catch(function(b){return t(b)&&(b=e.serializeHtml(a.templateString)),d.put(g,b)})}c=a.templateUrl}else;return e.getTemplate(c)},b.detach=function(a){if(!t(a)&&!t(a.controls)){for(var c=a.controls.slice(0),d=c.length,e=0;d>e;++e)dg.dispose(c[e]);dg.removeEventListeners(a),b.removeElement(a),b.$ResourcesFactory.dispose(a,!0),L(b.__resourceCache,a.uid),dg.$ContextManagerStatic.dispose(a,!0),cg.EventManager.dispose(a.uid),b.$ManagerCache.remove(a.uid),dg.removeParent(a),a.controls=[],a.attributes=null}},b.getInstance=function(){return new b},b.prototype.contextChanged=function(){},b.prototype.setTemplate=function(){},b.prototype.getIdentifier=function(a){var b,c,d,e,f=[],h=this.context,i=!1,j={context:h,identifier:""};for(h===a?i=!0:f.push(j);f.length>0;)if(j=f.pop(),g(j.context)){c=Object.keys(j.context),b=c.length;for(var k=0;b>k;++k){if(d=c[k],e=j.context[d],e===a)return""!==j.identifier?j.identifier+"."+d:d;f.push({context:e,identifier:""!==j.identifier?j.identifier+"."+d:d})}}return i?j.identifier:void 0},b.prototype.getAbsoluteIdentifier=function(a){if(a===this.context)return this.absoluteContextPath;var b=this.getIdentifier(a);return t(b)?b:this.absoluteContextPath+"."+b},b.prototype.getResources=function(a,c){return b.getResources(this,a,c)},b.prototype.findResource=function(a){return b.findResource(this,a)},b.prototype.evaluateExpression=function(a,c){return b.evaluateExpression(a,this,c)},b.__resourceCache={},b}(dg);a.TemplateControl=z,a.ITemplateControlFactory=d,Cb.injectable(lc,d,[kc,fc,bc,cc,Sb,Gb,Ib],Me);var A=function(a){function b(){a.apply(this,arguments),this._listeners=[]}return __extends(b,a),b.prototype.observeProperty=function(a){var b=this._listeners;return b.push(a),function(){var c=b.indexOf(a);-1!==c&&b.splice(c,1)}},b.prototype.setProperty=function(){},b.prototype.propertyChanged=function(a,b){if(a!==b)for(var c=this._listeners,d=c.length,e=0;d>e;++e)c[e](a,b)},b.prototype.dispose=function(){this._listeners=[]},b}(z);a.BindablePropertyControl=A;var B=function(a){function b(){a.call(this),this.hasOwnContext=!0}return __extends(b,a),b.dispose=function(a){z.dispose(a)},b.getInstance=function(){return new b},b.prototype.canNavigateFrom=function(){},b.prototype.canNavigateTo=function(){},b.prototype.navigatingFrom=function(){},b.prototype.navigatedTo=function(){},b}(z);a.ViewControl=B;var C=function(){function a(){this.$DomEvents=ib(hc)}return a.prototype.addEventListener=function(a,b,c,d){return this.$DomEvents.addEventListener(a,b,c,d)},a.prototype.appendChildren=function(a,b){return Q(a,b)},a.prototype.clearNode=function(a){return R(a)},a.prototype.clearNodeBlock=function(a,b){return S(a,b)},a.prototype.setInnerHtml=function(a,b){return V(a,b)},a.prototype.insertBefore=function(a,b,c){return W(a,b,c)},a.prototype.replace=function(a){return X(a)},a.prototype.replaceWith=function(a,b){return Y(a,b)},a.prototype.serializeHtml=function(a){return Z(a)},a.prototype.removeBetween=function(a,b){return $(a,b)},a.prototype.removeAll=function(a,b){return _(a,b)},a.prototype.addClass=function(a,b){return cb(a,b)},a.prototype.removeClass=function(a,b){return db(a,b)},a.prototype.toggleClass=function(a,b){return eb(a,b)},a.prototype.replaceClass=function(a,b,c){return fb(a,b,c)},a.prototype.hasClass=function(a,b){return gb(a,b)},a.prototype.getTemplate=function(a){return hb(a)},a}();a.Dom=C,a.IDom=f,Cb.injectable(gc,f);var D=function(){function a(){this.$ResourcesFactory=ib(kc),this.$TemplateControlFactory=ib(lc),this.$Promise=ib(Ib),this.$ManagerCache=ib(bc),this.$Document=ib(Mb),this.$ElementManagerFactory=ib(Zb),this.templates={},this.cache={},this.__compiledControls=[]}return a.create=function(b,c){var d=new a;return d.control=b,t(c)||(d.templates=c.templates,d.cache=c.cache),d},a.dispose=function(a){if(!t(a)){var b=a.bindableTemplates;!t(b)&&s(b.dispose)&&b.dispose()}},a.isBoundControl=function(a){if(t(a))return!1;var b=a.parent;return t(b)?!1:0===a.type.indexOf(b.type+Qe)},a.prototype.bind=function(a,b,c){var d,e=this,f=this.templates[a];return t(f)?(d=ib(Rb),void d.fatal("Cannot bind template, no template stored with key: "+a,d.TEMPLATE)):t(b)||r(b)||m(b)?f.then(function(d){return e._bindTemplate(a,d.cloneNode(!0),b,c)}).then(null,function(a){return H(function(){d=ib(Rb),d.fatal(a,d.BIND)}),null}):(d=ib(Rb),void d.warn("Cannot bind template with relativeIdentifier: "+b+". Identifier must be either a string or number",d.BIND))},a.prototype.add=function(a,b){if(!t(b)){if(k(b))return void this._compile(a,b);var c=this.$Document.createDocumentFragment();if(j(b))c.appendChild(b);else{if(!w(b))return;Q(b,c)}this._compile(a,c)}},a.prototype.dispose=function(){for(var a=this.$TemplateControlFactory.dispose,b=this.__compiledControls,c=b.length,d=0;c>d;++d)a(b[d]);this.__compiledControls=[],this.control=null,this.cache={},this.templates={}},a.prototype._bindTemplate=function(a,c,d,e){var f=this,g=this._createBoundControl(a,c,e),h=this._createNodeMap(g,c,d),i=!1,j=s(g.dispose)?g.dispose.bind(g):b;return g.dispose=function(){i=!0,j(),g.dispose=j},this._bindNodeMap(h,a).then(function(){var a=f.$Document;return i?a.createDocumentFragment():(g.startNode=c.insertBefore(a.createComment(g.type+Se),c.firstChild),g.endNode=c.insertBefore(a.createComment(g.type+Te),null),c)},function(a){return H(function(){var b=ib(Rb);b.fatal(a,b.COMPILE)}),null})},a.prototype._bindNodeMap=function(a,b){var c=this.cache[b],d=a.uiControlNode.control,e=a.element,f=this.$ManagerCache;return this.control.controls.push(d),c.clone(e,f.read(this.control.uid),a),f.read(d.uid).bindAndLoad()},a.prototype._compile=function(a,b){var c=this._createBoundControl(a+Pe,b),d=this._createNodeMap(c,b);this.__compiledControls.push(c),this._compileNodeMap(c,d,a)},a.prototype._compileNodeMap=function(a,b,c){var d=this,e=this.$ElementManagerFactory.getInstance(),f=[];e.isClone=!0,e.initialize(b,null),e.setUiControlTemplate(),this.cache[c]=e,f.push(e.fulfillTemplate()),this.templates[c]=this.$Promise.all(f).then(function(){var c,e,f=b.element,g=b.element.cloneNode(!0);return c=a.startNode=d.$Document.createComment(a.type+Se),e=a.endNode=d.$Document.createComment(a.type+Te),f.insertBefore(c,f.firstChild),f.insertBefore(e,null),g})},a.prototype._createNodeMap=function(a,b,c){return{element:b,attributes:{},nodes:[],childContext:c,uiControlNode:{control:a,nodeName:a.type,expressions:[],injector:null}}},a.prototype._createBoundControl=function(a,b,c){var d=this.$TemplateControlFactory,e=d.getInstance(),f=this.$ResourcesFactory,h=this.control,i=this.cache[a],j=f.getInstance();if(g(i)){var k=i.getUiControl();j.initialize(e,k.resources),j.add(c)}else j.initialize(e,c);return e.resources=j,f.addControlResources(e),e.parent=h,e.controls=[],e.element=b,e.type=h.type+Qe+a,e},a}();a.BindableTemplates=D,a.IBindableTemplatesFactory=h,Cb.injectable(fc,h,null,Me);var E=function(){function a(){this.__listeners={}}return a.prototype.initialize=function(a,b){this.__control=a;for(var c,d=Object.keys(b),e=this.__listeners,f=d.length,g=0;f>g;++g)c=d[g],this[c]=b[c],e[c]=[]},a.prototype.observe=function(a,c){var d=this.__listeners[K(a)];return t(d)?b:(c=c.bind(this.__control),d.push(c),function(){var a=d.indexOf(c);-1!==a&&d.splice(a,1)})},a.prototype._attributeChanged=function(a,b,c){for(var d=this.__listeners[K(a)],e=d.length,f=0;e>f;++f)d[f](b,c)},a}();a.Attributes=E,a.IAttributesInstance=l,Cb.injectable(ec,l,null,Le);var F=function(){function a(){this.__resources={},this.__bound=!1}return a.create=function(c,d){if(t(d))return d;var e;switch(d.type.toLowerCase()){case ff:var f=Mf[d.value];t(f)||(d.value=f.inject());break;case ef:a._observeResource(c,d);break;case gf:e=d.value,m(e)&&(d.value=c.evaluateExpression(e));break;case jf:break;case hf:if(e=d.value,m(e))if(e=c[e],s(e))d.value=e.bind(c);else{var g=ib(Rb);g.warn('Attempted to create a "function" type Resource with a function not found on your control.',g.BIND),d.value=b}}return d},a.addControlResources=function(b){b.resources.add({context:{value:b.context,type:ef},control:{value:b,type:hf}}),b.hasOwnContext&&a.__addRoot(b)},a.bindResources=function(b){var c=b.__resources;if(!t(c)){for(var d,e=b.__controlInstance,f=Object.keys(c),g=a.__controlResources,h=f.length,i=0;h>i;++i)d=f[i],-1===g.indexOf(d)&&(b[d]=c[d]=a.create(e,b[d]));b.__bound=!0}},a.dispose=function(b,c){var d=b.resources;if(!t(d)){for(var f,g,h=Object.keys(d.__resources),i=h.length,j=a.$ContextManagerStatic.defineProperty,k=0;i>k;++k)f=h[k],g=d[f],t(g)||g.type!==ef||j(d,f,c?e(g,!0):null,!0,!0,!0);a._removeListeners(d.__controlInstance)}},a.parseElement=function(b){for(var c,d,e,f,g,h,i=Array.prototype.slice.call(b.children),j=a.$Regex,k=j.whiteSpaceRegex,l=j.quotationRegex,m={},n=a.__resourceTypes;i.length>0;)c=i.pop(),g=c.nodeName.toLowerCase(),-1!==n.indexOf(g)&&(e=c.attributes,d={},f=e.getNamedItem(cf),t(f)||(d.alias=f.value,h=c.textContent.replace(k,"$1"),p(h)||(d.value=g===ff||g===jf?h.replace(l,""):h,d.type=g,m[d.alias]=d)));return m},a.getInstance=function(){return new a},a._observeResource=function(b,c){var d=c.value,e=b.uid,f=a.__observableResourceRemoveListeners[e];if(t(f)&&(f=a.__observableResourceRemoveListeners[e]=[]),m(d)){t(c.initialValue)?c.initialValue=d:d=c.initialValue;var g=b.observeExpression(d,function(a){c.value=a});c.value=b.evaluateExpression(d),f.push(g)}},a._removeListeners=function(b){if(!t(b)){var c=b.uid,d=a.__observableResourceRemoveListeners[c];if(v(d))for(var e=d.length,f=0;e>f;++f)d[f]();L(a.__observableResourceRemoveListeners,c)}},a.__addRoot=function(a){a.resources.add({root:{value:a,type:gf,alias:kf},rootContext:{value:a.context,type:ef,alias:lf}})},a.prototype.initialize=function(b,c){if(this.__controlInstance=b,!t(c)){j(c)?c=a.parseElement(c):g(c.resources)&&(c=c.resources),this.__resources=c;
for(var d,e=Object.keys(c),f=e.length,h=0;f>h;++h)d=e[h],this[d]=c[d]}},a.prototype.add=function(b){if(!t(b)){j(b)&&(b=a.parseElement(b));for(var c,d,e=Object.keys(b),f=e.length,g=this.__controlInstance,h=this.__bound,i=a.create,k=0;f>k;++k)d=e[k],c=b[d],c.alias=d,this[d]=this.__resources[d]=h?i(g,c):c}},a.INJECTABLE=ff,a.OBJECT=gf,a.OBSERVABLE=ef,a.LITERAL=jf,a.FUNCTION=hf,a.__controlResources=[mf,nf,kf,lf],a.__resourceTypes=[ff,gf,ef,hf,jf],a.__observableResourceRemoveListeners={},a}();a.Resources=F,a.IResourcesFactory=n,Cb.injectable(kc,n,[Wb,Tb],Me);var G=function(){function a(){this.$Document=ib(Mb),this.$Compat=ib(Jb),this._inMouse=!1,this._subscribers={},this._gestures={$tap:Yd,$dbltap:Zd,$hold:ce,$release:de,$swipe:ee,$swipeleft:fe,$swiperight:ge,$swipeup:he,$swipedown:ie,$track:je,$trackleft:ke,$trackright:le,$trackup:me,$trackdown:ne,$trackend:oe},this._gestureCount={$tap:0,$dbltap:0,$hold:0,$release:0,$swipe:0,$track:0,$trackend:0},this.__START="start",this.__MOVE="move",this.__END="end",this.__hasMoved=!1,this.__hasSwiped=!1,this.__hasRelease=!1,this.__detectingMove=!1,this.__tapCount=0,this.__touchCount=0,this.__cancelDeferredTap=b,this.__cancelDeferredHold=b,this.__cancelRegex=/cancel/i,this.__pointerEndRegex=/up|cancel/i,this.__reverseMap={},this.__mappedEventListener=this.__handleMappedEvent.bind(this),this.__mappedCount={$touchstart:0,$touchmove:0,$touchend:0,$touchcancel:0},this.__pointerHash={},this.__pointerEvents=[],this.__listeners={start:this._onTouchStart.bind(this),move:this._onTouchMove.bind(this),end:this._onTouchEnd.bind(this)},this.__getTypes()}return a.prototype.addEventListener=function(a,c,d,e){var f=this,g=this.$Compat,h=g.mappedEvents,i=h[c],j=!t(i),k=this.__mappedCount,l=b,m=b,n=this._gestures,o=!1;if(j){var p=k[c];this.__reverseMap[i]=c,this.__registerElement(a,c),k[c]++,l=this.__addMappedEvent(p,i,e),g.hasTouchEvents&&!this.__cancelRegex.test(i)&&(i=i.replace("touch","mouse").replace("start","down").replace("end","up"),this.__reverseMap[i]=c,m=this.__addMappedEvent(p,i,e))}if(a.addEventListener(c,d,e),!u(a["on"+c])||u(n[c])||j)return function(){if(!o){if(j){var b=k[c];r(b)&&(b>0&&(b=--k[c]),0===b&&(l(),m())),f.__unregisterElement(a,c)}o=!0,a.removeEventListener(c,d,e)}};var q=n.$swipe,s=n.$track,v=c;if(-1!==c.indexOf(s)){var w=n.$trackend;v=c===w?w:s}else-1!==c.indexOf(q)&&(v=q);return this._gestureCount[v]++,this.__registerElement(a,c),function(){o||(o=!0,f.__removeEventListener(a,c,d,e))}},a.prototype.dispose=function(){this.__unregisterTypes(),this._gestureCount={$tap:0,$dbltap:0,$hold:0,$release:0,$swipe:0,$track:0,$trackend:0},this.__mappedCount={$touchstart:0,$touchmove:0,$touchend:0,$touchcancel:0},this._isActive=!1,this._subscribers={},this.__pointerEvents=[],this.__pointerHash={},this.__reverseMap={},this.__tapCount=this.__touchCount=0,this.__detectingMove=this.__hasMoved=this.__hasRelease=this.__hasSwiped=!1,this.__lastMoveEvent=this.__lastTouchDown=this.__lastTouchUp=null,this.__swipeOrigin=this.__capturedTarget=this.__focusedElement=null,this.__cancelDeferredHold=this.__cancelDeferredTap=b},a.prototype._onTouchStart=function(c){var d=this;if(this.__touchCount++>0)return!0;if("mousedown"!==c.type)this._inTouch=!0;else{if(this._inTouch===!0)return c.preventDefault(),!1;this.$Compat.hasTouchEvents&&(this._inMouse=!0)}if(c=this.__standardizeEventObject(c),t(c))return!0;this.__capturedTarget=this.__lastMoveEvent=null,this.__hasMoved=!1,this.__lastTouchDown=this.__swipeOrigin={buttons:c.buttons,clientX:c.clientX,clientY:c.clientY,timeStamp:c.timeStamp,target:c.target,identifier:c.identifier};var e=this._gestureCount,f=e.$hold<=0,g=e.$release<=0;if((e.$track>0||e.$trackend>0||e.$swipe>0)&&(this.__registerType(this.__MOVE),this.__detectingMove=!0),f&&g)return!0;var h,i,j=a.config.intervals.holdInterval,k=!1;return f?(this.__hasRelease=!1,this.__cancelDeferredHold=I(function(){d.__hasRelease=!0},j),!0):(g?(h=this.__findFirstSubscriber(c.target,this._gestures.$hold),(k=!t(h))&&(i=function(){h.trigger(c),d.__cancelDeferredHold=b})):(this.__hasRelease=!1,h=this.__findFirstSubscriber(c.target,this._gestures.$hold),(k=!t(h))&&(i=function(){h.trigger(c),d.__hasRelease=!0,d.__cancelDeferredHold=b})),void(k&&(this.__cancelDeferredHold=I(i,j))))},a.prototype._onTouchMove=function(c){if(this.__cancelDeferredHold(),this.__cancelDeferredHold=b,this._inTouch===!0&&"mousemove"===c.type)return!0;if(c=this.__standardizeEventObject(c),t(c))return!0;var d=this._gestureCount,e=d.$track<=0,f=d.$swipe<=0,g=a.config,h=this.__swipeOrigin,i=c.clientX,j=c.clientY,k=this.__hasMoved||this.__getDistance(h.clientX,i,h.clientY,j)>=g.distances.minScrollDistance;if(!k)return!0;if(this.__hasMoved=!0,e&&f)return!0;var l=this.__lastMoveEvent||h,m=c.direction=this.__getDirection(i-l.clientX,j-l.clientY),n=this.__checkForOriginChanged(m),o=c.velocity=this.__getVelocity(i-h.clientX,j-h.clientY,c.timeStamp-h.timeStamp);f||this.__hasSwiped&&!n||this.__setRegisteredSwipes(m,o),e||this.__handleTrack(c),this.__lastMoveEvent=c},a.prototype._onTouchEnd=function(b){var c=b.type,d=this.__hasMoved;if("mouseup"!==c){if("touchend"===c){if(d)b.cancelable===!0&&b.preventDefault();else{if(this._inTouch!==!0)return this.__preventClickFromTouch(),b.cancelable===!0&&b.preventDefault(),!0;this.__handleInput(b.target),b.cancelable===!0&&b.preventDefault()}this.__preventClickFromTouch()}this._inTouch=!1}else if(!u(this._inTouch)){if(!this._inMouse)return b.cancelable===!0&&b.preventDefault(),!1;this._inMouse=!1}if(this.__cancelRegex.test(c))return this.__handleCanceled(b),!0;if(b=this.__standardizeEventObject(b),t(b))return!0;this.__clearTempStates(),this.__touchCount=b.touches.length,this.__hasRelease&&this.__handleRelease(b),this.__hasSwiped&&this.__handleSwipe();var e=a.config,f=e.intervals,g=b.timeStamp,h=this.__lastTouchDown;if(d)return this.__handleTrackEnd(b),this.__tapCount=0,!0;if(t(h)||g-h.timeStamp>f.tapInterval)return this.__tapCount=0,!0;var i=this.__lastTouchUp,j=b.clientX,k=b.clientY;this.__tapCount>0&&this.__getDistance(j,i.clientX,k,i.clientY)<=e.distances.maxDblTapDistance&&g-i.timeStamp<=f.dblTapInterval?this.__handleDbltap(b):this.__tapCount=0,this.__handleTap(b),this.__lastTouchUp=b},a.prototype.__clearTempStates=function(){this.__cancelDeferredHold(),this.__cancelDeferredHold=b,this.__detectingMove&&(this.__unregisterType(this.__MOVE),this.__detectingMove=!1)},a.prototype.__resetTouchEnd=function(){this.__tapCount=this.__touchCount=0,this._inTouch=this.__hasRelease=this.__hasSwiped=!1,this.__pointerHash={},this.__pointerEvents=[],this.__capturedTarget=null},a.prototype.__handleCanceled=function(a){var b=a.touches||this.__pointerEvents,c=this.__getTouchIndex(b);a=c>=0?b[c]:this.__standardizeEventObject(a),this.__clearTempStates(),this.__hasMoved&&this.__handleTrackEnd(a),this.__resetTouchEnd()},a.prototype.__handleTap=function(d){var e=this;if(this.__tapCount++,!(this._gestureCount.$tap<=0)){var f=this._gestures,g=this.__findFirstSubscriber(d.target,f.$tap);if(!t(g))return a.config.intervals.dblTapZoomDelay<=0||"mouse"===d.pointerType||"mouseup"===d.type?(d=c({},d,this.__lastTouchDown),void g.trigger(d)):void(this.__cancelDeferredTap=I(function(){d=c({},d,e.__lastTouchDown),g.trigger(d),e.__tapCount=0,e.__cancelDeferredTap=b},a.config.intervals.dblTapZoomDelay))}},a.prototype.__handleDbltap=function(a){if(this.__tapCount=0,this.__cancelDeferredTap(),this.__cancelDeferredTap=b,!(this._gestureCount.$dbltap<=0)){var d=this.__findFirstSubscriber(a.target,this._gestures.$dbltap);t(d)||(a=c({},a,this.__lastTouchDown),d.trigger(a),this.__tapCount=-1)}},a.prototype.__handleRelease=function(a){var b=this.__findFirstSubscriber(a.target,this._gestures.$release);t(b)||b.trigger(a),this.__hasRelease=!1},a.prototype.__handleSwipe=function(){var a=this.__lastMoveEvent;if(t(a))return this.__hasSwiped=!1,void(this.__swipeSubscribers=null);for(var b=this.__swipeSubscribers||[];b.length>0;)b.pop().trigger(a);this.__hasSwiped=!1,this.__lastMoveEvent=null,this.__swipeSubscribers=null},a.prototype.__handleTrack=function(a){var b=this._gestures.$track,c=a.direction,d=this.__capturedTarget||a.target,e=this.__findFirstSubscribers(d,[b,b+c.x,b+c.y]);if(e.length>0)for(this.$Compat.ANDROID&&a.preventDefault();e.length>0;)e.pop().trigger(a)},a.prototype.__handleTrackEnd=function(a){if(!(this._gestureCount.$trackend<=0)){var b=this.__capturedTarget||a.target,c=this.__findFirstSubscriber(b,this._gestures.$trackend);t(c)||c.trigger(a)}},a.prototype.__handleMappedEvent=function(a){var b=a.type,c=this.__reverseMap[b],d=this.__findFirstSubscriber(a.target,c);t(d)||(a=this.__standardizeEventObject(a),t(a)||d.trigger(a))},a.prototype.__getTypes=function(){var a=this.$Compat,b=a.mappedEvents;if(a.hasPointerEvents)return this._startEvents=[b.$touchstart],this._moveEvents=[b.$touchmove],void(this._endEvents=[b.$touchend,b.$touchcancel]);if(a.hasTouchEvents)return this._startEvents=[b.$touchstart,"mousedown"],this._moveEvents=[b.$touchmove,"mousemove"],void(this._endEvents=[b.$touchend,b.$touchcancel,"mouseup"]);var c=b.$touchcancel;this._startEvents=[b.$touchstart],this._moveEvents=[b.$touchmove],this._endEvents=t(c)?[b.$touchend]:[b.$touchend,c]},a.prototype.__registerTypes=function(){this.__registerType(this.__START),this.__registerType(this.__END)},a.prototype.__unregisterTypes=function(){this.__unregisterType(this.__START),this.__unregisterType(this.__MOVE),this.__unregisterType(this.__END)},a.prototype.__registerType=function(a){var b,c=this.__listeners[a],d=this.$Document;switch(a){case this.__START:b=this._startEvents;break;case this.__MOVE:b=this._moveEvents;break;case this.__END:b=this._endEvents;break;default:return}for(var e=b.length;e-->0;)d.addEventListener(b[e],c,!1)},a.prototype.__unregisterType=function(a){var b,c=this.__listeners[a],d=this.$Document;switch(a){case this.__START:b=this._startEvents;break;case this.__MOVE:b=this._moveEvents;break;case this.__END:b=this._endEvents;break;default:return}for(var e=b.length;e-->0;)d.removeEventListener(b[e],c,!1)},a.prototype.__registerElement=function(b,c){var d,e=b.__plat;t(e)?(d=J("domEvent_"),b.__plat=e={domEvent:d}):t(e.domEvent)&&(d=J("domEvent_"),e.domEvent=d),this._isActive||(this.__registerTypes(),t(this._isActive)&&this.__appendGestureStyle(),this._isActive=!0);var f;if(t(d)){var g=this._subscribers[e.domEvent];return u(g[c])?(f=new O(b,c),g[c]=f):g[c].count++,void g.gestureCount++}var h={gestureCount:1};f=new O(b,c),h[c]=f,this._subscribers[d]=h,u(b.className)||cb(b,a.config.styleConfig[0].className),this.__removeSelections(b)},a.prototype.__unregisterElement=function(a,b){var c=a.__plat;if(!t(c)&&!t(c.domEvent)){var d=c.domEvent,e=this._subscribers[d],f=e[b];t(f)||(f.count--,0===f.count&&L(e,b),e.gestureCount--,0===e.gestureCount&&(L(this._subscribers,d),this.__removeElement(a)))}},a.prototype.__setTouchPoint=function(a){var b=a.type,c=this.$Compat;return c.hasPointerEvents||c.hasMsPointerEvents?void this.__updatePointers(a,this.__pointerEndRegex.test(b)):void(a.pointerType=-1===b.indexOf("mouse")?"touch":"mouse")},a.prototype.__setCapture=function(a){t(this.__capturedTarget)&&!i(a)&&(this.__capturedTarget=a)},a.prototype.__updatePointers=function(a,b){var c,d=a.pointerId,e=this.__pointerHash,f=e[d];if(b)u(f)||(c=this.__pointerEvents.indexOf(f),c>-1&&this.__pointerEvents.splice(c,1),L(this.__pointerHash,d));else{if(1===d&&!p(e))return;a.identifier=a.pointerId,u(f)||(c=this.__pointerEvents.indexOf(f))<0?this.__pointerEvents.push(a):this.__pointerEvents.splice(c,1,a),e[d]=a}},a.prototype.__findFirstSubscriber=function(a,b){if(!t(a)){var c,d,e;do if(c=a.__plat,!u(c)&&!u(c.domEvent)&&(d=this._subscribers[c.domEvent],e=d[b],!u(e)))return e;while(!t(a=a.parentNode))}},a.prototype.__findFirstSubscribers=function(a,b){if(t(a))return[];var c,d,e,f,g,h=[];do if(c=a.__plat,!u(c)&&!u(c.domEvent))for(d=this._subscribers[c.domEvent],e=Object.keys(d);e.length>0;)f=e.pop(),g=b.indexOf(f),-1!==g&&(h.push(d[f]),b.splice(g,1));while(b.length>0&&!t(a=a.parentNode));return h},a.prototype.__addMappedEvent=function(a,b,c){var d=this,e=this.$Document;return 0===a&&e.addEventListener(b,this.__mappedEventListener,c),function(){e.removeEventListener(b,d.__mappedEventListener,c)}},a.prototype.__removeEventListener=function(a,b,c,d){var e=this._gestures;a.removeEventListener(b,c,d);var f=e.$swipe,g=e.$track,h=b;if(-1!==b.indexOf(g)){var i=e.$trackend;h=b===i?i:g}else-1!==b.indexOf(f)&&(h=f);this._gestureCount[h]--,this.__unregisterElement(a,b)},a.prototype.__removeElement=function(b){this.__returnSelections(b),u(b.className)||db(b,a.config.styleConfig[0].className);var c=b.__plat;L(c,"domEvent"),p(c)&&L(b,"__plat"),p(this._subscribers)&&this.dispose()},a.prototype.__standardizeEventObject=function(a){this.__setTouchPoint(a);var b=-1!==this._startEvents.indexOf(a.type),c=a.touches||this.__pointerEvents,d=a.changedTouches,e=!u(d),f=a.timeStamp;if(e)if(b)a=d[0];else{var g=this.__getTouchIndex(d);if(g>=0)a=d[g];else if(this.__getTouchIndex(c)>=0)return null}return b&&this.__setCapture(a.target),this.__normalizeButtons(a),a.touches=c,a.offset=this.__getOffset(a),a.timeStamp=f,a},a.prototype.__normalizeButtons=function(a){return r(a.buttons)?void 0:r(a.which)&&a.which>0?void(a.buttons=a.which):void(a.buttons=a.button)},a.prototype.__getTouchIndex=function(a){for(var b=(this.__lastTouchDown||{}).identifier,c=a.length,d=0;c>d;++d)if(a[d].identifier===b)return d;return-1},a.prototype.__getOffset=function(a){var b=this.__capturedTarget||a.target;if(i(b))return{x:a.clientX,y:a.clientY};if(!u(a.offsetX)&&b===a.target)return{x:a.offsetX,y:a.offsetY};for(var c=b.offsetLeft,d=b.offsetTop;!t(b=b.offsetParent);)c+=b.offsetLeft,d+=b.offsetTop;return{x:a.clientX-c,y:a.clientY-d}},a.prototype.__getDistance=function(a,b,c,d){var e=b-a,f=d-c;return Math.sqrt(e*e+f*f)},a.prototype.__getVelocity=function(a,b,c){return{x:Math.abs(a/c)||0,y:Math.abs(b/c)||0}},a.prototype.__getDirection=function(a,b){var c=Math.abs(a),d=Math.abs(b),e=(this.__lastMoveEvent||{}).direction||{},f=0===a?e.x||"none":0>a?"left":"right",g=0===b?e.y||"none":0>b?"up":"down";return{x:f,y:g,primary:c===d?e.primary||"none":c>d?f:g}},a.prototype.__checkForOriginChanged=function(a){var b=this.__lastMoveEvent;if(t(b))return this.__hasSwiped=!1,!0;var c=b.direction;return c.x===a.x&&c.y===a.y?!1:(this.__swipeOrigin={clientX:b.clientX,clientY:b.clientY,timeStamp:b.timeStamp,target:b.target,identifier:b.identifier},this.__hasSwiped=!1,!0)},a.prototype.__setRegisteredSwipes=function(b,c){var d=(this.__swipeOrigin||{}).target,e=this._gestures.$swipe,f=a.config.velocities.minSwipeVelocity,g=[e];c.x>=f&&(this.__hasSwiped=!0,g.push(e+b.x)),c.y>=f&&(this.__hasSwiped=!0,g.push(e+b.y)),this.__swipeSubscribers=this.__findFirstSubscribers(d,g)},a.prototype.__isHorizontal=function(a){return"left"===a||"right"===a},a.prototype.__appendGestureStyle=function(){var b,c,d=this.$Document;if(!this.$Compat.platCss)if(!t(d.styleSheets)&&d.styleSheets.length>0){var e=d.styleSheets[0];for(b=a.config.styleConfig,c=b.length;c-->0;)e.insertRule(this.__createStyle(b[c]),0)}else{var f=d.head,g=d.createElement("style"),h="";for(g.type="text/css",b=a.config.styleConfig,c=b.length;c-->0;)h=this.__createStyle(b[c])+h;g.textContent=h,f.appendChild(g)}},a.prototype.__createStyle=function(a){var b=a.styles||[],c=b.length,d="."+a.className+" { ",e="";c=b.length;for(var f=0;c>f;++f)e+=b[f]+";";return d+=e+" } "},a.prototype.__isFocused=function(a){return a===this.__focusedElement},a.prototype.__handleInput=function(a){var b=this,c=a.nodeName,d=this.__focusedElement||{};if(!m(c))return this.__focusedElement=null,void(s(d.blur)&&d.blur());var e;switch(c.toLowerCase()){case"input":switch(a.type){case"range":s(d.blur)&&d.blur();break;case"button":case"submit":case"checkbox":case"radio":case"file":s(d.blur)&&d.blur(),H(function(){b.$Document.body.contains(a)&&a.click()});break;default:return this.__focusedElement=a,a.focus(),void(e=this.addEventListener(a,"blur",function(){b.__isFocused(a)&&(b.__focusedElement=null),e()},!1))}break;case"a":case"button":case"label":s(d.blur)&&d.blur(),H(function(){b.$Document.body.contains(a)&&a.click()});break;case"textarea":return this.__focusedElement=a,a.focus(),void(e=this.addEventListener(a,"blur",function(){b.__isFocused(a)&&(b.__focusedElement=null),e()},!1));case"select":s(d.blur)&&d.blur(),H(function(){var c=b.$Document;if(c.body.contains(a)){var d=c.createEvent("MouseEvents");d.initMouseEvent("mousedown",!1,!1,null,null,null,null,null,null,null,null,null,null,null,null),a.dispatchEvent(d)}});break;default:s(d.blur)&&d.blur(),H(function(){b.$Document.body.contains(a)&&s(a.click)&&a.click()})}this.__focusedElement=null},a.prototype.__preventClickFromTouch=function(){var a=this,c=this.$Document,d=I(function(){c.removeEventListener("click",e,!0),c.removeEventListener("mousedown",e,!0),c.removeEventListener("mouseup",e,!0)},400),e=function(f){if(f.preventDefault(),f.stopPropagation(),c.removeEventListener(f.type,e,!0),d===b)return!1;d(),d=b;var g=a.__lastTouchDown;return t(g)||a.__isFocused(g.target)?!1:(a.__handleInput(g.target),!1)};H(function(){c.addEventListener("click",e,!0),c.addEventListener("mousedown",e,!0),c.addEventListener("mouseup",e,!0)})},a.prototype.__removeSelections=function(a){j(a)&&(u(a.onselectstart)||a.addEventListener("selectstart",this.__preventDefault,!1),u(a.ondragstart)||a.addEventListener("dragstart",this.__preventDefault,!1))},a.prototype.__returnSelections=function(a){j(a)&&(u(a.onselectstart)||a.removeEventListener("selectstart",this.__preventDefault,!1),u(a.ondragstart)||a.removeEventListener("dragstart",this.__preventDefault,!1))},a.prototype.__preventDefault=function(a){var b=a.target.nodeName;return m(b)&&(b=b.toLowerCase()),"input"===b||"textarea"===b?!0:(a.preventDefault(),!1)},a.config={intervals:{tapInterval:200,dblTapInterval:300,holdInterval:400,dblTapZoomDelay:0},distances:{minScrollDistance:3,maxDblTapDistance:20},velocities:{minSwipeVelocity:.8},styleConfig:[{className:"plat-gesture",styles:["-moz-user-select: none","-khtml-user-select: none","-webkit-touch-callout: none","-webkit-user-select: none","-webkit-user-drag: none","-webkit-tap-highlight-color: transparent","-webkit-overflow-scrolling: touch","-ms-user-select: none","-ms-touch-action: manipulation","touch-action: manipulation"]},{className:"plat-no-touch-action",styles:["-ms-touch-action: none","touch-action: none"]}]},a}();a.DomEvents=G,a.IDomEvents=q,Cb.injectable(hc,q),a.IDomEventsConfig=x,Cb.injectable(ic,x);var M=function(){function a(){this.$Document=ib(Mb)}return a.prototype.initialize=function(a,b){this.element=a,this.event=b},a.prototype.trigger=function(a){var b=this.$Document.createEvent("CustomEvent");g(a)&&c(b,a),b.initCustomEvent(this.event,!0,!0,0),this.element.dispatchEvent(b)},a}();a.DomEvent=M,a.IDomEventInstance=y,Cb.injectable(jc,y,null,Le);var N,O=function(a){function b(b,c){a.call(this),this.count=0,this.element=b,this.event=c,this.count++}return __extends(b,a),b.prototype.trigger=function(a){var b=this.$Document.createEvent("CustomEvent");this.__extendEventObject(b,a),b.initCustomEvent(this.event,!0,!0,0),this.element.dispatchEvent(b)},b.prototype.__extendEventObject=function(a,b){var c=b.pointerType;a.clientX=b.clientX,a.clientY=b.clientY,a.offsetX=b.offset.x,a.offsetY=b.offset.y,a.direction=b.direction||{x:"none",y:"none",primary:"none"},a.touches=b.touches,a.velocity=b.velocity||{x:0,y:0},a.identifier=b.identifier||0,a.pointerType=r(c)?this.__convertPointerType(c,b.type):c,a.screenX=b.screenX,a.screenY=b.screenY,a.pageX=b.pageX,a.pageY=b.pageY,a.buttons=b.buttons},b.prototype.__convertPointerType=function(a,b){switch(a){case MSPointerEvent.MSPOINTER_TYPE_MOUSE:return"mouse";case MSPointerEvent.MSPOINTER_TYPE_PEN:return"pen";case MSPointerEvent.MSPOINTER_TYPE_TOUCH:return"touch"}return-1===b.indexOf("mouse")?"touch":"mouse"},b}(M);!function(a){function b(){return new c}var c=function(){function a(){this.$Compat=ib(Jb),this._elements={}}return a.prototype.animate=function(a,b,c){if(!j(a)||a.nodeType!==Node.ELEMENT_NODE)return this.resolve();var d,e=Of[b],f=Pf[b];if(!this.$Compat.animationSupported||u(e)){if(u(f))return this.resolve();d=f.inject()}else d=e.inject();var g=this.__parentIsAnimating(a),h=this.__setAnimationId(a,d),i=d.instantiate(a,c),k=this._elements[h];if(!t(g)){k.animationEnd(!0);var l=this._elements[g];return o(l.promise)?i.then(function(){return function(){return l.promise}}):this.resolve()}return this.__stopChildAnimations(a),i=i.then(function(){return k.promise=null,k.animationEnd(),function(){return i}}),o(k.promise)?k.promise.then(function(){return d.start(),k.promise=i}):(d.start(),k.promise=i)},a.prototype.resolve=function(){var a=new d(function(b){b(function(){return a})});return a},a.prototype.__parentIsAnimating=function(a){for(var b;!i(a=a.parentNode)&&a.nodeType===Node.ELEMENT_NODE;)if(gb(a,Rd)&&(b=(a.__plat||{}).animation,m(b))){if(!t(this._elements[b]))return b;L(a.__plat,"animation"),p(plat)&&L(a,"__plat"),db(a,Rd)}},a.prototype.__setAnimationId=function(a,b){var c,d=this._elements,e=a.__plat;u(e)&&(a.__plat=e={}),u(e.animation)?e.animation=c=J("animation_"):c=e.animation;var f=d[c],g=function(f,g){(f!==!0||(b.cancel(),b.end(),g!==!0))&&(db(a,Rd),L(d,c),L(e,"animation"),p(e)&&L(a,"__plat"))};return u(f)?(cb(a,Rd),d[c]={animationEnd:g}):(f.animationEnd(!0,!0),f.animationEnd=g),c},a.prototype.__stopChildAnimations=function(a){for(var b,c,d,e,f=this._elements,g=Array.prototype.slice.call(a.querySelectorAll("."+Rd));g.length>0;)b=g.pop(),d=b.__plat||{},e=d.animation,t(e)||(c=f[e]||{},s(c.animationEnd)&&c.animationEnd(!0))},a}();a.Animator=c,a.IAnimator=b,Cb.injectable("$Animator",b);var d=function(a){function b(b,c){a.call(this,b),t(c)||(this.__animationInstance=c.__animationInstance)}return __extends(b,a),b.prototype.initialize=function(a){g(a)&&t(this.__animationInstance)&&(this.__animationInstance=a)},b.prototype.cancel=function(){var a=this.__animationInstance;return t(a)||(s(a.cancel)&&a.cancel(),s(a.end)&&a.end()),this},b.prototype.dispose=function(){var a=this.__animationInstance;return t(a)||s(a.dispose)&&a.dispose(),this},b.prototype.then=function(b){return a.prototype.then.call(this,b)},b.prototype.catch=function(b){return a.prototype.catch.call(this,b)},b}(Xf.Promise);a.AnimationPromise=d;var e=function(){function a(){this.$Compat=ib(Jb),this.dom=ib(gc)}return a.prototype.initialize=function(){},a.prototype.start=function(){},a.prototype.end=function(){s(this._resolve)&&(this._resolve(),this._resolve=null)},a.prototype.cancel=function(){},a.prototype.dispose=function(){},a.prototype.instantiate=function(a,b){var c=this;this.element=a,this.options=b;var e=new d(function(a){c._resolve=a,c.initialize()});return e.initialize(this),e},a}();a.BaseAnimation=e;var f=function(a){function b(){a.apply(this,arguments),this.__animationEvents=this.$Compat.animationEvents,this.__subscribers=[]}return __extends(b,a),b.prototype.dispose=function(){s(this.__removeListener)&&(this.__removeListener(),this.__removeListener=null),this.__subscribers=[]},b.prototype.animationStart=function(a){return this.__addEventListener(this.__animationEvents.$animationStart,a)},b.prototype.transitionStart=function(a){return this.__addEventListener(this.__animationEvents.$transitionStart,a)},b.prototype.animationEnd=function(a){return this.__addEventListener(this.__animationEvents.$animationEnd,a)},b.prototype.transitionEnd=function(a){return this.__addEventListener(this.__animationEvents.$transitionEnd,a)},b.prototype.__addEventListener=function(a,b){var c=this,d=this.__subscribers,e=function(){c.__removeListener=c.dom.addEventListener(c.element,a,function(){c.__removeListener(),c.__removeListener=null,0!==d.length&&(b.call(c),d.shift(),0!==d.length&&d[0]())},!1)};return d.push(e),1===d.length&&e(),this},b}(e);a.CssAnimation=f;var h=function(a){function b(){a.apply(this,arguments),this.isJs=!0}return __extends(b,a),b}(e);a.JsAnimation=h;var k=function(a){function b(){a.apply(this,arguments),this.$Window=ib(sc),this.className=Sd}return __extends(b,a),b.prototype.initialize=function(){var a=this.element,b=this.className,c=gb(a,b);return db(a,b+" "+b+Re),c?void H(cb,[a,b]):void cb(a,b)},b.prototype.start=function(){var a=this,b=this.$Compat.animationEvents.$animation,c=this.element,d=this.className,e=this.$Window.getComputedStyle(c,(this.options||{}).pseudo),f=e[b+"Name"];return""===f||"none"===f||"paused"===e[b+"PlayState"]?(fb(c,d,d+Re),void this.end()):void this.animationEnd(function(){fb(c,d,d+Re),a.end()})},b.prototype.cancel=function(){var a=this.className;fb(this.element,a,a+Re)},b.prototype.dispose=function(){var a=this.className;db(this.element,a+" "+a+Re)},b}(f);a.SimpleCssAnimation=k,Cb.animation(Sd,k);var l=function(a){function b(){a.apply(this,arguments),this.className=Wd}return __extends(b,a),b}(k);a.FadeIn=l,Cb.animation(Wd,l);var n=function(a){function b(){a.apply(this,arguments),this.className=Xd}return __extends(b,a),b}(k);a.FadeOut=n,Cb.animation(Xd,n);var q=function(a){function b(){a.apply(this,arguments),this.className=Ud}return __extends(b,a),b}(k);a.Enter=q,Cb.animation(Ud,q);var r=function(a){function b(){a.apply(this,arguments),this.className=Vd}return __extends(b,a),b}(k);a.Leave=r,Cb.animation(Vd,r);var v=function(a){function b(){a.apply(this,arguments),this.$Window=ib(sc),this.className=Td,this._modifiedProperties={},this._started=!1}return __extends(b,a),b.prototype.initialize=function(){cb(this.element,this.className)},b.prototype.start=function(){var a=this,b=this.$Compat.animationEvents.$transition,c=this.element,d=function(){db(c,a.className),a.end()},e=this.$Window.getComputedStyle(c,(this.options||{}).pseudo),f=e[b+"Property"],g=e[b+"Duration"];return this._started=!0,""===f||"none"===f||""===g||"0s"===g?(this._animate(),void d()):(this.transitionEnd(d),void(this._animate()||d()))},b.prototype.cancel=function(){db(this.element,this.className),this._started||this._animate()},b.prototype.dispose=function(){for(var a,b=this.element.style||{},c=this._modifiedProperties,d=Object.keys(c);d.length>0;)a=d.pop(),b[a]=c[a]},b.prototype._animate=function(){for(var a,b,c,d=this.element.style||{},e=(this.options||{}).properties||{},f=Object.keys(e),g=f.length,h=this._modifiedProperties,i=0;f.length>0;)a=f.shift(),b=d[a],c=e[a],m(c)?(d[a]=c,b===d[a]?i++:h[a]=b):i++;return g>i},b}(f);a.SimpleCssTransition=v,Cb.animation(Td,v)}(N=a.animations||(a.animations={}));var P;!function(a){var c=function(a){function b(){a.apply(this,arguments),this.$RouterStatic=ib(qc),this.$Promise=ib(Ib),this.$Injector=ib(Ec),this.$ElementManagerFactory=ib(Zb),this.$Document=ib(Mb),this.$ManagerCache=ib(bc),this.$Animator=ib(dc),this.navigator=ib(Vb)}return __extends(b,a),b.prototype.initialize=function(){var a,b=this.router=this.$RouterStatic.currentRouter(),c=this._getParentViewport();t(c)||t(c.router)||(a=this.parentRouter=c.router,a.addChild(b)),this.navigator.initialize(b)},b.prototype.setTemplate=function(){var a=this;H(function(){a.router.register(a)})},b.prototype.canNavigateTo=function(a){var b=this,c=this.$RouterStatic.currentRouter,d=c(),e=!0,f=this.$Injector.getDependency(a.delegate.view),h=f.inject(),i=a.parameters,j=this.$Promise.resolve.bind(this.$Promise),k=c();if(!g(h))return j();if(d!==k){var l=ib(Vb);h.navigator=l,l.initialize(k)}else h.navigator=this.navigator;return s(h.canNavigateTo)&&(e=h.canNavigateTo(i,a.query)),j(e).then(function(a){return b.nextInjector=f,b.nextView=h,a})},b.prototype.canNavigateFrom=function(){var a=this.controls[0],b=!0;return g(a)&&s(a.canNavigateFrom)&&(b=a.canNavigateFrom()),this.$Promise.resolve(b)},b.prototype.navigateTo=function(a){var b=this;return this.$Promise.resolve().then(function(){var c=b.nextInjector||b.$Injector.getDependency(a.delegate.view),d=b._createNodeMap(c),e=b.element,f=d.element,g=(a.parameters,a.query),h=d.uiControlNode.control;e.appendChild(f);var i=b._animationPromise;o(i)&&i.dispose(),b._animationPromise=b.$Animator.animate(b.element,Ud);var j=b.$ManagerCache.read(b.uid),k=b.$ElementManagerFactory.getInstance();return j.children=[],k.initialize(d,j),s(h.navigatedTo)&&h.navigatedTo(a.parameters,g),k.setUiControlTemplate(),k.templatePromise})},b.prototype.navigateFrom=function(){var a=this.controls[0];return g(a)&&s(a.navigatingFrom)&&a.navigatingFrom(),this.$Promise.resolve().then(function(){dg.dispose(a)})},b.prototype.dispose=function(){this.router.unregister(this),this.navigator.dispose()},b.prototype._createNodeMap=function(a){var b=this.nextView||a.inject(),c=this.$Document,d=a.name,e=b.replaceWith,f=c.createElement(p(e)||"any"===e?"div":e);return f.setAttribute("plat-control",d),f.className="plat-viewcontrol",{element:f,attributes:{},nodes:[],uiControlNode:{control:b,nodeName:d,expressions:[],injector:a,childManagerLength:0}}},b.prototype._getParentViewport=function(){for(var a=this.parent,b=this.type;!t(a)&&a.type!==b;)a=a.parent;return a},b}(z);a.Viewport=c,Cb.control(Cd,c);var d=function(a){function b(){a.call(this),this.$Promise=ib(Ib),this.$TemplateCache=ib(cc),this.$Document=ib(Mb),this.replaceWith=null,this.__isFirst=!1;var b=ib(ac);this.__templateControlCache=b.create(Dd)}return __extends(b,a),b.prototype.initialize=function(){var a=this.options||{},b=a.value||{},c=this._id=b.id;if(t(c)){var d=ib(Rb);return void d.warn(this.type+" instantiated without an id option",d.COMPILE)}this._url=b.templateUrl;var e=this.__templateControlCache.read(c);return t(e)?(this.__isFirst=!0,void this._initializeTemplate()):void(this.__templatePromise=e)},b.prototype.loaded=function(){this.__isFirst||this._waitForTemplateControl(this.__templatePromise)},b.prototype.dispose=function(){if(this.__isFirst){var a=this.__templateControlCache;a.remove(this._id),0===a.info().size&&a.dispose()}},b.prototype._initializeTemplate=function(){var a=this,b=this._id;if(!t(b)){var c,d=this.endNode.parentNode,e=this._url;t(e)?(c=this.$Document.createDocumentFragment(),Q(this.elementNodes,c)):(c=this.$TemplateCache.read(e),S(this.elementNodes,d));var f;o(c)?f=c.catch(function(b){return t(b)?z.determineTemplate(a,e):void 0}).then(function(c){return a.bindableTemplates.add(b,c.cloneNode(!0)),a}):(this.bindableTemplates.add(b,c.cloneNode(!0)),f=this.$Promise.resolve(this)),this.__templateControlCache.put(b,f)}},b.prototype._waitForTemplateControl=function(a){var b,c=this;a.then(function(a){return t(c._url)||c._url===a._url||(b=ib(Rb),b.warn("The specified url: "+c._url+" does not match the original "+c.type+' with id: "'+c._id+'". The original url will be loaded.',b.TEMPLATE)),c.__mapBindableTemplates(a),c.bindableTemplates.bind(c._id)}).then(function(a){var b=c.endNode;W(b.parentNode,a,b)}).catch(function(a){H(function(){b=ib(Rb),b.warn("Problem resolving "+c.type+" url: "+a.response,b.TEMPLATE)})})},b.prototype.__mapBindableTemplates=function(a){var b=this.bindableTemplates;b.cache=a.bindableTemplates.cache,b.templates=a.bindableTemplates.templates},b}(z);a.Template=d,Cb.control(Bd,d);var e=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype.setTemplate=function(){this.innerTemplate=Q(this.element.childNodes)},b.prototype.loaded=function(){this.element.appendChild(this.innerTemplate.cloneNode(!0))},b}(z);a.Ignore=e,Cb.control(zd,e);var f=function(a){function b(){var b=this;a.call(this),this.$Animator=ib(dc),this.$Promise=ib(Ib),this.priority=120,this._aliases={index:Be.index,even:Be.even,odd:Be.odd,first:Be.first,last:Be.last},this._blockLength=0,this._currentAnimations=[],this.__listenerSet=!1,this.itemsLoaded=new this.$Promise(function(a){b.__resolveFn=a})}return __extends(b,a),b.prototype.setTemplate=function(){var a=Array.prototype.slice.call(this.element.childNodes);this.bindableTemplates.add("item",a),this._container=this.element},b.prototype.contextChanged=function(a,b){if(!v(a)){var c=plat.acquire(Rb);return void c.warn(this.type+" context set to something other than an Array.",c.CONTEXT)}return this._setListener(),0===a.length?void this._removeItems(this.controls.length):(this._setAliases(),void this._executeEvent({method:"splice",arguments:null,returnValue:null,oldArray:b||[],newArray:a||[]}))
},b.prototype.loaded=function(){var a=this.context;if(v(a))this._setAliases(),this._addItems(a.length,0),this._setListener();else if(!t(a)){var b=plat.acquire(Rb);b.warn(this.type+" context set to something other than an Array.",b.CONTEXT)}},b.prototype.dispose=function(){this.__resolveFn=null},b.prototype._setAliases=function(){var a=this.options||{},b=a.value||{},c=b.aliases;if(g(c))for(var d,e=this._aliases,f=Object.keys(e),h=f.length,i=0;h>i;++i)d=c[f[i]],m(d)&&(e[f[i]]=d)},b.prototype._addItems=function(a,b,c){var d=this,e=this.context,f=+(b+a);if(v(e)&&r(f)&&!(e.length<f)){for(var g=[];f>b;)g.push(this._bindItem(b++));return g.length>0?this.itemsLoaded=this.$Promise.all(g).then(function(a){if(d._setBlockLength(a),c===!0)for(var b=a.length,e=0;b>e;++e)d._appendAnimatedItem(a[e],Ud);else d._appendItems(a);s(d.__resolveFn)&&(d.__resolveFn(),d.__resolveFn=null)}).catch(function(a){H(function(){var b=ib(Rb);b.warn(a,b.BIND)})}):(s(this.__resolveFn)&&(this.__resolveFn(),this.__resolveFn=null),this.itemsLoaded=new this.$Promise(function(a){d.__resolveFn=a})),this.itemsLoaded}},b.prototype._appendItems=function(a){Q(a,this._container)},b.prototype._appendAnimatedItem=function(a,b){if(j(a)){var c,d=this.$Animator,e=Array.prototype.slice.call(a.childNodes);W(this._container,a);for(var f=this._currentAnimations;e.length>0;)c=e.shift(),c.nodeType===Node.ELEMENT_NODE&&f.push(d.animate(c,b).then(function(){f.shift()}))}},b.prototype._removeItems=function(a){for(var b=0;a>b;++b)this._removeItem();this.controls.length>0&&this._updateResources()},b.prototype._removeItem=function(){var a=this.controls,b=a.length-1;z.dispose(a[b])},b.prototype._bindItem=function(a){return this.bindableTemplates.bind("item",a,this._getAliases(a))},b.prototype._setBlockLength=function(a){this._blockLength>0||0===a.length||(this._blockLength=a[0].childNodes.length)},b.prototype._updateResources=function(){for(var a=this.controls,b=a.length,c=0;b>c;++c)a[c].resources.add(this._getAliases(c))},b.prototype._setListener=function(){this.__listenerSet||(this.observeArray(this,_e,this._preprocessEvent,this._executeEvent),this.__listenerSet=!0)},b.prototype._preprocessEvent=function(a){var b="_pre"+a.method;s(this[b])&&this[b](a)},b.prototype._executeEvent=function(a){var b="_"+a.method;s(this[b])&&this[b](a)},b.prototype._getAliases=function(a){var b=0===(1&a),c={},d=this._aliases,e=ef;return c[d.index]={value:a,type:e},c[d.even]={value:b,type:e},c[d.odd]={value:!b,type:e},c[d.first]={value:0===a,type:e},c[d.last]={value:a===this.context.length-1,type:e},c},b.prototype._push=function(a){this._addItems(a.arguments.length,a.oldArray.length,!0)},b.prototype._pop=function(a){var b=this;this._animateItems(a.newArray.length,1,Vd).then(function(){b._removeItems(1)})},b.prototype._preshift=function(){this._animateItems(0,1,Vd,!0)},b.prototype._shift=function(){this._removeItems(1)},b.prototype._presplice=function(a){var b=a.arguments,c=b.length-2,d=b[1];return c>=d?void this._animateItems(b[0],c,Ud):void this._animateItems(b[0],d,Vd,!0)},b.prototype._splice=function(a){var b=this.controls.length,c=a.newArray.length;c>b?this._addItems(c-b,b):b>c&&this._removeItems(b-c)},b.prototype._preunshift=function(){this._animateItems(0,1,Ud)},b.prototype._unshift=function(a){this._addItems(a.arguments.length,a.oldArray.length)},b.prototype._sort=function(){},b.prototype._reverse=function(){},b.prototype._animateItems=function(a,b,c,d,e){var f=this._blockLength;if(0===f)return this.$Promise.resolve();var g=a*f;return this._initiateAnimation(g,b*f+g,c,d,e)},b.prototype._initiateAnimation=function(a,b,c,d,e){var f=this,g=[],h=this._currentAnimations,i=h.length;if(0===i||e===!1)return this.__handleAnimation(a,b,c,d);for(;i-->0;)g.push(h[i].cancel());return this.$Promise.all(g).then(function(){return f.__handleAnimation(a,b,c,d)})},b.prototype.__handleAnimation=function(a,b,c,d){var e,f,g,h=this._container,i=Array.prototype.slice.call(h.childNodes,a,b),j=i[0],k=this.$Animator,l=this._currentAnimations;for(d=d===!0;i.length>0;)e=i.shift(),e.nodeType===Node.ELEMENT_NODE&&(d?(e=e.cloneNode(!0),h.insertBefore(e,j),f=function(){l.shift(),h.removeChild(this)}.bind(e)):f=function(){l.shift()},g=k.animate(e,c).then(f),l.push(g));return g},b}(z);a.ForEach=f,Cb.control(wd,f);var h=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype.contextChanged=function(){this.loaded()},b.prototype.loaded=function(){var a=this.context;m(a)&&V(this.element,a)},b}(z);a.Html=h,Cb.control(xd,h);var i=function(a){function b(){var b=this;a.call(this),this.$Promise=ib(Ib),this.$Document=ib(Mb),this.replaceWith="select",this.priority=120,this.groups={},this.__isGrouped=!1,this.__isNativeSelect=!1,this.itemsLoaded=new this.$Promise(function(a){b.__resolveFn=a})}return __extends(b,a),b.prototype.setTemplate=function(){var a=this.$Document,b=this.options||{},c=b.value||{},d=a.createElement("option"),e=c.value,f=c.textContent;if(u(e)&&u(f))return void(this.__isNativeSelect=!0);if(!t(c.group)){var g=this.__group=c.group,h=a.createElement("optgroup");h.label=He+g+Ie,this.bindableTemplates.add("group",h)}(!m(e)||p(e))&&(e=void 0),(!m(f)||p(f))&&(f=void 0),d.value=He+(e||f)+Ie,d.textContent=He+(f||e)+Ie,this.bindableTemplates.add("option",d)},b.prototype.contextChanged=function(a,b){if(!this.__isNativeSelect&&v(a)){var c=v(a)?a.length:0,d=v(b)?b.length:0;this._setListener(),c>d?this._addItems(c-d,d):d>c&&this._removeItems(d-c)}},b.prototype.loaded=function(){if(!this.__isNativeSelect){var a=this.options||{},b=a.value||{};if(u(b.value)&&u(b.textContent))return void(this.__isNativeSelect=!0);var c=this.context,d=this.element,e=d.firstElementChild;j(e)&&"option"===e.nodeName.toLowerCase()&&(this.__defaultOption=e.cloneNode(!0)),this.__isGrouped=!t(this.__group=b.group),v(c)&&(this._addItems(c.length,0),this._setListener())}},b.prototype.dispose=function(){this.__resolveFn=null,this.__defaultOption=null},b.prototype._setListener=function(){this.__listenerSet||(this.observeArray(this,_e,null,this._executeEvent),this.__listenerSet=!0)},b.prototype._executeEvent=function(a){var b="_"+a.method;s(this[b])&&this[b](a)},b.prototype._addItems=function(a,b){for(var c,d=this,e=b,f=this.bindableTemplates,g=[],h=0;a>h;++h,++e)c=this.context[e],g.push(f.bind("option",e).then(this._insertOptions.bind(this,e,c)));return g.length>0?this.itemsLoaded=this.$Promise.all(g).then(function(){s(d.__resolveFn)&&(d.__resolveFn(),d.__resolveFn=null)}):(s(this.__resolveFn)&&(this.__resolveFn(),this.__resolveFn=null),this.itemsLoaded=new this.$Promise(function(a){d.__resolveFn=a})),this.itemsLoaded},b.prototype._insertOptions=function(a,b,c){var d=this.element;if(this.__isGrouped){var e=this.groups,f=b[this.__group],g=e[f];return t(g)?e[f]=this.bindableTemplates.bind("group",a).then(function(a){return g=e[f]=a.childNodes[1],g.appendChild(c),d.appendChild(a),g}):o(g)?g.then(function(a){return a.appendChild(c),a}):(g.appendChild(c),this.$Promise.resolve(null))}return d.appendChild(c),this.$Promise.resolve(null)},b.prototype._removeItem=function(a){0>a||z.dispose(this.controls[a])},b.prototype._removeItems=function(a){for(var b=this.controls,c=b.length-1;a-->0;)this._removeItem(c--)},b.prototype._itemRemoved=function(a){return 0!==a.oldArray.length?this.__isGrouped?void this._resetSelect():void this._removeItems(1):void 0},b.prototype._resetSelect=function(){var a=this.context.length,b=this.element,c=b.childNodes.length;this._removeItems(c),this.groups={},t(this.__defaultOption)||b.appendChild(this.__defaultOption.cloneNode(!0)),this._addItems(a,0)},b.prototype._push=function(a){this._addItems(a.arguments.length,a.oldArray.length)},b.prototype._pop=function(a){this._itemRemoved(a)},b.prototype._shift=function(a){this._itemRemoved(a)},b.prototype._splice=function(a){if(this.__isGrouped)return void this._resetSelect();var b=a.oldArray.length,c=a.newArray.length;c>b?this._addItems(c-b,b):b>c&&this._removeItems(b-c)},b.prototype._unshift=function(a){return this.__isGrouped?void this._resetSelect():void this._addItems(a.arguments.length,a.oldArray.length)},b.prototype._sort=function(){this.__isGrouped&&this._resetSelect()},b.prototype._reverse=function(){this.__isGrouped&&this._resetSelect()},b}(z);a.Select=i,Cb.control(Ad,i);var l=function(a){function c(){a.call(this),this.$Animator=ib(dc),this.$Promise=ib(Ib),this.__condition=!0,this.__firstTime=!0;var b=ib(Mb);this.commentNode=b.createComment("plat-if"+Qe+"placeholder")}return __extends(c,a),c.prototype.contextChanged=function(){var a=this.options.value;if(!p(a))return this._setter(a)},c.prototype.setTemplate=function(){var a=Array.prototype.slice.call(this.element.childNodes);this.bindableTemplates.add("template",a)},c.prototype.loaded=function(){if(t(this.options)){var a=ib(Rb);a.warn("No condition specified in plat-options for plat-if.",a.BIND),this.options={value:{condition:!0},observe:b}}var c=this.contextChanged();return this.__removeListener=this.options.observe(this._setter),c},c.prototype.dispose=function(){s(this.__removeListener)&&(this.__removeListener(),this.__removeListener=null),this.commentNode=null,this.fragmentStore=null},c.prototype._setter=function(a){var b,c=this,d=!!a.condition;return d!==this.__condition||this.__firstTime?(d?b=t(this.__leaveAnimation)?this._addItem():this.__leaveAnimation.cancel().then(function(){return c.__leaveAnimation=null,c._addItem()}):t(this.__enterAnimation)?(this._removeItem(),b=this.$Promise.resolve(null)):b=this.__enterAnimation.cancel().then(function(){return c.__enterAnimation=null,c._removeItem()}),this.__condition=d,b):this.$Promise.resolve(null)},c.prototype._addItem=function(){var a=this;return j(this.commentNode.parentNode)||this.__firstTime?this.__firstTime?(this.__firstTime=!1,this.__initialBind=this.bindableTemplates.bind("template").then(function(b){var c=a.element;return c.appendChild(b),a.__initialBind=null,c.parentNode===a.fragmentStore?a._animateEntrance():a.__enterAnimation=a.$Animator.animate(c,Ud)}).then(function(){a.__enterAnimation=null}),this.__initialBind):o(this.__initialBind)?this.__initialBind.then(function(){return a._animateEntrance()}):this._animateEntrance():this.$Promise.resolve(null)},c.prototype._animateEntrance=function(){var a=this,b=this.commentNode,c=b.parentNode;return c.replaceChild(this.fragmentStore,b),this.__enterAnimation=this.$Animator.animate(this.element,Ud).then(function(){a.__enterAnimation=null})},c.prototype._removeItem=function(){var a=this;return o(this.__initialBind)?this.__initialBind.then(function(){return a._animateLeave()}):this._animateLeave()},c.prototype._animateLeave=function(){var a=this,b=this.element;return this.__leaveAnimation=this.$Animator.animate(b,Vd).then(function(){if(a.__leaveAnimation=null,b.parentNode.insertBefore(a.commentNode,b),!k(a.fragmentStore)){var c=plat.acquire(Mb);a.fragmentStore=c.createDocumentFragment()}W(a.fragmentStore,b)})},c}(z);a.If=l,Cb.control(yd,l);var n=function(a){function c(){a.call(this),this.replaceWith="a",this.$RouterStatic=ib(qc),this.$InjectorStatic=ib(Ec),this.$browser=ib(nc),this.removeClickListener=b,this.router=this.$RouterStatic.currentRouter()}return __extends(c,a),c.prototype.initialize=function(){var a=this,b=this.element;this.removeClickListener=this.addEventListener(b,"click",function(b){b.preventDefault(),a.removeClickListener()}),this.addEventListener(b,Yd,function(c){if(1===c.buttons){var d=a.getHref();u(d)||(c.preventDefault(),p(d)||(a.$browser.url(d),a.removeClickListener(),b.addEventListener("click",a.getListener(b))))}},!1)},c.prototype.getListener=function(a){var b=this,c=function(e){e.preventDefault(),b.removeClickListener(),d(),a.removeEventListener("click",c)},d=I(function(){a.removeEventListener("click",c)},3e3);return c},c.prototype.loaded=function(){this.setHref()},c.prototype.setHref=function(){var a=this.getHref();p(a)||(this.element.href=a)},c.prototype.getHref=function(){if(!t(this.router)){var a=(this.options||{},this.options.value);if(!g(a))return"";var b=a.view;if(a.isUrl!==!0){var c=a.parameters;if(p(b))return b;b=this.$InjectorStatic.convertDependency(b),b=this.router.generate(b,c)}return this.$browser.formatUrl(b)}},c}(z);a.Link=n,Cb.control(vd,n)}(P=a.controls||(a.controls={}))}(fg=a.ui||(a.ui={}));var gg;!function(a){function c(){return new i}function d(a,b,c,d){return k._markupRegex=a.markupRegex,k._newLineRegex=a.newLineRegex,k.$ContextManagerStatic=b,k.$Parser=c,k.$TemplateControlFactory=d,k}function e(a,b,c,d){return l.$Document=a,l.$ManagerCache=b,l.$ResourcesFactory=c,l.$BindableTemplatesFactory=d,l}function f(){return n}function h(){return q}var i=function(){function a(){this.$ElementManagerFactory=ib(Zb),this.$TextManagerFactory=ib(_b),this.$CommentManagerFactory=ib(Yb),this.$ManagerCache=ib(bc)}return a.prototype.compile=function(a,b){var c,d,e,f=a.childNodes,g=!t(b),h=g?this.$ManagerCache.read(b.uid):null,i=this.$ElementManagerFactory.create;if(f=u(f)?s(a.push)?a:Array.prototype.slice.call(a):Array.prototype.slice.call(f),t(h)){c=f.length;for(var j=0;c>j;++j)e=f[j],e.nodeType===Node.ELEMENT_NODE&&(t(i(e))||this.compile(e)),d=f.length,j+=d-c,c=d}else this._compileNodes(f,h)},a.prototype._compileNodes=function(a,b){for(var c,d,e,f=a.length,g=this.$ElementManagerFactory.create,h=this.$CommentManagerFactory.create,i=this.$TextManagerFactory.create,j=0;f>j;++j){switch(c=a[j],c.nodeType){case Node.ELEMENT_NODE:d=g(c,b),t(d)||this._compileNodes(Array.prototype.slice.call(c.childNodes),d);break;case Node.TEXT_NODE:i(c,b);break;case Node.COMMENT_NODE:h(c,b)}e=a.length,j+=e-f,f=e}},a}();a.Compiler=i,a.ICompiler=c,Cb.injectable(Xb,c);var k=function(){function a(){this.isClone=!1}return a.hasMarkup=function(b){return a._markupRegex.test(b)},a.findMarkup=function(b){var c,d,e,f,g=[],h=a._wrapExpression,i=a.$Parser;for(b=b.replace(a._newLineRegex,"");-1!==(c=b.indexOf(He))&&-1!==(d=b.indexOf(Ie));){for(0!==c&&g.push(h(b.slice(0,c)));"}"===b[++d];);e=b.slice(c+2,d-2),"="===e[0]?(f=i.parse(e.slice(1).trim()),f.oneTime=!0,g.push(f)):g.push(i.parse(e.trim())),b=b.slice(d)}return c>-1&&d>=0?g.push(h(b.slice(d))):""!==b&&g.push(h(b)),g},a.build=function(b,c){for(var d,e,f="",h=b.length,i={},j=a.$TemplateControlFactory.evaluateExpression,k=0;h>k;++k){if(d=b[k],e=j(d,c,i),g(e))try{f+=JSON.stringify(e,null,4)}catch(l){t(l.description)||(l.description="Cannot stringify object: "+l.description),l.message="Cannot stringify object: "+l.message;var m=ib(Rb);m.warn(l,m.PARSE)}else t(e)||(f+=e);d.oneTime&&!u(e)&&(b[k]=a._wrapExpression(e))}return f},a.observeExpressions=function(b,c,d){for(var e,f,g,h,i,j,k=a.__findUniqueIdentifiers(b),l=k.identifiers,m=k.oneTimeIdentifiers,n={listener:d,uid:c.uid};l.length>0;)f=a.__getObservationDetails(l.pop(),c),g=f.manager,t(g)||g.observe(f.absoluteIdentifier,n);for(;m.length>0;)e=m.pop(),f=a.__getObservationDetails(e,c),g=f.manager,t(g)||f.isDefined||(h=f.absoluteIdentifier,i=g.observe(h,n),j=g.observe(h,{uid:c.uid,listener:function(){i(),j()}}))},a._wrapExpression=function(a){return{evaluate:function(){return a},identifiers:[],aliases:[],expression:a}},a.__findUniqueIdentifiers=function(a){var b,c=a.length;if(1===c)return b=a[0],b.oneTime?{identifiers:[],oneTimeIdentifiers:b.identifiers.slice(0)}:{identifiers:b.identifiers.slice(0),oneTimeIdentifiers:[]};for(var d,e,f,g,h,i={},j={},k=[],l=[],m=0;c>m;++m)for(b=a[m],h=b.oneTime,d=b.identifiers,g=d.length,f=0;g>f;++f)if(e=d[f],h){if(i[e]===!0)continue;j[e]||(j[e]=!0,l.push(e))}else i[e]||(i[e]=!0,k.push(e)),j[e]===!0&&(j[e]=!1,l.splice(l.indexOf(e),1));return{identifiers:k,oneTimeIdentifiers:l}},a.__getObservationDetails=function(b,c){var d,e=a.$ContextManagerStatic,f=b.split("."),g="",h=!1;if("@"===b[0]){var i,j={},k=f.shift().slice(1);f.length>0&&(g="."+f.join(".")),i=j[k],t(i)&&(i=j[k]=c.findResource(k)),t(i)||t(i.resource)||i.resource.type!==ef||(d=e.getManager(j[k].control),g="resources."+k+".value"+g)}else h=!u(e.getContext(c.context,f)),h||u(e.getContext(c,f))?(d=e.getManager(dg.getRootControl(c)),g=c.absoluteContextPath+"."+b):d=null;return{absoluteIdentifier:g,manager:d,isDefined:h}},a.prototype.initialize=function(a,b){this.nodeMap=a,this.parent=b,t(b)||(this.isClone=b.isClone,b.children.push(this))},a.prototype.getParentControl=function(){for(var a,b=this.parent;t(a)&&!t(b);)a=b.getUiControl(),b=b.parent;return a},a.prototype.clone=function(){return 1},a.prototype.bind=function(){},a}();a.NodeManager=k,a.INodeManagerStatic=d,Cb.injectable($b,d,[Tb,Wb,Sb,lc],Je);var l=function(a){function b(){a.apply(this,arguments),this.$Promise=ib(Ib),this.$Compiler=ib(Xb),this.$ContextManagerStatic=ib(Wb),this.$CommentManagerFactory=ib(Yb),this.$ControlFactory=ib(Kb),this.$TemplateControlFactory=ib(lc),this.$BindableTemplatesFactory=ib(fc),this.children=[],this.type="element",this.replace=!1,this.hasOwnContext=!1}return __extends(b,a),b.create=function(a,c){var d,e=a.nodeName.toLowerCase(),f=e,g=Kf[e]||Lf[e],h=!0,i=!1;if(t(g)&&(a.hasAttribute("plat-control")?(e=a.getAttribute("plat-control").toLowerCase(),g=Kf[e]||Lf[e],h=!1):a.hasAttribute("data-plat-control")&&(e=a.getAttribute("data-plat-control").toLowerCase(),g=Kf[e]||Lf[e],h=!1)),!t(g)){var j=g.inject(),k=b.locateResources(a);d={control:j,resourceElement:k,nodeName:e,expressions:[],injector:g},i=!0,h&&a.setAttribute("plat-control",e);var l=j.replaceWith,m="any"===l&&h;if(!p(l)&&("any"!==l||m)&&l.toLowerCase()!==f){m&&(l="div");var n=b.$Document.createElement(l);n.nodeType===Node.ELEMENT_NODE&&(a=Y(a,n.cloneNode(!0)))}}var o=b._collectAttributes(a.attributes),q=new b;return o.element=a,o.uiControlNode=d,q.initialize(o,c),o.hasControl||i?(q.setUiControlTemplate(),i?null:q):(q.bind=function(){return[]},q)},b.locateResources=function(a){for(var b,c=Array.prototype.slice.call(a.childNodes);c.length>0;)if(b=c.shift(),"plat-resources"===b.nodeName.toLowerCase())return a.removeChild(b);return null},b.clone=function(a,c,d,e,f){t(f)&&(f=b._cloneNodeMap(a.nodeMap,d,c.getUiControl()||c.getParentControl(),e));var g=new b,h=!t(e);return g.nodeMap=f,g.parent=c,t(c)||c.children.push(g),g.replace=a.replace,g.replaceNodeLength=a.replaceNodeLength,g.hasOwnContext=a.hasOwnContext,g.isClone=!0,f.hasControl||h||(g.bind=function(){return[]}),h&&b.$ManagerCache.put(e.uid,g),g},b.cloneUiControl=function(a,c){var d=a.uiControlNode;if(!t(d)&&!t(d.injector)){var e=d.control,f=d.injector.inject(),g=b.$ResourcesFactory.getInstance(),h=ib(ec);return f.parent=c,c.controls.push(f),f.controls=[],h.initialize(f,a.attributes),f.attributes=h,g.initialize(f,e.resources),f.resources=g,b.$ResourcesFactory.addControlResources(f),t(e.innerTemplate)||(f.innerTemplate=e.innerTemplate.cloneNode(!0)),f.type=e.type,f.bindableTemplates=b.$BindableTemplatesFactory.create(f,e.bindableTemplates),f.replaceWith=e.replaceWith,f}},b.createAttributeControls=function(a,c,d,e,f){var g,h=a.nodes,i=f===!0?e:a.element;if(j(i)){if(i.nodeType===Node.DOCUMENT_FRAGMENT_NODE)return f===!0?b._copyAttributeNodes(h):[];g=i.attributes}var k,l,n,o,p,q,u=a.attributes,v=[],w=h.length;for(q=0;w>q;++q)l=h[q],p=l.nodeName,n=l.injector,o=null,t(n)||(o=n.inject(),l.control=o,o.parent=c,o.element=i,k=ib(ec),k.initialize(o,u),o.attributes=k,o.type=p,m(o.uid)||(o.uid=J(Hc)),o.templateControl=d),f===!0&&(v.push({control:o,expressions:l.expressions,node:g?g.getNamedItem(p)||g.getNamedItem("data-"+p):null,nodeName:p,injector:n}),t(o)||(t(c)||c.controls.push(o),s(o.initialize)&&o.initialize()));if(!f)for(h.sort(function(a,b){var c=a.control,d=b.control;if(t(c))return 1;if(t(d))return-1;var e=r(c.priority)?c.priority:0,f=r(d.priority)?d.priority:0;return f-e}),q=0;w>q;++q)l=h[q],o=l.control,t(o)||(t(c)||c.controls.push(o),s(o.initialize)&&o.initialize());return v},b.getInstance=function(){return new b},b._collectAttributes=function(a){for(var b,c,d,e,f,g,h,i,j=[],l=k.hasMarkup,m=k.findMarkup,n=k.$Parser,o=(k.build,!1),p=a.length,q={},r=0;p>r;++r){if(b=a[r],d=b.value,c=b.name.replace(/^data-/i,"").toLowerCase(),i=Kf[c]||Lf[c],"plat-context"===c){if(""!==d){if(e=n.parse(d),1!==e.identifiers.length){var s=ib(Rb);s.warn("Incorrect plat-context: "+d+", must contain a single identifier.",s.COMPILE)}f=e.identifiers[0]}}else"plat-control"!==c&&(g=l(d),h=g?m(d):[],o||!g&&t(i)||(o=!0),j.push({control:null,node:b,nodeName:c,expressions:h,injector:i}));q[K(c)]=d}return{element:null,attributes:q,nodes:j,childContext:f,hasControl:o}},b._copyAttributeNodes=function(a){for(var b,c=[],d=a.length,e=0;d>e;++e)b=a[e],c.push({expressions:b.expressions,nodeName:b.nodeName});return c},b._cloneNode=function(a,b,c){return{control:c,injector:a.injector,expressions:a.expressions,node:b,nodeName:a.nodeName}},b._cloneNodeMap=function(a,c,d,e){var f=a.hasControl,g={attributes:a.attributes,childContext:a.childContext,nodes:[],element:c,uiControlNode:t(a.uiControlNode)?null:b._cloneNode(a.uiControlNode,c,e),hasControl:f};return f&&(g.nodes=b.createAttributeControls(a,d,e,c,!0)),g},b.prototype.clone=function(a,c,d){var e,f,g,h,i=this.replace,j=this.children,k=t(d)?null:d.uiControlNode.control,l=!t(k);if(l||(k=b.cloneUiControl(this.nodeMap,c.getUiControl()||c.getParentControl()),l=!t(k)),i){var m=a.parentNode.childNodes,n=Array.prototype,o=n.indexOf.call(m,a);e=n.slice.call(m,o+1,o+this.replaceNodeLength),f=b.clone(this,c,null,k,d),k.elementNodes=e,k.startNode=a,k.endNode=e.pop(),g=j.shift(),h=j.shift(),g.clone(k.startNode,f),h.clone(k.endNode,f),s(k.initialize)&&k.initialize()}else e=Array.prototype.slice.call(a.childNodes),f=b.clone(this,c,a,k,d),d=f.nodeMap,l&&(k.element=a,s(k.initialize)&&k.initialize());f.hasOwnContext&&H(function(){f.observeRootContext(k,f.bindAndLoad)});for(var p=j.length,q=0,r=0;p>r;++r)q+=j[r].clone(e[q],f);return i?(j.unshift(h),j.unshift(g),q+2):1},b.prototype.initialize=function(c,d,e){a.prototype.initialize.call(this,c,d);var f,g=c.uiControlNode,h=!t(g);h&&(this._populateUiControl(),f=g.control,this.hasOwnContext=f.hasOwnContext),c.hasControl&&b.createAttributeControls(c,this.getParentControl(),f),!e&&h&&s(f.initialize)&&f.initialize()},b.prototype.bind=function(){var a=this,b=this.nodeMap,c=this.getParentControl(),d=b.uiControlNode,e=[];if(!t(d)){var f,h=d.control,i=b.childContext,j=this.$ContextManagerStatic.getManager,k=t(c)?_e:c.absoluteContextPath,l=this.$TemplateControlFactory,m=!h.hasOwnContext;if(e.push(h),m&&!t(i))if("@"===i[0]){var n,o=i.split("."),p=o.shift().slice(1),q=l.findResource(h,p);if(g(q)){var r=q.resource;g(r)&&r.type===ef?(k="resources."+p+".value"+(o.length>0?"."+o.join("."):""),h.root=q.control):(n=ib(Rb),n.warn('Only resources of type "observable" can be set as context.',n.CONTEXT))}else n=ib(Rb),n.warn("Could not set the context of "+h.type+' with the resource specified as "'+i+'".',n.CONTEXT)}else k+="."+i;h.root=this.$ControlFactory.getRootControl(h)||h,f=j(h.root);var s=!1;m?(h.context=f.getContext(k.split(".")),s=u(h.context)):k=_e,s?this.contextPromise=new this.$Promise(function(b){var c=f.observe(k,{uid:h.uid,listener:function(d){u(d)||(c(),h.context=d,a._beforeLoad(h,k),b())}})}):this._beforeLoad(h,k)}return this._observeControlIdentifiers(b.nodes,c,e),e},b.prototype.setUiControlTemplate=function(a){var b=this,c=this.nodeMap.uiControlNode;if(!t(c)){var d=c.control;return void(this.templatePromise=this.$TemplateControlFactory.determineTemplate(d,a).then(function(a){b.templatePromise=null,b._initializeControl(d,a.cloneNode(!0))},function(a){if(b.templatePromise=null,t(a)){var c=a;b.$BindableTemplatesFactory.isBoundControl(d)&&(c=Q(d.element.childNodes)),b._initializeControl(d,c)}else H(function(){var b=ib(Rb);b.fatal(a,b.COMPILE)})}))}t(this.parent)&&this.bindAndLoad()},b.prototype.getUiControl=function(){var a=this.nodeMap.uiControlNode;if(!t(a))return a.control},b.prototype.fulfillTemplate=function(){var a=this;return t(this.templatePromise)?this._fulfillChildTemplates():this.templatePromise.then(function(){return a._fulfillChildTemplates()})},b.prototype.bindAndLoad=function(){var a,b=this,c=this.bind();return a=o(this.contextPromise)?this.contextPromise.then(function(){return b._bindChildren()}):this._bindChildren(),a.then(function(){return b._loadControls(c,b.getUiControl())}).catch(function(a){H(function(){var b=ib(Rb);b.fatal(a,b.BIND)})})},b.prototype.observeRootContext=function(a,b){var c=this;return b=b.bind(this),t(a.context)?void(this.loadedPromise=new this.$Promise(function(d){var e=c.$ContextManagerStatic.getManager(a).observe(_e,{listener:function(){e(),b().then(d)},uid:a.uid})}).catch(function(a){H(function(){var b=ib(Rb);b.fatal(a,b.BIND)})})):void(this.loadedPromise=b())},b.prototype._beforeLoad=function(a,c){var d=this.$ContextManagerStatic.getManager(a.root),e=this.$TemplateControlFactory;if(a.zCC__plat=d.observe(c,{uid:a.uid,listener:function(b){a.context=b}}),e.setAbsoluteContextPath(a,c),e.setContextResources(a),b.$ResourcesFactory.bindResources(a.resources),!this.replace){var f=a.element;!t(f)&&s(f.removeAttribute)&&f.removeAttribute(Qd)}},b.prototype._bindChildren=function(){for(var a,b=this.children,c=b.length,d=[],e=0;c>e;++e)a=b[e],a.hasOwnContext?d.push(a.loadedPromise):u(a.children)?a.bind():d.push(a.bindAndLoad());return this.$Promise.all(d)},b.prototype._observeControlIdentifiers=function(a,b,c){for(var d,e,f=a.length,g=[],h=this._attributeChanged,i=!t(b),j=0;f>j;++j)d=a[j],e=d.control,i&&d.expressions.length>0&&(k.observeExpressions(d.expressions,b,h.bind(this,d,b,c)),g.push(d)),t(e)||c.push(e);for(f=g.length,j=0;f>j;++j)this._attributeChanged(g[j],b,c)},b.prototype._loadControls=function(a,b){var c,d,e,f,g=a.length,h=this.$ControlFactory.load,i=t(b);if(i)f=0;else{var j=b.priority;e=r(j)?j:100,f=1}for(;g>f;++f)c=a[f],c.templateControl=b,!i&&e>c.priority&&(i=!0,d=h(b)),h(c);return i||(d=h(b)),d},b.prototype._fulfillAndLoad=function(){var a=this;return this.fulfillTemplate().then(function(){return a.bindAndLoad()}).catch(function(a){H(function(){var b=ib(Rb);b.fatal(a,b.BIND)})})},b.prototype._populateUiControl=function(){var a=this.nodeMap,c=this.getParentControl(),d=a.uiControlNode,e=d.control,f=e.uid,h=e.resources,i=a.element,j=Array.prototype.slice.call(i.childNodes),k=ib(ec),l=this.replace=null===e.replaceWith||""===e.replaceWith;m(f)||(f=e.uid=J(Hc)),b.$ManagerCache.put(f,this),t(c)||e.parent===c||(c.controls.push(e),e.parent=c),s(i.setAttribute)&&i.setAttribute(Qd,""),e.element=i,e.controls=[],k.initialize(e,a.attributes),e.attributes=k,g(h)&&s(h.add)?h.add(d.resourceElement):(h=b.$ResourcesFactory.getInstance(),h.initialize(e,d.resourceElement),e.resources=h),b.$ResourcesFactory.addControlResources(e),e.type=d.nodeName,e.bindableTemplates=e.bindableTemplates||b.$BindableTemplatesFactory.create(e),!(j.length>0)||p(e.templateString)&&p(e.templateUrl)||(e.innerTemplate=Q(j)),l&&this._replaceElement(e,a)},b.prototype._replaceElement=function(a,c){var d=c.element,e=d.parentNode,f=b.$Document,g=a.type,h=a.uid,i=a.startNode=f.createComment(g+" "+h+Se),j=a.endNode=f.createComment(g+" "+h+Te),k=this.$CommentManagerFactory.create;k(i,this),k(j,this),e.insertBefore(i,d),e.insertBefore(j,d.nextSibling),a.elementNodes=X(d),a.element=c.element=null},b.prototype._initializeControl=function(a,c){var d,e=this.nodeMap.element,f=this.replace;if(!t(c)){var g=b.locateResources(c);t(g)||a.resources.add(b.$ResourcesFactory.parseElement(g)),f?(d=a.endNode,a.elementNodes=Array.prototype.slice.call(c.childNodes),W(d.parentNode,c,d)):W(e,c,e.lastChild)}if(s(a.setTemplate)&&a.setTemplate(),f){this.$Compiler.compile(a.elementNodes,a);var h=a.startNode,i=h.parentNode,j=Array.prototype.slice.call(i.childNodes);d=a.endNode,a.elementNodes=j.slice(j.indexOf(h)+1,j.indexOf(d)),this.replaceNodeLength=a.elementNodes.length+2}else this.$Compiler.compile(e,a);a.hasOwnContext&&!this.isClone?this.observeRootContext(a,this._fulfillAndLoad):t(a.parent)&&this._fulfillAndLoad()},b.prototype._attributeChanged=function(a,b,c){for(var d,e,f=c.length,g=K(a.nodeName),h=k.build(a.expressions,b),i=0;f>i;++i)d=c[i].attributes,e=d[g],d[g]=h,d._attributeChanged(g,h,e);this.replace||(a.node.value=h)},b.prototype._fulfillChildTemplates=function(){for(var a,b=this.children,c=b.length,d=[],e=0;c>e;++e)a=b[e],u(a.children)||d.push(a.fulfillTemplate());return this.$Promise.all(d).catch(function(a){H(function(){var b=ib(Rb);b.fatal(a,b.COMPILE)})})},b}(k);a.ElementManager=l,a.IElementManagerFactory=e,Cb.injectable(Zb,e,[Mb,bc,kc,fc],Me);var n=function(a){function c(){a.apply(this,arguments),this.type="text"}return __extends(c,a),c.create=function(a,d){var e=a.nodeValue,f=new c;if(k.hasMarkup(e)){var g=k.findMarkup(e),h={nodes:[{node:a,expressions:g}]};return f.initialize(h,d),f}return f.initialize(null,d),f.bind=b,f},c._cloneNodeMap=function(a,b){var c=a.nodes[0],d={nodes:[{expressions:c.expressions,nodeName:c.nodeName,node:b}]};return d},c._clone=function(a,d,e){var f=a.nodeMap,g=new c;return t(f)?(g.initialize(null,e),g.bind=b):g.initialize(c._cloneNodeMap(f,d),e),g},c.prototype.clone=function(a,b){return c._clone(this,a,b),1},c.prototype.bind=function(){var a=this.getParentControl(),b=this.nodeMap.nodes[0],c=b.node,d=b.expressions;k.observeExpressions(b.expressions,a,this._setText.bind(this,c,a,d)),this._setText(c,a,d)},c.prototype._setText=function(a,b,c){a.nodeValue=k.build(c,b||{})},c}(k);a.TextManager=n,a.ITextManagerFactory=f,Cb.injectable(_b,f,null,Me);var q=function(a){function b(){a.apply(this,arguments),this.type="comment"}return __extends(b,a),b.create=function(a,c){var d=new b;return d.initialize({nodes:[{node:a}]},c),d},b.prototype.clone=function(a,c){return b.create(a,c),1},b}(k);a.CommentManager=q,a.ICommentManagerFactory=h,Cb.injectable(Yb,h,null,Me)}(gg=a.processing||(a.processing={}));var hg;!function(a){function c(){return new w}function d(a){return a.history}function f(a){return F.$Regex=a,F}function h(){return new F}function i(){return new G}function j(){return new I}function k(){return new K}function l(){return new M}function n(){return Q}function o(){return new Q}function q(){return new R}function s(){var a=new U;return a.initialize(),a}function u(){return U}var w=function(){function a(){this.$InjectorStatic=ib(Ec),this.$browserConfig=ib(oc),this.$browser=ib(nc),this.$EventManagerStatic=ib(Pb),this.$window=ib(sc),this.$history=plat.acquire(Fc),this.uid=J(Hc),this.removeUrlListener=b,this.ignoreOnce=!1,this.ignored=!1,this.backNavigate=!1}return a.prototype.initialize=function(b){this.router=b,b.isRoot&&(a.root=this,this._observeUrl())},a.prototype.navigate=function(a,b){b=g(b)?b:{};var c;c=b.isUrl?a:this.generate(a,b.parameters,b.query),this.$browser.url(c,b.replace)},a.prototype.goBack=function(b){var c=this;b=g(b)?b:{};var d=Number(b.length);r(d)||(d=1);var e=a.root;e!==this&&e.goBack(b);var f=this.$history,h=this.$browser.url();this.backNavigate=!0,f.go(-d),setTimeout(function(){c.ignored||h!==c.$browser.url()||c.$EventManagerStatic.dispatch(Kd,c,c.$EventManagerStatic.DIRECT)},50)},a.prototype.dispose=function(){this.removeUrlListener(),L(this,"router")},a.prototype._observeUrl=function(){var a=this;if(g(this.router)){var b,c,d=(this.$browserConfig,this.$EventManagerStatic);this.previousUrl=this.$browser.url(),d.dispose(this.uid),d.on(this.uid,Pd,function(){var b=ib(Nb);b.initialize("backButtonPressed",a),d.sendEvent(b),b.defaultPrevented||a.goBack()}),d.on(this.uid,Md,function(d,e){return a.ignoreOnce?(a.ignoreOnce=!1,void(a.ignored=!0)):(a.ignored=!1,c=a.backNavigate,a.backNavigate=!1,void H(function(){b=a.previousUrl,a.router.navigate(e.pathname,e.query).then(function(){a.previousUrl=e.pathname}).catch(function(){a.ignoreOnce=!0,a.previousUrl=b,a.$browser.url(b,!c)})}))})}},a.prototype.generate=function(a,b,c){return t(this.router)?void 0:p(a)?a:(a=this.$InjectorStatic.convertDependency(a),this.router.generate(a,b,c))},a}();a.Navigator=w,a.INavigatorInstance=c,Cb.injectable(Vb,c,null,Le),a.History=d,Cb.injectable(Fc,d,[sc]);var x,y=["/",".","*","+","?","|","(",")","[","]","{","}","\\"],z=new RegExp("(\\"+y.join("|\\")+")","g"),A={},B={},D={},F=function(){function a(){this.type=Ce,this.name="",this.regex=""
}return a.parse=function(b,c,d){if(!(m(b)&&v(c)&&g(d)))return[];"/"===b[0]&&(b=b.slice(1));for(var e,f,h,i=b.split("/"),j=i.length,k=a.__findSegment,l=[],n=a.$Regex,o=0;j>o;++o)e=i[o],""===e?(g(x)||(x=ib(wc)),l.push(x)):(h=e.match(n.dynamicSegmentsRegex))?(f=h[1],l.push(k(f,zc,A)),c.push(f),d.dynamics++):(h=e.match(n.splatSegmentRegex))?(f=h[1],l.push(k(f,Ac,B)),c.push(f),d.splats++):(l.push(k(e,xc,D)),d.statics++);return l},a.__findSegment=function(a,b,c){var d=c[a];return g(d)||(d=c[a]=ib(b),d.initialize(a)),d},a.prototype.initialize=function(a){this.name=a},a.prototype.reduceCharacters=function(a,b){return g(this._specification)&&(b=a(b,this._specification)),b},a.prototype.generate=function(){return this.name},a}();a.BaseSegment=F,a.IBaseSegmentFactory=f,plat.register.injectable(vc,f,[Tb],Me),a.IBaseSegmentInstance=h,plat.register.injectable(wc,h,null,Le);var G=function(a){function b(){a.apply(this,arguments),this.type=Ee}return __extends(b,a),b.prototype.initialize=function(b){a.prototype.initialize.call(this,b),this.regex=this.name.replace(z,"\\$1")},b.prototype.reduceCharacters=function(a,b){for(var c=this.name,d=c.length,e=b,f=0;d>f;++f)e=a(e,{validCharacters:c[f]});return e},b}(F);a.StaticSegment=G,a.IStaticSegmentInstance=i,plat.register.injectable(xc,i,null,Le);var I=function(a){function b(){a.apply(this,arguments),this.type=De}return __extends(b,a),b.prototype.generate=function(a){return g(a)?a[this.name]:void 0},b}(F);a.VariableSegment=I,a.IVariableSegmentInstance=j,plat.register.injectable(yc,j,null,Le);var K=function(a){function b(){a.apply(this,arguments),this.type=Fe,this.regex="(.+)",this._specification={invalidCharacters:"",repeat:!0}}return __extends(b,a),b}(I);a.SplatSegment=K,a.ISplatSegmentInstance=k,plat.register.injectable(Ac,k,null,Le);var M=function(a){function b(){a.apply(this,arguments),this.type=Ge,this.regex="([^/]+)",this._specification={invalidCharacters:"/",repeat:!0}}return __extends(b,a),b}(I);a.DynamicSegment=M,a.IDynamicSegmentInstance=l,plat.register.injectable(zc,l,null,Le);var Q=function(){function a(){this.initialize()}return a.compile=function(a,b){return a.reduceCharacters(function(a,b){return a.add(b)},b)},a.link=function(a,b){for(var c,d,e,f,g,h=a.delegates,i=a.regex,j=h.length,k=b.match(i),l=1,m=[],n=0;j>n;++n){for(g=h[n],c=g.names,d={},e=0,f=c.length;f>e;++e)d[c[e]]=k[l++];m.push({delegate:g.delegate,parameters:d,isDynamic:f>0})}return m},a.recognize=function(a,b){for(var c,d=[],e=b.length,f=0;e>f;++f)c=b[f],d=d.concat(c.match(a));return d},a.sort=function(a){if(!v(a))return a;var b,c,d,e,f,g,h,i;return a.sort(function(a,j){if(b=a.types,f=j.types,c=b.splats,g=f.splats,c!==g)return c-g;if(d=b.statics,e=b.dynamics,h=f.statics,i=f.dynamics,c>0){if(d!==h)return h-d;if(e!==i)return i-e}return e!==i?e-i:d!==h?h=d:0})},a.prototype.initialize=function(a){this.specification=a,this.nextStates=[]},a.prototype.add=function(b){var c=this._find(b);return g(c)?c:(c=new a,c.initialize(b),this.nextStates.push(c),b.repeat&&c.nextStates.push(c),c)},a.prototype.match=function(a){var b,c,d=[];return this._someChildren(function(e){return b=e.specification,c=b.validCharacters,m(c)&&c.indexOf(a)>-1?void d.push(e):(c=b.invalidCharacters,void(m(c)&&-1===c.indexOf(a)&&d.push(e)))}),d},a.prototype._find=function(a){var b,c,d=a.validCharacters,e=a.invalidCharacters;return this._someChildren(function(a){return b=a.specification,b.validCharacters===d&&b.invalidCharacters===e?(c=a,!0):void 0}),c},a.prototype._someChildren=function(a){for(var b=this.nextStates,c=b.length,d=0;c>d;++d)if(a(b[d])===!0)return!0},a}();a.State=Q,a.IStateStatic=n,plat.register.injectable(Bc,n,null,Je),a.IStateInstance=o,plat.register.injectable(Cc,o,null,Le);var R=function(){function a(){this.$BaseSegmentFactory=ib(vc),this.$StateStatic=ib(Bc),this._rootState=ib(Cc),this._namedRoutes={}}return a.prototype.register=function(a,b){if(v(a)){for(var c,d=this._rootState,e=a.length,f=["^"],h={statics:0,dynamics:0,splats:0},i=[],j=[],k=0;e>k;++k)c=this._parse(a[k],i,h),j=j.concat(c),d=this._compile(c,d,f);d=this._finalize(d,f),d.delegates=i,d.regex=new RegExp(f.join("")+"$"),d.types=h,g(b)&&m(b.name)&&(this._namedRoutes[b.name]={segments:j,delegates:i})}},a.prototype.recognize=function(a){var b=!1,c=[];return a=this._addLeadingSlash(a),b=this._hasTrailingSlash(a),b&&(a=a.substr(0,a.length-1)),c=this._filter(this._findStates(a)),this._link(c[0],a,b)},a.prototype.generate=function(a,b){var c,d,e=this._namedRoutes[a],f="";if(g(e)){c=e.segments,d=c.length;for(var h=0;d>h;h++){var i=c[h];i.type!==Ce&&(f+="/",f+=i.generate(b))}return f=this._addLeadingSlash(f)}},a.prototype.delegatesFor=function(a){var b,c=this._namedRoutes[a];return g(c)?(b=c.delegates,v(b)?b.slice(0):[]):[]},a.prototype.exists=function(a){return g(this._namedRoutes[a])},a.prototype._finalize=function(a,b){return a===this._rootState&&(a=a.add({validCharacters:"/"}),b.push("/")),a},a.prototype._parse=function(a,b,c){var d=[];return b.push({delegate:a.delegate,names:d}),this.$BaseSegmentFactory.parse(a.pattern,d,c)},a.prototype._compile=function(a,b,c){for(var d,e=a.length,f=this.$StateStatic.compile,g=0;e>g;++g)d=a[g],d.type!==Ce&&(b=b.add({validCharacters:"/"}),b=f(d,b),c.push("/"+d.regex));return b},a.prototype._addLeadingSlash=function(a){return a=decodeURI(a),"/"!==a[0]&&(a="/"+a),a},a.prototype._hasTrailingSlash=function(a){var b=a.length;return b>1&&"/"===a[b-1]},a.prototype._findStates=function(a){for(var b=[this._rootState],c=this.$StateStatic.recognize,d=a.length,e=0;d>e&&(b=c(a[e],b),0!==b.length);++e);return b},a.prototype._filter=function(a){for(var b,c=a.length,d=[],e=0;c>e;++e)b=a[e],v(b.delegates)&&d.push(b);return this.$StateStatic.sort(d)},a.prototype._link=function(a,b,c){return g(a)&&v(a.delegates)?(c&&this._isDynamic(a)&&(b+="/"),this.$StateStatic.link(a,b)):void 0},a.prototype._isDynamic=function(a){return"(.+)$"===a.regex.source.slice(-5)},a}();a.RouteRecognizer=R,a.IRouteRecognizerInstance=q,plat.register.injectable(Dc,q,null,Le);var S="/*childRoute",T=S.length,U=function(){function a(){this.$Promise=ib(Ib),this.resolve=this.$Promise.resolve.bind(this.$Promise),this.reject=this.$Promise.reject.bind(this.$Promise),this.$Injector=ib(Ec),this.$EventManagerStatic=ib(Pb),this.$browser=ib(nc),this.$browserConfig=ib(oc),this.recognizer=ib(Dc),this.childRecognizer=ib(Dc),this.paramTransforms={},this.queryTransforms={},this.interceptors={},this.navigating=!1,this.ports=[],this.children=[],this.isRoot=!1,this.ignoreOnce=!1,this.uid=J(Hc),this.isRoot=t(a.currentRouter()),a.currentRouter(this)}return a.currentRouter=function(b){return t(b)||(a.__currentRouter=b),a.__currentRouter},a.prototype.initialize=function(a){this.parent=a},a.prototype.addChild=function(a){return t(a)||this.children.indexOf(a)>-1?a:(a.initialize(this),this.children.push(a),a)},a.prototype.removeChild=function(a){var b=this.children,c=this.children.indexOf(a);0>c||b.splice(c,1)},a.prototype.register=function(a){var b=this,c=this.ports;if(t(a)||c.indexOf(a)>-1)return this.$Promise.resolve();if(c.push(a),g(this.currentRouteInfo)){var d=e(this.currentRouteInfo,!0);return this.canNavigateTo(d).then(function(a){return a?b.performNavigation(d):void 0})}return this.$Promise.resolve()},a.prototype.unregister=function(a){var b=this.ports,c=b.indexOf(a);0>c||(b.splice(c,1),0!==b.length||t(this.parent)||this.parent.removeChild(this))},a.prototype.configure=function(a){var b=this;if(v(a))return C(function(a){return b.configure(a)},a).then(function(){return void 0});var c=this.resolve,d=a,e=this.$Injector.convertDependency(d.view);if(e===Ze)return c();d.view=e;var f={pattern:d.pattern,delegate:d},g=d.pattern+S,h={pattern:g,delegate:{pattern:g,view:e}};return this.recognizer.register([f],{name:e}),this.childRecognizer.register([h]),this.forceNavigate()},a.prototype.param=function(a,b,c){return this._addHandler(a,b,c,this.paramTransforms)},a.prototype.queryParam=function(a,b,c){return this._addHandler(a,b,c,this.queryTransforms)},a.prototype._addHandler=function(a,b,c,d){if(c=this.$Injector.convertDependency(c),p(c)||p(b))return this;var e=d[c];g(e)||(e=d[c]={});var f=e[b];return v(f)||(f=e[b]=[]),f.push(a),this},a.prototype.intercept=function(a,b){if(b=this.$Injector.convertDependency(b),p(b))return this;var c=this.interceptors[b];return v(c)||(c=this.interceptors[b]=[]),c.push(a),this},a.prototype.navigate=function(a,b,c){var d=this,f=this.resolve,g=this.reject,h=O(b);if(c=c===!0,!m(a)||this.navigating||!c&&a===this.previousUrl)return f();var i,j,k=this.recognizer.recognize(a);if(p(k)){if(k=this.childRecognizer.recognize(a),p(k))return this.previousUrl=a,this.previousQuery=h,g();if(i=k[0],i.query=b,j=i.delegate.pattern,j=j.substr(0,j.length-T),this.previousPattern===j)return this.navigateChildren(i).then(function(){d.previousUrl=a,d.previousQuery=h})}else i=k[0],i.query=b,j=i.delegate.pattern;this.navigating=!0;var l=e(i,!0);return this.canNavigate(i).then(function(b){if(!b)throw d.navigating=!1,new Error("Not cleared to navigate");return d.previousUrl=a,d.previousQuery=h,d.performNavigation(i)}).then(function(){d.previousPattern=j,d.currentRouteInfo=l,d.navigating=!1})},a.prototype.forceNavigate=function(){var a,b=this.resolve;if(this.navigating)return b();if(this.isRoot&&p(this.previousUrl)){var c=this.$browser.urlUtils();this.previousUrl=c.pathname,a=c.query}return p(this.previousQuery)||(a=N(this.previousQuery)),p(this.previousUrl)?b():this.navigate(this.previousUrl,a,!0)},a.prototype.generate=function(a,b,c){for(var d=this,e="";!t(d)&&!d.recognizer.exists(a);)d=d.parent;if(t(d)){var f=ib(Rb);return void f.fatal("Route does not exist",f.NAVIGATION)}for(var g,h=d.recognizer.generate(a,b);!t(d=d.parent);)g=d.previousPattern,g=t(g)||"/"===g?"":g,e=g+e;return e+h+O(c)},a.prototype.navigateChildren=function(a){var b=this.resolve,c=this.getChildRoute(a);return t(c)?b():C(function(b){return b.navigate(c,a.query)},this.children).then(function(){return void 0})},a.prototype.getChildRoute=function(a){if(!t(a)){var b=a.parameters.childRoute;if(!p(b))return"/"+b}},a.prototype.performNavigation=function(a){var b=this;return this.performNavigateFrom().then(function(){return C(function(b){return b.navigateTo(a)},b.ports)}).then(function(){return b.navigateChildren(a)})},a.prototype.performNavigateFrom=function(){var a=this;return C(function(a){return a.performNavigateFrom()},this.children).then(function(){return C(function(a){return a.navigateFrom()},a.ports)}).then(function(){return void 0})},a.prototype.canNavigate=function(a){var b=this,c=this.currentRouteInfo,d=g(c)&&c.delegate.view===a.delegate.view&&c.delegate.pattern===a.delegate.pattern;return this.canNavigateFrom(d).then(function(c){return c&&b.canNavigateTo(a,d)}).then(function(a){return a})},a.prototype.callAllHandlers=function(a,b,c){{var d=this,e=this.$Promise;e.resolve.bind(e)}return this.callHandlers(this.queryTransforms[a],c).then(function(){return d.callHandlers(d.paramTransforms[a],b,c)}).then(function(){return void 0})},a.prototype.callHandlers=function(a,b,c){var d=this.resolve;return C(function(a,e){return E(function(a){return d(a(b[e],b,c))},a)},a)},a.prototype.callInterceptors=function(a){var b=this.resolve;return C(function(c){return b(c(a))},this.interceptors[a.delegate.view]).then(P)},a.prototype.canNavigateFrom=function(a){var b=this;return this.$Promise.all(this.children.reduce(function(a,b){return a.concat(b.canNavigateFrom())},[])).then(P).then(function(c){return!c||a?[c]:C(function(a){return a.canNavigateFrom()},b.ports)}).then(P)},a.prototype.canNavigateTo=function(a,b){var c=this,d=[];return this.callAllHandlers(a.delegate.view,a.parameters,a.query).then(function(){return c.callInterceptors(a)}).then(function(d){return!d||b?[d]:C(function(b){return b.canNavigateTo(a)},c.ports)}).then(P).then(function(b){if(b){var e=c.getChildRoute(a);if(p(e))d=[!0];else{var f,g;d=[],c.children.reduce(function(b,c){return f=c.childRecognizer.recognize(e),p(f)?void 0:(g=f[0],g.query=a.query,b.concat(c.canNavigateTo(g)))},d)}}else d=[b];return c.$Promise.all(d)}).then(P)},a}();a.Router=U,a.IRouter=s,plat.register.injectable(pc,s,null,Le),a.IRouterStatic=u,plat.register.injectable(qc,u)}(hg=a.routing||(a.routing={}));var ig;!function(a){var c=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype.initialize=function(){var a=K(this.type),b=this.attributes[a];p(b)||this._isPrecompiled()||(this._label=b,this._define(b))},b.prototype.dispose=function(){for(var a=this._label,b=this.parent;!u(a)&&g(b);)g(b[a])&&j(b[a].element)&&b[a].element===this.element&&L(b,a),b=b.parent},b.prototype._define=function(a){var b=this.templateControl;t(b)||(b.name=a);for(var c=this.parent,d={element:this.element,control:b};g(c);){var e=c[a];g(e)||(c[a]=d),c=c.parent}},b.prototype._isPrecompiled=function(){for(var a=this.parent;!t(a);){if(-1!==a.type.indexOf(Pe))return!0;a=a.parent}return!1},b}(eg);a.Name=c,Cb.control(Oc,c);var d=function(a){function c(){a.apply(this,arguments),this.$Parser=ib(Sb),this.$Regex=ib(Tb),this._expression=[],this._aliases=[]}return __extends(c,a),c.prototype.loaded=function(){t(this.element)||(this.attribute=K(this.type),this._setListener())},c.prototype._setListener=function(){var a=this.attributes[this.attribute];p(this.event)||p(a)||(this._parseArgs(a),this._addEventListeners())},c.prototype._addEventListeners=function(){this.addEventListener(this.element,this.event,this._onEvent,!1)},c.prototype._buildExpression=function(){var a,c,d,e,f,g=this._expression.slice(0),h=this.parent,i=(!t(h),g.shift());if(t(h)||(e=h.getResources(this._aliases),f=h.context),"@"!==i[0]){if(a=this.findProperty(i),t(a))return{fn:b,control:{},args:[]};d=a.value,c=a.control}else d=t(e)?b:e[i]||b,c=void 0;for(var j=g.length,k=[],l=this.$Parser,m=0;j>m;++m)k.push(l.parse(g[m]).evaluate(f,e));return{fn:d,control:c,args:k}},c.prototype._onEvent=function(a){var b=this._buildExpression(),c=b.fn;if(!s(c)){var d=ib(Rb);return void d.warn("Cannot find registered event method "+this._expression[0]+" for control: "+this.type,d.BIND)}c.apply(b.control,b.args.concat(a))},c.prototype._findAliases=function(a){for(var b,c,d=a.length,e={},f=this.$Regex,g=0;d>g;++g)b=a[g].trim(),"@"===b[0]&&(c=f.aliasRegex.exec(b),e[t(c)?b.slice(1):c[0]]=!0);return Object.keys(e)},c.prototype._parseArgs=function(a){if(!p(a)){var b=this.$Regex.argumentRegex.exec(a);t(b)?this._expression.push(a):this._expression=[a.slice(0,b.index)].concat(""!==b[1]?b[1].split(","):[]),this._aliases=this._findAliases(this._expression)}},c}(eg);a.SimpleEventControl=d;var e=function(a){function b(){a.apply(this,arguments),this.event=Yd}return __extends(b,a),b}(d);a.Tap=e;var f=function(a){function b(){a.apply(this,arguments),this.event="blur"}return __extends(b,a),b}(d);a.Blur=f;var h=function(a){function b(){a.apply(this,arguments),this.event="change"}return __extends(b,a),b}(d);a.Change=h;var i=function(a){function b(){a.apply(this,arguments),this.event="copy"}return __extends(b,a),b}(d);a.Copy=i;var k=function(a){function b(){a.apply(this,arguments),this.event="cut"}return __extends(b,a),b}(d);a.Cut=k;var l=function(a){function b(){a.apply(this,arguments),this.event="paste"}return __extends(b,a),b}(d);a.Paste=l;var n=function(a){function b(){a.apply(this,arguments),this.event=Zd}return __extends(b,a),b}(d);a.DblTap=n;var w=function(a){function b(){a.apply(this,arguments),this.event="focus"}return __extends(b,a),b}(d);a.Focus=w;var x=function(a){function b(){a.apply(this,arguments),this.event=$d}return __extends(b,a),b}(d);a.TouchStart=x;var y=function(a){function b(){a.apply(this,arguments),this.event=_d}return __extends(b,a),b}(d);a.TouchEnd=y;var z=function(a){function b(){a.apply(this,arguments),this.event=ae}return __extends(b,a),b}(d);a.TouchMove=z;var A=function(a){function b(){a.apply(this,arguments),this.event=be}return __extends(b,a),b}(d);a.TouchCancel=A;var B=function(a){function b(){a.apply(this,arguments),this.event=ce}return __extends(b,a),b}(d);a.Hold=B;var C=function(a){function b(){a.apply(this,arguments),this.event=de}return __extends(b,a),b}(d);a.Release=C;var D=function(a){function b(){a.apply(this,arguments),this.event=ee}return __extends(b,a),b}(d);a.Swipe=D;var E=function(a){function b(){a.apply(this,arguments),this.event=fe}return __extends(b,a),b}(d);a.SwipeLeft=E;var F=function(a){function b(){a.apply(this,arguments),this.event=ge}return __extends(b,a),b}(d);a.SwipeRight=F;var G=function(a){function b(){a.apply(this,arguments),this.event=he}return __extends(b,a),b}(d);a.SwipeUp=G;var I=function(a){function b(){a.apply(this,arguments),this.event=ie}return __extends(b,a),b}(d);a.SwipeDown=I;var J=function(a){function b(){a.apply(this,arguments),this.event=je}return __extends(b,a),b}(d);a.Track=J;var M=function(a){function b(){a.apply(this,arguments),this.event=ke}return __extends(b,a),b}(d);a.TrackLeft=M;var N=function(a){function b(){a.apply(this,arguments),this.event=le}return __extends(b,a),b}(d);a.TrackRight=N;var O=function(a){function b(){a.apply(this,arguments),this.event=me}return __extends(b,a),b}(d);a.TrackUp=O;var P=function(a){function b(){a.apply(this,arguments),this.event=ne}return __extends(b,a),b}(d);a.TrackDown=P;var Q=function(a){function b(){a.apply(this,arguments),this.event=oe}return __extends(b,a),b}(d);a.TrackEnd=Q;var R=function(a){function b(){a.apply(this,arguments),this.event="submit"}return __extends(b,a),b.prototype._onEvent=function(b){this.element.hasAttribute("action")||b.preventDefault(),a.prototype._onEvent.call(this,b)},b}(d);a.Submit=R;var S=function(b){function c(){b.apply(this,arguments),this.$Compat=ib(Jb),this.event="input"}return __extends(c,b),c.prototype._addEventListeners=function(){var b,c=this,d=this.element,e=this.$Compat,f=!1,g="input",h=function(a){f||c._onEvent(a)},i=function(a){s(b)||(b=H(function(){h(a),b=null}))};u(e.ANDROID)&&(this.addEventListener(d,"compositionstart",function(){return f=!0},!1),this.addEventListener(d,"compositionend",function(a){f=!1,h(a)},!1)),this.addEventListener(d,g,h,!1),this.addEventListener(d,"change",h,!1),e.hasEvent(g)||(this.addEventListener(d,"keydown",function(b){var c=b.keyCode,d=a.KeyCodes;c===d.lwk||c===d.rwk||c>=d.shift&&c<=d.escape||c>d.space&&c<=d.down||i(b)},!1),this.addEventListener(d,"cut",i,!1),this.addEventListener(d,"paste",i,!1))},c}(d);a.React=S,Cb.control(Wc,e),Cb.control(Xc,f),Cb.control(Yc,h),Cb.control(Zc,i),Cb.control($c,k),Cb.control(_c,l),Cb.control(ad,n),Cb.control(bd,w),Cb.control(cd,R),Cb.control(dd,x),Cb.control(ed,y),Cb.control(fd,z),Cb.control(gd,A),Cb.control(hd,B),Cb.control(id,C),Cb.control(jd,D),Cb.control(kd,E),Cb.control(ld,F),Cb.control(md,G),Cb.control(nd,I),Cb.control(od,J),Cb.control(pd,M),Cb.control(qd,N),Cb.control(rd,O),Cb.control(sd,P),Cb.control(td,Q),Cb.control(ud,S),a.KeyCodes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,pause:19,"break":19,"caps lock":20,escape:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,"left arrow":37,up:38,"up arrow":38,right:39,"right arrow":39,down:40,"down arrow":40,insert:45,"delete":46,0:48,zero:48,")":48,"right parenthesis":48,1:49,one:49,"!":49,exclamation:49,"exclamation point":49,2:50,two:50,"@":50,at:50,3:51,three:51,"#":51,"number sign":51,hash:51,pound:51,4:52,four:52,$:52,dollar:52,"dollar sign":52,5:53,five:53,"%":53,percent:53,"percent sign":53,6:54,six:54,"^":54,caret:54,7:55,seven:55,"&":55,ampersand:55,8:56,eight:56,"*":56,asterisk:56,9:57,nine:57,"(":57,"left parenthesis":57,a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,lwk:91,"left window key":91,rwk:92,"right window key":92,select:93,"select key":93,"numpad 0":96,"numpad 1":97,"numpad 2":98,"numpad 3":99,"numpad 4":100,"numpad 5":101,"numpad 6":102,"numpad 7":103,"numpad 8":104,"numpad 9":105,multiply:106,add:107,subtract:109,"decimal point":110,divide:111,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,"num lock":144,"scroll lock":145,";":186,"semi-colon":186,":":186,colon:186,"=":187,equal:187,"equal sign":187,"+":187,plus:187,",":188,comma:188,"<":188,lt:188,"less than":188,"left angle bracket":188,"-":189,dash:189,_:189,underscore:189,".":190,period:190,">":190,gt:190,"greater than":190,"right angle bracket":190,"/":191,"forward slash":191,"?":191,"question mark":191,"`":192,"grave accent":192,"~":192,tilde:192,"[":219,"open bracket":219,"{":219,"open brace":219,"\\":220,"back slash":220,"|":220,pipe:220,"]":221,"close bracket":221,"}":221,"close brace":221,"'":222,"single quote":222,'"':222,"double quote":222};var T=function(b){function c(){b.apply(this,arguments),this.$Regex=plat.acquire(Tb)}return __extends(c,b),c.prototype._setListener=function(){var a=this.attribute;if(!p(this.event)&&!p(a)){var c=this.attributes[a].trim();if("{"===c[0]){var d=this.evaluateExpression(c)||{method:"",key:null},e=d.key,f=d.keys;return this._parseArgs(d.method),t(e)&&t(f)?(this.attributes[a]=d.method,this._setKeyCodes(),void b.prototype._setListener.call(this)):(f=v(f)?f:[e],this._setKeyCodes(f),void this.addEventListener(this.element,this.event,this._onEvent,!1))}this._setKeyCodes(),b.prototype._setListener.call(this)}},c.prototype._onEvent=function(a){var c,d=this.keyCodes;p(d)?b.prototype._onEvent.call(this,a):u(d[a.keyCode])||(c=d[a.keyCode],(!c.shifted||a.shiftKey)&&b.prototype._onEvent.call(this,a))},c.prototype._setKeyCodes=function(b){v(b)||(b=[]);var c,d,e=b.length,f=this.keyCodes,h=this.$Regex.shiftedKeyRegex;g(f)||(f=this.keyCodes={});for(var i=0;e>i;++i)c=b[i],d=r(c)?c:a.KeyCodes[c.toLowerCase()],f[d]={shifted:h.test(c)}},c}(d);a.KeyCodeEventControl=T;var U=function(a){function c(){a.apply(this,arguments),this.event="keydown",this.cancelEvent=b}return __extends(c,a),c.prototype._onEvent=function(b){var c=this,d=b.keyCode;(d>=48&&90>=d||d>=186||d>=96&&111>=d)&&(this.cancelEvent=H(function(){a.prototype._onEvent.call(c,b)}))},c.prototype.dispose=function(){this.cancelEvent(),this.cancelEvent=null},c}(T);a.KeyDown=U;var V=function(a){function c(){a.apply(this,arguments),this.event="keydown",this.cancelEvent=b}return __extends(c,a),c.prototype._onEvent=function(b){var c=this,d=b.keyCode;(d>=48&&90>=d||d>=186||d>=96&&111>=d)&&(this.cancelEvent=H(function(){a.prototype._onEvent.call(c,b)}))},c.prototype.dispose=function(){this.cancelEvent(),this.cancelEvent=null},c}(T);a.KeyPress=V;var W=function(a){function b(){a.apply(this,arguments),this.event="keyup"}return __extends(b,a),b}(T);a.KeyUp=W,Cb.control(Lc,U),Cb.control(Mc,V),Cb.control(Nc,W);var X=function(a){function b(){a.apply(this,arguments),this.property=""}return __extends(b,a),b.prototype.loaded=function(){t(this.element)||(this.attribute=K(this.type),this.setter(),this.__removeListener=this.attributes.observe(this.attribute,this.setter))},b.prototype.contextChanged=function(){t(this.element)||this.setter()},b.prototype.dispose=function(){s(this.__removeListener)&&(this.__removeListener(),this.__removeListener=null)},b.prototype.setter=function(){var a=this;H(function(){var b=a.element,c=a.property;if(j(b))switch(a.attributes[a.attribute]){case"false":case"0":case"null":case"":b.setAttribute(c,""),b[c]=!1,b.removeAttribute(c);break;default:b.setAttribute(c,c),b[c]=!0}})},b}(eg);a.SetAttributeControl=X;var Y=function(a){function b(){a.apply(this,arguments),this.property="checked"}return __extends(b,a),b}(X);a.Checked=Y;var Z=function(a){function b(){a.apply(this,arguments),this.property="disabled"}return __extends(b,a),b}(X);a.Disabled=Z;var $=function(a){function b(){a.apply(this,arguments),this.property="selected"}return __extends(b,a),b}(X);a.Selected=$;var _=function(a){function b(){a.apply(this,arguments),this.property="readonly"}return __extends(b,a),b}(X);a.ReadOnly=_;var ab=function(a){function c(){a.apply(this,arguments),this.property="display",this.value="none",this.importance="important",this._initialValue=""}return __extends(c,a),c.prototype.initialize=function(){var a=this.element.style||{getPropertyValue:b},c=a.getPropertyValue(this.property);this._setValue(this.value,this.importance),p(c)||"none"===c||(this._initialValue=c)},c.prototype.setter=function(){var a=this;H(function(){if(j(a.element))switch(a.attributes[a.attribute]){case"false":case"0":case"null":case"":a._setValue(a.value,a.importance);break;default:a._setValue(a._initialValue)}})},c.prototype._setValue=function(a,c){var d=this.property,e=this.element.style||{setProperty:b,removeProperty:b,getPropertyValue:b,getPropertyPriority:b},f=e.getPropertyValue(d),g=e.getPropertyPriority(d);if(a!==f||c!==g)return p(a)?void e.removeProperty(d):void e.setProperty(d,a,c)},c}(X);a.Visible=ab;var bb=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype.setter=function(){var a=this.attributes[this.attribute];if(!p(a))for(var b,c,d,e=a.split(";"),f=this.element.style||{},g=e.length,h=0;g>h;++h)b=e[h].split(":"),b.length<2||(b.length>2&&(b=[b.shift(),b.join(":")]),c=K(b[0].trim()),d=b[1].trim(),u(f[c])||(f[c]=d))},b}(X);a.Style=bb,Cb.control(Qc,Y),Cb.control(Rc,Z),Cb.control(Sc,$),Cb.control(Tc,_),Cb.control(Uc,ab),Cb.control(Vc,bb);var cb=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype.setter=function(){var a=this.element,b=this.property,c=this.attributes[this.attribute];p(c)||t(a)||u(a[b])||(a[b]=c)},b}(X);a.ElementPropertyControl=cb;var db=function(a){function b(){a.apply(this,arguments),this.property="href"}return __extends(b,a),b.prototype.setter=function(){a.prototype.setter.call(this);var b=this.templateControl;g(b)&&s(b.setHref)&&b.setHref()},b}(cb);a.Href=db;var eb=function(a){function b(){a.apply(this,arguments),this.property="src",this.$Browser=ib(nc)}return __extends(b,a),b.prototype.setter=function(){var a=this.element,b=this.property,c=this.attributes[this.attribute];p(c)||t(a)||u(a[b])||(a[b]=this.$Browser.urlUtils(c))},b}(cb);a.Src=eb,Cb.control(Jc,db),Cb.control(Kc,eb);var fb=function(c){function d(){c.apply(this,arguments),this.$Parser=ib(Sb),this.$ContextManagerStatic=ib(Wb),this.$Compat=ib(Jb),this.$document=ib(Mb),this.priority=100,this.__fileSupported=ib(Jb).fileSupported,this.__fileNameRegex=ib(Tb).fileNameRegex,this.__isSelf=!1}return __extends(d,c),d.prototype.initialize=function(){this._determineType()},d.prototype.loaded=function(){var a=this.parent;if(!t(a)&&!t(this.element)){var b=K(this.type),c=this.$Parser,d=this._expression=c.parse(this.attributes[b]),e=d.identifiers;if(1!==e.length){var f=ib(Rb);return f.warn("Only 1 identifier allowed in a plat-bind expression",f.BIND),void(this._contextExpression=null)}var g=e[0].split(".");if(this._property=g.pop(),g.length>0)this._contextExpression=c.parse(g.join("."));else if(d.aliases.length>0){var h=d.aliases[0],i=a.findResource(h);if(t(i)||i.resource.type!==ef)return;this._property="value",this._contextExpression={evaluate:function(){return i.resource},aliases:[],identifiers:[],expression:""}}else this._contextExpression={evaluate:function(){return a.context},aliases:[],identifiers:[],expression:""};this._watchExpression(),t(this._addEventType)||this._addEventType()}},d.prototype.contextChanged=function(){this._watchExpression()},d.prototype.dispose=function(){this._addEventType=null},d.prototype._addTextEventListener=function(){var b,c=this,d=this.element,e=this.$Compat,f=!1,g="input",h=function(){f||c._propertyChanged()},i=function(){s(b)||(b=H(function(){h(),b=null}))};u(e.ANDROID)&&(this.addEventListener(d,"compositionstart",function(){return f=!0},!1),this.addEventListener(d,"compositionend",function(){f=!1,h()},!1)),e.hasEvent(g)?this.addEventListener(d,g,h,!1):(this.addEventListener(d,"keydown",function(b){var c=b.keyCode,d=a.KeyCodes;c===d.lwk||c===d.rwk||c>=d.shift&&c<=d.escape||c>d.space&&c<=d.down||i()},!1),this.addEventListener(d,"cut",i,!1),this.addEventListener(d,"paste",i,!1)),this.addEventListener(d,"change",h,!1)},d.prototype._addChangeEventListener=function(){this.addEventListener(this.element,"change",this._propertyChanged,!1)},d.prototype._addButtonEventListener=function(){this.addEventListener(this.element,Yd,this._propertyChanged,!1)},d.prototype._getChecked=function(){return this.element.checked},d.prototype._getValue=function(){return this.element.value},d.prototype._getTextContent=function(){return this.element.textContent},d.prototype._getFile=function(){var a=this.element,c=a.value;return this.__fileSupported&&a.files.length>0?a.files[0]:{name:c.replace(this.__fileNameRegex,""),path:c,lastModifiedDate:void 0,type:void 0,size:void 0,msDetachStream:b,msClose:b,slice:function(){return{}}}},d.prototype._getFiles=function(){var a=this.element;if(this.__fileSupported)return Array.prototype.slice.call(a.files);for(var c,d=a.value.split(/,|;/g),e=d.length,f=[],g=0;e>g;++g)c=d[g],f.push({name:c.replace(this.__fileNameRegex,""),path:c,lastModifiedDate:void 0,type:void 0,size:void 0,msDetachStream:b,msClose:b,slice:function(){return{}}});return f},d.prototype._getSelectedValues=function(){for(var a,b=this.element.options,c=b.length,d=[],e=0;c>e;++e)a=b[e],a.selected&&d.push(a.value);return d},d.prototype._setText=function(a,b,c){return this.__isSelf?void 0:t(a)&&(a="",c===!0)?(t(this.element.value)&&this._setValue(a),void this._propertyChanged()):void this._setValue(a)},d.prototype._setRange=function(a,b,c){return this.__isSelf?void 0:p(a)&&(a=0,c===!0)?(p(this.element.value)&&this._setValue(a),void this._propertyChanged()):void this._setValue(a)},d.prototype._setChecked=function(a,b,c){if(!this.__isSelf){if(!q(a)){if(c===!0)return void this._propertyChanged();a=!!a}this.element.checked=a}},d.prototype._setRadio=function(a){var b=this.element;if(!this.__isSelf)return t(a)&&b.checked?void this._propertyChanged():void(b.checked=b.value===a)},d.prototype._setSelectedIndex=function(a,b,c){if(!this.__isSelf){if(c===!0&&this._checkAsynchronousSelect())return void(t(a)&&this._propertyChanged());var d=this.element,e=d.value;if(t(a))return c!==!0&&this.$document.body.contains(d)?void(d.selectedIndex=-1):void this._propertyChanged();if(m(a)){if(e===a)return;if(!this.$document.body.contains(d))return d.value=a,void(d.value!==a&&(d.value=e,this._propertyChanged()))}else{var f,g=ib(Rb);r(a)?(a=a.toString(),f="Trying to bind a value of type number to a select element. The value will implicitly be converted to type string."):f="Trying to bind a value that is not a string to a select element. The element's selected index will be set to -1.",g.warn(f,g.BIND)}d.value=a,(d.value!==a||-1===d.selectedIndex)&&(d.selectedIndex=-1)}},d.prototype._setSelectedIndices=function(a,b,c){if(!(this.__isSelf||c===!0&&this._checkAsynchronousSelect())){var d,e=this.element.options,f=t(e)?0:e.length,g=t(a);if(!g&&v(a))for(var h,i;f-->0;)d=e[f],h=d.value,i=Number(h),d.selected=-1!==a.indexOf(h)||r(i)&&-1!==a.indexOf(i)?!0:!1;else for(c===!0&&this._propertyChanged();f-->0;){if(d=e[f],!g&&d.value===""+a)return void(d.selected=!0);d.selected=!1}}},d.prototype._determineType=function(){if(t(this.templateControl)||!this._observingBindableProperty()){var a=this.element;if(!t(a))switch(a.nodeName.toLowerCase()){case"textarea":this._addEventType=this._addTextEventListener,this._getter=this._getValue,this._setter=this._setText;break;case"input":switch(a.type){case"button":case"submit":case"reset":this._addEventType=this._addButtonEventListener,this._getter=this._getValue;break;case"checkbox":this._addEventType=this._addChangeEventListener,this._getter=this._getChecked,this._setter=this._setChecked;break;case"radio":this._initializeRadio();break;case"range":this._addEventType=this._addChangeEventListener,this._getter=this._getValue,this._setter=this._setRange;break;case"file":var b=a.multiple;this._addEventType=this._addChangeEventListener,this._getter=b?this._getFiles:this._getFile;break;default:this._addEventType=this._addTextEventListener,this._getter=this._getValue,this._setter=this._setText}break;case"select":this._initializeSelect();break;case"button":this._addEventType=this._addButtonEventListener,this._getter=this._getTextContent
}}},d.prototype._watchExpression=function(){var a=this,b=this._contextExpression,c=this.evaluateExpression(b);if(!g(c))if(t(c)&&b.identifiers.length>0)c=this.$ContextManagerStatic.createContext(this.parent,b.identifiers[0]);else{var d=ib(Rb);d.warn("plat-bind is trying to index into a primitive type. "+this._contextExpression.expression+' is already defined and not an object when trying to evaluate plat-bind="'+this._expression.expression+'"',d.BIND)}var e;if(s(this._setter)){this._setter===this._setSelectedIndices&&(e=this._property,t(c[e])&&(c[e]=[]),this.observeArray(c,e,null,function(b){a._setter(b.newArray,b.oldArray,!0)}));var f=this._expression;this.observeExpression(f,this._setter),this._setter(this.evaluateExpression(f),void 0,!0)}},d.prototype._propertyChanged=function(){if(!t(this._contextExpression)){var a=this.evaluateExpression(this._contextExpression),b=this._property,c=this._getter();t(a)||a[b]===c||(this.__isSelf=!0,a[b]=c,this.__isSelf=!1)}},d.prototype._initializeRadio=function(){var a=this.element;if(this._addEventType=this._addChangeEventListener,this._getter=this._getValue,this._setter=this._setRadio,!a.hasAttribute("name")){var b=K(this.type),c=this.attributes[b];a.setAttribute("name",c)}a.hasAttribute("value")||a.setAttribute("value","")},d.prototype._initializeSelect=function(){var a,b=this.element,c=b.multiple,d=b.options,e=d.length;this._addEventType=this._addChangeEventListener,c?(this._getter=this._getSelectedValues,this._setter=this._setSelectedIndices):(this._getter=this._getValue,this._setter=this._setSelectedIndex);for(var f=0;e>f;++f)a=d[f],a.hasAttribute("value")||a.setAttribute("value",a.textContent)},d.prototype._checkAsynchronousSelect=function(){var a=this,b=this.templateControl;if(!t(b)&&(b.type===Ad||b.type===wd)&&o(b.itemsLoaded)){var c=b.absoluteContextPath.split("."),d=c.pop();return this.observeArray(this.$ContextManagerStatic.getContext(this.parent,c),d,null,function(){b.itemsLoaded.then(function(){a._setter(a.evaluateExpression(a._expression))})}),b.itemsLoaded.then(function(){a._setter(a.evaluateExpression(a._expression))}),!0}return!1},d.prototype._observingBindableProperty=function(){var a=this,b=this.templateControl;return s(b.observeProperty)&&s(b.setProperty)?(b.observeProperty(function(b){a._getter=function(){return b},a._propertyChanged()}),this._setter=this._setBindableProperty,!0):!1},d.prototype._setBindableProperty=function(a,b,c){this.__isSelf||a===b||this.templateControl.setProperty(a,b,c)},d.prototype._setValue=function(a){var b=this.element;b.value!==a&&(b.value=a)},d}(eg);a.Bind=fb,Cb.control(Ic,fb);var gb=function(a){function b(){a.apply(this,arguments),this.$ContextManagerStatic=ib(Wb),this.property="",this.priority=200,this._listeners=[],this._boundAddListener=this._addListener.bind(this)}return __extends(b,a),b.prototype.initialize=function(){this.attribute=K(this.type),this._setProperty(this._getValue())},b.prototype.loaded=function(){this._observeProperty(),this._setProperty(this._getValue())},b.prototype.dispose=function(){s(this._removeListener)&&this._removeListener(),this._listeners=[]},b.prototype._setProperty=function(a,b){var c=this.templateControl;t(c)||(this.$ContextManagerStatic.defineGetter(c,this.property,{value:a,observe:this._boundAddListener},!0,!0),this._callListeners(a,b))},b.prototype._callListeners=function(a,b){for(var c=this._listeners,d=c.length,e=0;d>e;++e)c[e](a,b)},b.prototype._addListener=function(a){var b=this._listeners;return a=a.bind(this.templateControl),b.push(a),function(){var c=b.indexOf(a);-1!==c&&b.splice(c,1)}},b.prototype._getValue=function(){return t(this.templateControl)?void 0:this.evaluateExpression(this.attributes[this.attribute])},b.prototype._observeProperty=function(){t(this.templateControl)||(this._removeListener=this.observeExpression(this.attributes[this.attribute],this._setProperty))},b}(eg);a.ObservableAttributeControl=gb;var hb=function(a){function b(){a.apply(this,arguments),this.property="options"}return __extends(b,a),b}(gb);a.Options=hb,Cb.control(Pc,hb)}(ig=a.controls||(a.controls={}));var jg=function(){function a(){var a=ib(Wb);a.defineGetter(this,"uid",J(Hc))}return a.start=function(){if(!a.$Compat.isCompatible){var b=ib(Rb);return void b.fatal("PlatypusTS only supports modern browsers where Object.defineProperty is defined",b.COMPAT)}a.__addPlatCss();var c=a.$EventManagerStatic;c.dispose($e),c.on($e,Ed,a.__ready),c.on($e,Kd,a.__shutdown),c.initialize()},a.registerApp=function(b){if(!t(a.app)&&m(a.app.uid)&&a.$EventManagerStatic.dispose(a.app.uid),a.__injector=b,a.$Compat.amd){var c=a.$LifecycleEventStatic,d=c.dispatch;H(function(){d(Ed,c)})}},a.load=function(b){var c=a.$LifecycleEventStatic,d=a.$Compiler,e=a.$Document.body,f=a.$Document.head;return c.dispatch(Ld,a),t(b)?(e.setAttribute(Qd,""),void H(function(){d.compile(f),d.compile(e),e.removeAttribute(Qd)})):s(b.setAttribute)?(b.setAttribute(Qd,""),void H(function(){d.compile(b),b.removeAttribute(Qd)})):void d.compile(b)},a.__ready=function(b){Jf.Injector.initialize(),a.__registerAppEvents(b),b.defaultPrevented||a.load()},a.__shutdown=function(){var a=navigator.app;!t(a)&&s(a.exitApp)&&a.exitApp()},a.__registerAppEvents=function(b){var c=a.__injector;if(!t(c)&&s(c.inject)){var d=a.app=c.inject();d.on(Fd,d.suspend),d.on(Gd,d.resume),d.on(Hd,d.online),d.on(Id,d.offline),d.on(Jd,d.error),s(d.ready)&&d.ready(b)}},a.__addPlatCss=function(){var b=a.$Document;if(!a.$Compat.platCss){if(!t(b.styleSheets)&&b.styleSheets.length>0)return void b.styleSheets[0].insertRule("[plat-hide] { display: none !important; }",0);var c=document.createElement("style");c.textContent="[plat-hide] { display: none !important; }",document.head.appendChild(c)}},a.prototype.suspend=function(){},a.prototype.resume=function(){},a.prototype.error=function(){},a.prototype.ready=function(){},a.prototype.online=function(){},a.prototype.offline=function(){},a.prototype.dispatchEvent=function(b){for(var c=[],d=1;d<arguments.length;d++)c[d-1]=arguments[d];var e=a.$EventManagerStatic||ib(Pb);e.dispatch(b,this,e.DIRECT,c)},a.prototype.on=function(b,c){var d=a.$EventManagerStatic||ib(Pb);return d.on(this.uid,b,c,this)},a.prototype.load=function(b){a.load(b)},a.app=null,a}();a.App=jg,a.IAppStatic=wb,Cb.injectable(Eb,wb,[Jb,Pb,Mb,Xb,Qb],Je),a.IApp=xb,Cb.injectable(Fb,xb,[Eb],Le)}(plat||(plat={})),module.exports=plat;
//# sourceMappingURL=platypus.js.map